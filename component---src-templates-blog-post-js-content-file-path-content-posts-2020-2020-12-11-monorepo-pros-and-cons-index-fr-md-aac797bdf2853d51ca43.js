"use strict";(self.webpackChunkmaxpou_fr=self.webpackChunkmaxpou_fr||[]).push([[176],{34:function(e,n,t){t.r(n),t.d(n,{default:function(){return b}});var a=t(1151),s=t(7294);function l(e){const n=Object.assign({p:"p",span:"span",em:"em",h2:"h2",a:"a",h3:"h3",strong:"strong",br:"br",ul:"ul",li:"li"},(0,a.ah)(),e.components);return s.createElement(s.Fragment,null,s.createElement(n.p,null,"La tendance actuelle est de diviser nos codebases. Ces derniÃ¨res annÃ©es, on a vu apparaÃ®tre des\nconcepts comme les microservices, les micro-frontendsâ€¦"),"\n",s.createElement(n.p,null,"Et puis Ã  contre-courant, on voit aussi des projets se rassembler sous un seul et unique repository\ngit. On appelle cela des monorepos (ou monorepository)."),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAACkklEQVR42mWSW0jTYRjGf9uaf2fpNs+xeShmuqC8kLopIruKTkJdFBIdJDQ6SF4UIoKkgVhQEREkZRfZgXlqF+rmZhZhItg5TUs76NTYpII8xFa9MZ0o9Nx8vO/3fu/z8OMjqydLazlpUVZDGEEJ6mBtsVgUQC2gCraLTIZMx9q4PUCEEaMeiAJiAQNER0FMJBDHu0Ll6ddq9fuhu7w+eIzEl4XhxSPlWo+ngc9PLnOCkPYr+hWSm5Atj7gqLprExY2/LSi/3RwRN3bpoOFjLTl4bYlT8ipDpjuNf4v2Yxm5a7wmzzNEPiTLuzpd1WxoQRNMMdGCWZ7F+6QvXaTb+ON7B4Y/3VE18j5NpM8s3taIEr7UL/HOuCMCE3btVEEOqQN3NJf8j3Tid+vkRbWqfGEhes89kgLtYV7pXCaBdu33by70frfmpnQvFenSyXijupjSw2SeL2DD2UOsA1RFBzBV5LOx4jAbC/eRwIJir+ejlYdkBRxk+x2snzVrJTXgYrO0s8lWRjL9x5d2+26pBz/d523+KZa/ORFRMn4ubPSrneGuKxSGEqoB47CN6F9OamYcNM+0cls6CJ9p4+h0K06/k+bBWnbjfZA4Jb1Wme6Kn2NYp78mb6wigyn/MfQ0kSQvEnzSbxV5Hj/HsMdQIx/TRQaSxNsWXsKQTTP+06nzjzVqJ/O2kdJ7W3Vx0qXIpEORnmp12SKGhmEbpkC7dkwe6yTg1vomWogKuDXXpVMn8kSR0Xr1GY5sxVx2kNRzBzAFH5/OI7Iil5TiXFbm7SJyEcOY5FiW2yvZ8vgC291VZAdNaktZ01HFDmclO8/sxTo/bAYygDRgFbAi+IFDd6rQGeS4JFQnw2yANUA6oMzP/AO/ViQxTELQKQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/b0c137ebd7cfe7057ffd30472e33252c/cbe2e/mono-vs-multi.webp 148w,\n/static/b0c137ebd7cfe7057ffd30472e33252c/3084c/mono-vs-multi.webp 295w,\n/static/b0c137ebd7cfe7057ffd30472e33252c/5ca24/mono-vs-multi.webp 590w,\n/static/b0c137ebd7cfe7057ffd30472e33252c/dad35/mono-vs-multi.webp 885w,\n/static/b0c137ebd7cfe7057ffd30472e33252c/2baf0/mono-vs-multi.webp 1180w,\n/static/b0c137ebd7cfe7057ffd30472e33252c/d1098/mono-vs-multi.webp 1906w"\n              sizes="(max-width: 590px) 100vw, 590px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/b0c137ebd7cfe7057ffd30472e33252c/12f09/mono-vs-multi.png 148w,\n/static/b0c137ebd7cfe7057ffd30472e33252c/e4a3f/mono-vs-multi.png 295w,\n/static/b0c137ebd7cfe7057ffd30472e33252c/fcda8/mono-vs-multi.png 590w,\n/static/b0c137ebd7cfe7057ffd30472e33252c/efc66/mono-vs-multi.png 885w,\n/static/b0c137ebd7cfe7057ffd30472e33252c/c83ae/mono-vs-multi.png 1180w,\n/static/b0c137ebd7cfe7057ffd30472e33252c/df88b/mono-vs-multi.png 1906w"\n            sizes="(max-width: 590px) 100vw, 590px"\n            type="image/png"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/b0c137ebd7cfe7057ffd30472e33252c/fcda8/mono-vs-multi.png"\n            alt="mono vs. mulAstucele repository"\n            title=""\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n    </span>'}}),"\n",s.createElement(n.p,null,"Ã‡a va faire pas loin de 2 ans maintenant que jâ€™en utilise et maintient un. Cet article est un\ncondensÃ© de ce que jâ€™aime et nâ€™aime pas avec les monorepos."),"\n",s.createElement(n.p,null,s.createElement(n.em,null,"Contexte: le monorepo sur lequel je travaille contient ~ 40 packages (npm), principalement des\napplications vue.js. Toutes ces petites applications font partie dâ€™une plus grande application. Nous\navons dÃ©cidÃ© de diviser une Ã©norme application en plus petites, car la maintenance Ã©tait devenue\ningÃ©rable. On est Ã  peu prÃ¨s 15 Ã  travailler sur ce monorepo (pas Ã  plein temps).")),"\n",s.createElement(n.h2,{id:"avantages",style:{position:"relative"}},s.createElement(n.a,{href:"#avantages","aria-label":"avantages permalink",className:"anchor before"},s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Avantages"),"\n",s.createElement(n.h3,{id:"-teamwork",style:{position:"relative"}},s.createElement(n.a,{href:"#-teamwork","aria-label":" teamwork permalink",className:"anchor before"},s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"ğŸ¤ Teamwork"),"\n",s.createElement(n.p,null,s.createElement(n.strong,null,"Favorise les contributions"),":",s.createElement(n.br),"\n","Lorsque vous avez dÃ©jÃ  le code, câ€™est plus facile de contribuer. Vous avez dÃ©jÃ  tout sous la main.\nPlus besoin de rechercher le repo, de le cloner et dâ€™installer les dÃ©pendances."),"\n",s.createElement(n.p,null,s.createElement(n.strong,null,"Meilleure vue dâ€™ensemble de lâ€™ensemble du systÃ¨me"),":",s.createElement(n.br),"\n","Quand on a tout le code au mÃªme endroit, les informations comme ",s.createElement(n.em,null,"â€œcombien de fois est utilisÃ© tel ou\ntel composant?â€")," ou bien ",s.createElement(n.em,null,"â€œou est utilisÃ© cet endpointâ€")," se trouvent en un clin dâ€™oeil (avec bon\nvieux ",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">ctrl + F</code>'}}),")."),"\n",s.createElement(n.p,null,s.createElement(n.strong,null,"PrivilÃ©gie les grands refactoring"),":",s.createElement(n.br),"\n","Par la, jâ€™entends que vous pouvez changer un composant prÃ©sent dans plusieurs packages en un seul\ncommit. Pareil si vous voulez changer la version dâ€™une librairieâ€¦"),"\n",s.createElement(n.p,null,s.createElement(n.strong,null,"Supprimez du code mort en toute confiance"),":",s.createElement(n.br),"\n","Combien de fois avez-vous voulu supprimer du code, mais vous ne lâ€™avez pas fait parce que vous ne\nsaviez pas si le code Ã©tait utilisÃ© ailleurs? Encore un avantage dâ€™avoir tout le code sous la main."),"\n",s.createElement(n.p,null,s.createElement(n.strong,null,"Source unique de vÃ©ritÃ©"),":",s.createElement(n.br),"\n","Le projet sur lequel je travaille avait un nom trÃ¨s Ã©trange pour la branche principale. Et puis un\njour on a dÃ©cidÃ© dâ€™utiliser un autre nom tout aussi Ã©trange pour le remplacer. Certains repos\nÃ©taient mis Ã  jour et dâ€™autres non. A chaque fois que quelquâ€™un clonait le repo, un bourde nâ€™Ã©tait\njamais bien loin."),"\n",s.createElement(n.h3,{id:"-dependencies",style:{position:"relative"}},s.createElement(n.a,{href:"#-dependencies","aria-label":" dependencies permalink",className:"anchor before"},s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Dependencies"),"\n",s.createElement(n.p,null,s.createElement(n.strong,null,"Plus de place sur le disque dur"),":",s.createElement(n.br),"\n","Si vous Ãªtes familiers avec lâ€™Ã©cosystÃ¨me JavaScript, vous savez probablement que le dossier\nnode*module peut Ãªtre\n",s.createElement(n.a,{href:"https://www.reddit.com/r/ProgrammerHumor/comments/6s0wov/heaviest_objects_in_the_universe/"},"extrÃªmement lourd"),".\nLorsque nous avions environ 30 applications / packages, cela prenait 12 Go sur le disque dur. Oui,\n12 Go! Nous avions des dÃ©pendances comme Vue.js installÃ©es 30 fois. Heureusement, certains outils\n(comme yarn) crÃ©ent un lien symbolique *(symlinks)_ entre les dÃ©pendances redondantes lorsque les\nworkspaces sont activÃ©s. GrÃ¢ce Ã  cette fonctionnalitÃ©,\n",s.createElement(n.a,{href:"https://twitter.com/_maxpou/status/1263426573379739651"},"nous sommes passÃ©s de 12 Go Ã  1.7 Go"),"."),"\n",s.createElement(n.p,null,s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 64.86486486486486%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAAC40lEQVR42o1RbUhTURg+6u50I9NIZep0fn8uFYaFgkqUGFGakpZoYFkTovIrjag4WQlWhGVKXNIEdVPvXM5pkqK72lZTFH/U/NEPU6SUnJbL5gckb9zrlIkGPfByzvue5zzwvA9CuwAAbJjTmFwZbMppnjMVd/wwFagWF3PkX41pVSHWnB0YlUoJY/njewtPalSzJXcOM7MLtTrHpOZJn1M1+lB9SWcg4G7h8v23XlNXKN8z5Cf/+FdjgWEU7GG4GCNbsNSW6PfrOGqurDxh7OpNV6Z3aIDYwDbod1dAB2qCqC1iI7iLlNAmUsIgrxGS2RkFdmh3m4i1AP32/vM93rlDLYGRk93hZ5f6BelgQFygkcNynyD7o1Kc+LnrQPxMT8DlCblzhLEn4OSazjdrhXY6uqlll4AQh5QggmlmO/ce/DUgxuZ2JDEPivOW6ICCaQrxvqkR3/TeJ39J65a40itMMg9Gls2r0KGfmojcZX3ibVOfKAehDds8q+IjJGGFURjmsjuWjBIjqS8Sx/JkxwdODMfo4hVxdEqlM0thOVvhMKeDtedtqYGFOHGtwtuc06yFfIUGClrptfMy/cQlMtqaA4BtAaxCYYGBHfBlIHGTrd5ybfpTSsghG6WDXXjNgldQ/e9SUZ3prrB2TczwPCk459difuAqXz29IxCHp1pvfvW7Y8zdg4KY0A4oO9E5UVXYpewcUgYImXSj30BZVBc8dKI2UvdVwsVY9UqFsBUydwjuqxtp8FF9AU7NQPSW5XbHWNA7U9BPZDA9TSdwaBpz2DdVsCN82F8Keq/noHXM3yHoV92bGURqZNGPKIFFzkatSDkyrs2QD/el3kAYuM+6u+0LqWkesxoYlRJGXbLHzHixaGowzn376jDmkkVSFzIr1R0XFblshiN4aU4TKqFHoAA1Ub/G2kynwA5jbEuSJIH+G7ARjmf9XHpI+/pw0Ot1Dd8iiCkD12AwcGma5vzr/183Tk0wEILZ/AAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/b8b8ab847d44244af6ef9755151e4c6b/cbe2e/dependency-management.webp 148w,\n/static/b8b8ab847d44244af6ef9755151e4c6b/3084c/dependency-management.webp 295w,\n/static/b8b8ab847d44244af6ef9755151e4c6b/5ca24/dependency-management.webp 590w,\n/static/b8b8ab847d44244af6ef9755151e4c6b/dad35/dependency-management.webp 885w,\n/static/b8b8ab847d44244af6ef9755151e4c6b/2baf0/dependency-management.webp 1180w,\n/static/b8b8ab847d44244af6ef9755151e4c6b/611d0/dependency-management.webp 2096w"\n              sizes="(max-width: 590px) 100vw, 590px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/b8b8ab847d44244af6ef9755151e4c6b/12f09/dependency-management.png 148w,\n/static/b8b8ab847d44244af6ef9755151e4c6b/e4a3f/dependency-management.png 295w,\n/static/b8b8ab847d44244af6ef9755151e4c6b/fcda8/dependency-management.png 590w,\n/static/b8b8ab847d44244af6ef9755151e4c6b/efc66/dependency-management.png 885w,\n/static/b8b8ab847d44244af6ef9755151e4c6b/c83ae/dependency-management.png 1180w,\n/static/b8b8ab847d44244af6ef9755151e4c6b/8c48a/dependency-management.png 2096w"\n            sizes="(max-width: 590px) 100vw, 590px"\n            type="image/png"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/b8b8ab847d44244af6ef9755151e4c6b/fcda8/dependency-management.png"\n            alt="dependency-management"\n            title=""\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n    </span>'}})," ",s.createElement(n.em,null,"Note: Je sais que npm 7.0 supporte maintenant\nles workspaces. Cependant, câ€™est encore un petit peu tÃ´t et\n",s.createElement(n.a,{href:"https://github.com/npm/rfcs/pull/117/files"},"certaines commandes ne sont pas encore supportÃ©es"),".")),"\n",s.createElement(n.p,null,s.createElement(n.strong,null,"hot-reload entre les packages"),":",s.createElement(n.br),"\n","Certains outils lient automatiquement les dÃ©pendances locales entre elles. Ce qui signifie que si\npackage-a est utilisÃ© dans package-b, vous pouvez travailler sur package-a et voir le rÃ©sultat en\ndirect dans package-b."),"\n",s.createElement(n.p,null,s.createElement(n.strong,null,"Ajouter un package est plus simple"),":",s.createElement(n.br),"\n","Pour nous, tous nos packages sont dans un dossier ",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">packages</code>'}}),". Lâ€™ajout dâ€™un nouveau package est trÃ¨s\nsimple. Pas besoin de paramÃ©trer lâ€™intÃ©gration continue (CI), le registre npm, ni de redÃ©finir les\npermissions du GitLabâ€¦ tout a dÃ©jÃ  Ã©tÃ© fait!"),"\n",s.createElement(n.h2,{id:"inconvÃ©nients",style:{position:"relative"}},s.createElement(n.a,{href:"#inconv%C3%A9nients","aria-label":"inconvÃ©nients permalink",className:"anchor before"},s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"InconvÃ©nients"),"\n",s.createElement(n.h3,{id:"-git--code-hosting-platforms-gitlabgithub",style:{position:"relative"}},s.createElement(n.a,{href:"#-git--code-hosting-platforms-gitlabgithub","aria-label":" git  code hosting platforms gitlabgithub permalink",className:"anchor before"},s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"ğŸ›  Git & code hosting platforms (GitLab/GitHubâ€¦)"),"\n",s.createElement(n.p,null,s.createElement(n.strong,null,"Autorisation"),":",s.createElement(n.br),"\n","Quand on met des permissions de lecture/ecriture sur GitLab/GitHub/etc., câ€™est pour le repo tout\nentier."),"\n",s.createElement(n.p,null,s.createElement(n.strong,null,"ğŸ’¡ Astuce:")," Vous pouvez crÃ©er un fichier CODEOWNERS\n(",s.createElement(n.a,{href:"https://docs.gitlab.com/ee/user/project/code_owners.html"},"doc GitLab"),",\n",s.createElement(n.a,{href:"https://docs.github.com/en/github/creating-cloning-and-archiving-repositories/about-code-owners"},"doc GitHub"),")\npour dÃ©finir des rÃ¨gles dâ€™autorisation."),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="md"><pre class="language-md"><code class="language-md"><span class="token title important"><span class="token punctuation">#</span> .gitlab/CODEOWNERS</span>\n\npackages/app-1 @user1 packages/app-2 @user2</code></pre></div>'}}),"\n",s.createElement(n.p,null,s.createElement(n.em,null,"Avec lâ€™exemple du dessus, user2 devra avoir lâ€™approbation de user1 pour modifier app-1.")),"\n",s.createElement(n.p,null,s.createElement(n.strong,null,"Un Git log peu lisible"),":",s.createElement(n.br),"\n","Si les merge requests sont mergÃ©es dans lâ€™Ã©tat avec 10-15 commits, vous allez peut-Ãªtre avoir\nquelques soucis le jour oÃ¹ vous aurez besoin dâ€™utiliser git log."),"\n",s.createElement(n.p,null,s.createElement(n.strong,null,"ğŸ’¡ Astuce:")," Si vous pouvez utiliser la mÃ©thode du\n",s.createElement(n.a,{href:"git-conventional-commits"},"â€œconventional commitâ€")," vous pouvez mettre entre parenthÃ¨se le nom du\npackage. Comme Ã§a, ce sera plus facile pour voir lâ€™historique dâ€™un paquet spÃ©cifique."),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token comment"># Lister toutes les features du package-B</span>\n<span class="token function">git</span> log <span class="token parameter variable">--all</span> <span class="token parameter variable">--grep</span><span class="token operator">=</span><span class="token string">"feat(package-B):"</span>\n\n<span class="token comment"># ou bien:</span>\n<span class="token function">git</span> log <span class="token parameter variable">--all</span> path/to/package-b</code></pre></div>'}}),"\n",s.createElement(n.p,null,s.createElement(n.strong,null,"Git log peut devenir inutilisable"),":",s.createElement(n.br),"\n","Si vous avez beaucoup de commits / branches / tags, cela signifie que vous aurez beaucoup dâ€™objets\ngit stockÃ©s. git peinera peut-Ãªtre lorsque vous souhaitez obtenir lâ€™historique (git log/git blame)."),"\n",s.createElement(n.p,null,s.createElement(n.strong,null,"ğŸ’¡ Astuce:")," faites un petit flush du garbage collector de temps Ã  autres (",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">git gc</code>'}}),"). Nâ€™oubliez\npas non plus de supprimer vos vieilles branches (",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">git fetch --all --prune</code>'}})," marche bien)."),"\n",s.createElement(n.p,null,s.createElement(n.strong,null,"Oubliez les branches de type â€œnextâ€"),":",s.createElement(n.br),"\n","Votre branche ",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">main</code>'}})," / ",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">master</code>'}})," doit Ãªtre seule source de vÃ©ritÃ©. Vous ne pouvez pas avoir de\nbranche ",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">next</code>'}}),". Ã‡a va Ãªtre un enfer Ã  maintenirâ€¦ Si vous souhaitez que certaines fonctionnalitÃ©s\nne soient disponibles que pour un environnement spÃ©cifique, je vous recommande chaudement dâ€™utiliser\ndes ",s.createElement(n.em,null,"â€œfeature flagsâ€"),"."),"\n",s.createElement(n.p,null,s.createElement(n.strong,null,"Le repo peut devenir trÃ¨s lourd"),":",s.createElement(n.br),"\n","A un moment, le rÃ©pertoire ",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">.git</code>'}})," a la racine du monorepo va peut-Ãªtre atteindre quelques Gb."),"\n",s.createElement(n.p,null,s.createElement(n.strong,null,"ğŸ’¡ Astuce:")," Voici 2 options si vous souhaitez Ã©conomiser de lâ€™espace disque."),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token comment"># Clone le repo mais sans historique</span>\n<span class="token function">git</span> clone <span class="token parameter variable">--depth</span> <span class="token number">1</span> <span class="token operator">&lt;</span>repo-url<span class="token operator">></span>\n\n<span class="token comment"># 1. clone un repo vide et sans historique</span>\n<span class="token comment"># 2. pull uniquement le package-a de la branche main</span>\n<span class="token function">git</span> clone <span class="token punctuation">\\</span>\n  <span class="token parameter variable">--depth</span> <span class="token number">1</span> <span class="token punctuation">\\</span>\n  --no-checkout <span class="token punctuation">\\</span>\n  <span class="token parameter variable">--filter</span><span class="token operator">=</span>blob:none <span class="token punctuation">\\</span>\n  <span class="token operator">&lt;</span>repo-url<span class="token operator">></span>\n<span class="token function">git</span> checkout main -- packages/package-a</code></pre></div>'}}),"\n",s.createElement(n.p,null,s.createElement(n.em,null,"Note: Voici un peu de lecture si vous souhaitez en apprendre plus sur le\n",s.createElement(n.a,{href:"https://docs.gitlab.com/ee/topics/git/partial_clone.html"},"â€œpartial cloningâ€")," (en anglais).")),"\n",s.createElement(n.h3,{id:"-continuous-integration-ci",style:{position:"relative"}},s.createElement(n.a,{href:"#-continuous-integration-ci","aria-label":" continuous integration ci permalink",className:"anchor before"},s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"ğŸ¤– Continuous Integration (CI)"),"\n",s.createElement(n.p,null,s.createElement(n.strong,null,"Quand câ€™est cassÃ©, tout le monde est bloquÃ©!"),s.createElement(n.br),"\n","Si la branche ",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">main</code>'}})," est marquÃ©e en rouge par votre intÃ©gration continue, tout le monde est impactÃ©.\nVous ne pouvez pas mettre ce problÃ¨me sous le tapis. Ã‡a doit Ãªtre traitÃ© immÃ©diatement."),"\n",s.createElement(n.p,null,s.createElement(n.strong,null,"Le dilemme de lâ€™intÃ©gration continue"),":",s.createElement(n.br),"\n","Si les bases de code sont mutualisÃ©es, vous avez plus de code. Qui dit plus de code, dit plus de\ntravail pour lâ€™intÃ©gration continue (CI). Donc plus de tests, de lint, de buildâ€¦"),"\n",s.createElement(n.p,null,"Lorsquâ€™il sâ€™agit de CI, le temps est le nerf de la guerre. Dâ€™une part, on veut que ce soit le plus\nrapide possible et dâ€™autre part on recherche aussi de la fiabilitÃ©. Je veux dire, quand mon CI me\ndonne le feu vert, je suis plus confiant pour fusionner mon travail."),"\n",s.createElement(n.p,null,"Il peut Ãªtre tentant de rÃ©duire le nombre de packages analysÃ©s pour gagner du temps. Mais\nlâ€™intÃ©gration continue perdra son intÃ©rÃªt car elle ne pourra pas repÃ©rer une rÃ©gression\nâ€œcross-repoâ€."),"\n",s.createElement(n.p,null,"|                                            | Toute la codebase | Package sÃ©lectionnÃ© | Packages affectÃ© |\n| ------------------------------------------ | ----------------- | ------------------- | ---------------- |\n| Vitesse de Build/lint/test                 | ğŸŒ Lent           | ğŸš€ Rapide           | ğŸš— Normal        |\n| DÃ©tecte les cross-packages",s.createElement("br"),"rÃ©gression? | âœ… Oui            | âŒ Non              | âœ… Oui           |\n| Facile Ã  mettre en place?                  | ğŸ˜€ Oui            | ğŸ˜€ Oui              | ğŸ˜Ÿ Non           |"),"\n",s.createElement(n.p,null,"La 3e option est, Ã  mon avis, la plus viable. Mais vous devrez tout faire manuellement. Une 4e\noption pourrait utiliser des filtres. Les packages Ã©tiquetÃ©s â€œimportantsâ€ utilisent la 1Ã¨re\nstratÃ©gie et les autres utilisent la 2Ã¨me stratÃ©gie."),"\n",s.createElement(n.p,null,s.createElement(n.strong,null,"ğŸ’¡ Astuces:")),"\n",s.createElement(n.ul,null,"\n",s.createElement(n.li,null,"Je vous recommande dâ€™ajouter un label spÃ©cifique pour shunter la CI (ex ",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">NO_CI</code>'}}),"). Si vous modifiez\nune typo dans le README, vous nâ€™avez pas besoin dâ€™exÃ©cuter toute une batterie de tests."),"\n",s.createElement(n.li,null,"Si votre pipeline (CI) comporte des tÃ¢ches parallÃ¨les, nâ€™oubliez pas dâ€™activer lâ€™option\nâ€œfail-fastâ€."),"\n"),"\n",s.createElement(n.h3,{id:"-teamwork-1",style:{position:"relative"}},s.createElement(n.a,{href:"#-teamwork-1","aria-label":" teamwork 1 permalink",className:"anchor before"},s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"ğŸ¤ Teamwork"),"\n",s.createElement(n.p,null,s.createElement(n.strong,null,"Changements cachÃ©s"),":",s.createElement(n.br),"\n","Certains repos sont parfois plus â€œsensiblesâ€ que dâ€™autres. Une erreur dâ€™inattention lors dâ€™une revue\nde code et vous vous retrouvez vite avec quelque chose de non dÃ©sirÃ©."),"\n",s.createElement(n.p,null,s.createElement(n.strong,null,"La quantitÃ© de code peut Ãªtre intimidante"),":",s.createElement(n.br),"\n","La premiÃ¨re fois que jâ€™ai â€œgit pullâ€ le code source de Gatsby.js, jâ€™ai extrait lâ€™historique complet\ndâ€™environ 90 paquets. Le projet avait ~5 ans et 3000 contributeurs. Je vous laisse imaginer ma tÃªte\nquand jâ€™ai ouvert tout Ã§a dans mon IDE. Jâ€™Ã©tais complÃ¨tement dÃ©passÃ©. La quantitÃ© de code Ã©tait\njuste Ã©norme!"),"\n",s.createElement(n.p,null,"Si vous travaillez avec 10% dâ€™une base de code, vous ne vous souciez probablement pas des 90%\nrestants."),"\n",s.createElement(n.h2,{id:"conclusion",style:{position:"relative"}},s.createElement(n.a,{href:"#conclusion","aria-label":"conclusion permalink",className:"anchor before"},s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Conclusion"),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 53.37837837837838%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAADD0lEQVR42j2Sa0iTYRTHT04t0AxcSVRIpeiHbCqppIZmCi5Nmulr5H06d9McSqS5RLxMR2omiDoFb/M603ldLi0LyTK8hBQpQV7DC27lTOcFPfHO5fPl/Dnnd855nvMcGLpq4QMARuYAZgBgCgBn4FCfBAATEwALUjfYUgO6rlCdAcCYehg7BYcx0/8sAFwEZDBvz7BlFeOxVS3Lsc35AACbMTLBtKBHtsLvapoKfH6LTP5CAzsMygrRphfVY6GwdZPV+FDHcqsLsfhxM6aVVwhtmDcAWZ+uTwoaD5LyivEvVz6HnoOG+7EdipflUzgtGsXdwEqO/saAIWNMVNBxfoCK2vhqBR2kFzBHvPxrEnA1l7fT51gdBBjR7qrhtB2oUntxO6p1liAIylZMa6/q6TvcSR7ABaKcfVSQpYzeKyjCBdETXGVL+70tQy9vpVQvLxYLcCWpdLvdI+seYMbMiY2EDh9MfeOnimhwJRPVkY00zOz3R4Hct9Y90RIAzgLAccztp66zF/wxCenvI0s8nN3sHebjXnsiH/0wZeGm97lLNoDsfsul6AbJLK+p5ndUs4gsuMFsiV8Lk9ZpopprxhnFngBABQDKJjHgoslOlu5KwqVaVn2cmxNh+5OTX7onvVu1l55bIrTiuQEy2l3H0pUHiSMzuM7r1M1wK6ZNkX0tDAf8snE3Vs7R/yJgyGcm9vjij1fmqOZXvvUye2aFIvHi3ATgUjZ3u8+JnCFD5vL1Uef+i7ZJXGM1zWEGYayObOrpYmTi5P0SXA6tjdOvCOyweiO1mWW4KBSjil+v5LqGW2wk1c0v5mTiUkKFttEjLRDY1l5WH4LFzG/MAp7CIz+AnJXcJ9XvO6+WO/GghJNCC3LU79rpPPdw++HoBs4ov5vXGVDmTrK9RGHoWIKSM8KujaKft6ORjQ1QRlBIsfLRi7k27Fugex7iMTg8BnpL0bF6/8YEPUs15MvRsfr8IxYlEiPSarodgjVyG5bON5hhiISMgnBUGEiNg4OGpP7TbstVt1rf0flHJUYkS0L/AMcxeaeD2iigAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/afd85baf1de6c79686485253b9fb6373/cbe2e/relevant-monorepo.webp 148w,\n/static/afd85baf1de6c79686485253b9fb6373/3084c/relevant-monorepo.webp 295w,\n/static/afd85baf1de6c79686485253b9fb6373/5ca24/relevant-monorepo.webp 590w,\n/static/afd85baf1de6c79686485253b9fb6373/dad35/relevant-monorepo.webp 885w,\n/static/afd85baf1de6c79686485253b9fb6373/2baf0/relevant-monorepo.webp 1180w,\n/static/afd85baf1de6c79686485253b9fb6373/c8acf/relevant-monorepo.webp 1930w"\n              sizes="(max-width: 590px) 100vw, 590px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/afd85baf1de6c79686485253b9fb6373/12f09/relevant-monorepo.png 148w,\n/static/afd85baf1de6c79686485253b9fb6373/e4a3f/relevant-monorepo.png 295w,\n/static/afd85baf1de6c79686485253b9fb6373/fcda8/relevant-monorepo.png 590w,\n/static/afd85baf1de6c79686485253b9fb6373/efc66/relevant-monorepo.png 885w,\n/static/afd85baf1de6c79686485253b9fb6373/c83ae/relevant-monorepo.png 1180w,\n/static/afd85baf1de6c79686485253b9fb6373/093ec/relevant-monorepo.png 1930w"\n            sizes="(max-width: 590px) 100vw, 590px"\n            type="image/png"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/afd85baf1de6c79686485253b9fb6373/fcda8/relevant-monorepo.png"\n            alt="un monorepo devient pertinent lorsque les packages sont connectÃ©s et Ã©crits dans le mÃªme langage"\n            title=""\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n    </span>'}}),"\n",s.createElement(n.p,null,"Dans lâ€™ensemble, je pense quâ€™utiliser un monorepo peut Ãªtre une bonne chose."),"\n",s.createElement(n.p,null,"Dans notre cas, cela nous facilite grandement la vie. Sur nos 40 packages, 35 sont des applications\nvue.js avec une structure et des dÃ©pendances trÃ¨s similaires. Et chaque application est une petite\npartie dâ€™une grande application. On a pas mis dans le mÃªme repo des apps qui nâ€™ont rien Ã  voir entre\nelles."),"\n",s.createElement(n.p,null,"De plus, on reste une Ã©quipe Ã  taille humaine. Donc les problÃ¨mes Ã©noncÃ©s plus hauts se fixent\nplutÃ´t rapidement."))}var r=function(e){void 0===e&&(e={});const{wrapper:n}=Object.assign({},(0,a.ah)(),e.components);return n?s.createElement(n,e,s.createElement(l,e)):l(e)},o=t(4222),i=t(418),c=t(4529),u=t(7953),p=t(4849),m=t(5536),d=t(2404);function g(e){let{data:n,pageContext:t,children:a,location:l}=e;const r=n.post,{previous:g,next:b}=t;return s.createElement(o.Z,{location:l},s.createElement(m.Z,{title:r.frontmatter.title,description:r.frontmatter.description||r.excerpt,cover:r.frontmatter.cover&&r.frontmatter.cover.publicURL,imageShare:r.frontmatter.imageShare&&r.frontmatter.imageShare.publicURL,lang:r.frontmatter.language,translations:r.frontmatter.translations,path:r.frontmatter.slug,isBlogPost:!0}),s.createElement(c.Z,{heroImg:r.frontmatter.cover,title:r.frontmatter.title}),s.createElement(i.Z,null,s.createElement(u.Z,{post:r},a)),s.createElement(i.Z,{as:"aside"},s.createElement(d.Z,{slug:r.frontmatter.slug,title:r.frontmatter.title,redditPostId:r.frontmatter.redditPostId})),s.createElement(p.Z,{previous:g,next:b}))}function b(e){return s.createElement(g,e,s.createElement(r,e))}}}]);
//# sourceMappingURL=component---src-templates-blog-post-js-content-file-path-content-posts-2020-2020-12-11-monorepo-pros-and-cons-index-fr-md-aac797bdf2853d51ca43.js.map