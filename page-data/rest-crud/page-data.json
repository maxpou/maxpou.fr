{"componentChunkName":"component---src-templates-blog-post-js","path":"/rest-crud","result":{"data":{"post":{"excerpt":"Bref rappel des méthodes HTTP Pour rappel, voici les principaux verbes HTTP que nous utilisons pour des architectures REST : GET : Accède à…","body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"layout\": \"post\",\n  \"title\": \"REST, CRUD et bonnes pratiques\",\n  \"description\": \"Guide de bonnes pratiques pour les API REST CRUD\",\n  \"date\": \"2015-09-15T00:00:00.000Z\",\n  \"slug\": \"rest-crud\",\n  \"tags\": [\"REST\", \"HTTP\"],\n  \"cover\": \"./abstract-5.jpg\",\n  \"generate-card\": false\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h2\", {\n    \"id\": \"bref-rappel-des-méthodes-http\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#bref-rappel-des-m%C3%A9thodes-http\",\n    \"aria-label\": \"bref rappel des méthodes http permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Bref rappel des m\\xE9thodes HTTP\"), mdx(\"p\", null, \"Pour rappel, voici les principaux verbes HTTP que nous utilisons pour des architectures REST :\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"GET : Acc\\xE8de \\xE0 une ressource\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"HEAD : Acc\\xE8de aux m\\xE9tadonn\\xE9es d\\u2019une ressource\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"POST : Ajoute une ressource\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"PUT : Met \\xE0 jour une ressource \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"compl\\xE8te\"), \" en la rempla\\xE7ant par une nouvelle version (99% des\\ncas).\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"PATCH : Met \\xE0 jour une partie d\\u2019une ressource en envoyant un diff\\xE9rentiel (une sorte de \\u2018git\\ndiff\\u2019)\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"DELETE : Supprime une ressource\")), mdx(\"h2\", {\n    \"id\": \"méthodes-safes-sûres-et-idempotents-idempotentes\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#m%C3%A9thodes-safes-s%C3%BBres-et-idempotents-idempotentes\",\n    \"aria-label\": \"méthodes safes sûres et idempotents idempotentes permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"M\\xE9thodes safes (s\\xFBres) et idempotents (idempotentes)\"), mdx(\"p\", null, \"La \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"http://tools.ietf.org/html/rfc7231#section-4.2\"\n  }, \"RFC7231\"), \" (rempla\\xE7ante de la RFC2616) a ajout\\xE9\\ndeux notions aux m\\xE9thodes HTTP :\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Les m\\xE9thodes dites \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"safes\"), \" ne modifient pas les donn\\xE9es sur le serveur. Peu importe le nombre de\\nfois qu\\u2019elles sont appel\\xE9es.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Les m\\xE9thodes \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"idempotents\"), \" quant \\xE0 elles \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"peuvent\"), \" modifier les donn\\xE9es lors du premier appel.\\nLors des appels suivants, la r\\xE9ponse sera tout le temps identique. En cas de panne/probl\\xE8me\\nr\\xE9seau, vous pourrez donc lancer la requ\\xEAte sans craintes puisque le comportement est le m\\xEAme que\\nvous ex\\xE9cutiez la requ\\xEAte une ou plusieurs fois.\")), mdx(\"p\", null, \"M\\xE9thode | Safe | Idempotente GET | Oui | Oui HEAD | Oui | Oui POST | Non | Non PUT | Non | Oui PATCH\\n| Non | Non DELETE | Non | Oui\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Focus sur le DELETE :\"), \" On serait tent\\xE9 de dire que DELETE n\\u2019est pas idempotent car on ne peut pas\\nsupprimer deux fois le m\\xEAme objet. Ceci \\xE9tant, si l\\u2019on regarde la RFC, DELETE doit bien retourner un\\ncode 200 (Success) en cas de r\\xE9ussite et non pas un 204 (No Content). Si l\\u2019API n\\u2019a pas \\xE9t\\xE9 bien\\ncon\\xE7ue et qu\\u2019elle renvoie un 404 (Not Found), alors le DELETE ne sera plus idempotent comme elle\\ndevrait l\\u2019\\xEAtre.\"), mdx(\"h2\", {\n    \"id\": \"cachabilité\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#cachabilit%C3%A9\",\n    \"aria-label\": \"cachabilité permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Cachabilit\\xE9\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"\\u201CLa requ\\xEAte la plus performante est celle que l\\u2019on a pas \\xE0 faire !\\u201D\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"\\u2014 \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Un inconnu\"))), mdx(\"p\", null, \"La mise en cache est l\\u2019une des contraintes les plus importantes des architectures web. En effet,\\nelle permet de :\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"d\\xE9charger votre serveur en lui \\xE9vitant de refaire la m\\xEAme chose deux fois,\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"r\\xE9duire le temps de traitement d\\u2019une requ\\xEAte,\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u2026et donc de renvoyer plus rapidement l\\u2019information au client.\")), mdx(\"p\", null, \"Les m\\xE9thodes dites \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"safes\"), \" sont donc \\xE0 mettre en cache !\"), mdx(\"h2\", {\n    \"id\": \"bonnesmauvaises-pratiques\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#bonnesmauvaises-pratiques\",\n    \"aria-label\": \"bonnesmauvaises pratiques permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Bonnes/mauvaises pratiques\"), mdx(\"p\", null, \"Il y a malheureusement, trop d\\u2019API con\\xE7ue comme ceci :\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"text\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"className\": \"language-text\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-text\"\n  }, \"POST api.mon-application.org/utilisateurs/rechercher\\nPOST api.mon-application.org/utilisateurs/42/supprimer\\nPOST api.mon-application.org/utilisateurs/42/modifier\\nGET api.mon-application.org/utilisateurs/supprimer?id=42\\nGET api.mon-application.org/utilisateurs/42?action=supprimer\\nGET api.mon-application.org/utilisateurs/42?action=envoyerMailConfirmation\\n...\"))), mdx(\"p\", null, \"Ce sont de mauvaises pratiques li\\xE9es \\xE0 une mauvaise compr\\xE9hension des verbes HTTP. Quand il y a un\\nnom d\\u2019action CRUD dans l\\u2019URI c\\u2019est qu\\u2019il y a un probl\\xE8me. De plus, dans la partie pr\\xE9c\\xE9dente, je\\nparle de cachabilit\\xE9. Si vous faites une recherche avec POST, le serveur n\\u2019utilisera pas le cache\\u2026\\nmais il le mettra peut-\\xEAtre \\xE0 jour (pour d\\u2019\\xE9ventuels GET \\xE0 venir qui ne viendront jamais).\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"Si vous utilisez un POST au lieu d\\u2019un PUT (ou autre m\\xE9thode idempotent) et que par m\\xE9garde, vous\\nex\\xE9cutez cet appel plusieurs fois, il peut y avoir des effets de bords non d\\xE9sir\\xE9s.\"), mdx(\"h2\", {\n    \"id\": \"création-post-vs-put\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#cr%C3%A9ation-post-vs-put\",\n    \"aria-label\": \"création post vs put permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Cr\\xE9ation POST vs. PUT\"), mdx(\"p\", null, \"Lors d\\u2019une cr\\xE9ation de ressource, il y a deux cas de figure : le serveur a la main sur la g\\xE9n\\xE9ration\\nde l\\u2019id (ou du nom de la ressource) ou bien le cas contraire. Dans le premier cas, il faut\\nprivil\\xE9gier le POST et dans l\\u2019autre le PUT. En d\\u2019autres termes, n\\u2019utilisez PUT pour la cr\\xE9ation\\nuniquement si c\\u2019est au client connait l\\u2019URI de la ressource \\xE0 cr\\xE9er.\"), mdx(\"p\", null, \"Exemple avec les ressources subordonn\\xE9es.\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"js\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"className\": \"language-js\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"id\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"42\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"name\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"calzone\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"price\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"$12\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"ingredients\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"[\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"id\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"4\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"name\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"tomato sauce\\\"\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"id\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"8\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"name\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"ham\\\"\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"id\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"15\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"name\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"egg\\\"\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"id\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"16\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"name\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"basil leaves\\\"\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"...\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"]\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\")))), mdx(\"p\", null, \"Nous avons une ressource comme celle ci-dessus et que nous voulons ajouter un ingr\\xE9dient. Il\\npourrait-\\xEAtre tentant de faire un PUT sur la ressource enti\\xE8re. Pourtant un ingr\\xE9dient est\\u2026 aussi\\nune ressource ! Il faudra donc faire :\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"text\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"className\": \"language-text\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-text\"\n  }, \"PUT http://api.example.com/pizzas/calzone/ingredients/<idIngredient>\"))), mdx(\"p\", null, \"En effet, ici POST pas possible car un ingr\\xE9dient peut se retrouver dans plusieurs pizzas. Dans le\\ncas contraire, un POST aurait \\xE9t\\xE9 utilis\\xE9 comme ceci :\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"text\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"className\": \"language-text\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-text\"\n  }, \"POST http://api.example.com/pizzas/calzone/ingredients/\"))), mdx(\"h2\", {\n    \"id\": \"le-cas-des-modifications-partielles\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#le-cas-des-modifications-partielles\",\n    \"aria-label\": \"le cas des modifications partielles permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Le cas des modifications partielles\"), mdx(\"p\", null, \"Si on regarde le panel de m\\xE9thodes HTTP, on voit qu\\u2019il y a deux m\\xE9thodes pour modifier une ressource\\n: PUT et PATCH. Si vous vous souvenez bien GET requi\\xE8re une ressource enti\\xE8re et PATCH effectue un\\ndiff\\xE9rentiel (avec les anciennes donn\\xE9es). Donc dans les deux cas vous \\xEAtes oblig\\xE9s de faire un GET\\navant.\"), mdx(\"p\", null, \"L\\xE0, je vous vois venir :\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"\\u201COn a qu\\u2019\\xE0 faire un PUT partiel et puis c\\u2019est tout !\\u201D\")), mdx(\"p\", null, \"Et bien non ! Comme le dit si bien le papa de REST, un PUT partiel n\\u2019est pas compatible avec une API\\nRESTful. Par extension, il en va de m\\xEAme pour le POST partiel.\"), mdx(\"blockquote\", {\n    className: \"twitter-tweet\",\n    lang: \"fr\"\n  }, mdx(\"p\", {\n    lang: \"en\",\n    dir: \"ltr\"\n  }, mdx(\"a\", {\n    href: \"https://twitter.com/mnot\"\n  }, \"@mnot\"), \" Oy, yes, PATCH was something I created for the initial HTTP/1.1 proposal because partial PUT is never RESTful. ;-)\"), \"\\u2014 Roy T. Fielding (@fielding) \", mdx(\"a\", {\n    href: \"https://twitter.com/fielding/status/275471320685367296\"\n  }, \"3 D\\xE9cembre 2012\")), mdx(\"script\", {\n    async: true,\n    src: \"//platform.twitter.com/widgets.js\",\n    charSet: \"utf-8\"\n  }), mdx(\"p\", null, \"Bref, c\\u2019est toujours le m\\xEAme probl\\xE8me qui revient : \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Th\\xE9orie Vs. Pragmatisme\"), \" :\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Soit vous collez \\xE0 fond \\xE0 la spec HTTP pour avoir une vrai API REST et utilisez PATCH ;\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Soit vous oubliez avoir lu cet article et continuez d\\u2019utiliser un POST/PUT partiel. Mais votre API\\nne sera pas pleinement REST ;-)\")), mdx(\"h2\", {\n    \"id\": \"sortir-du-cadre-crud\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#sortir-du-cadre-crud\",\n    \"aria-label\": \"sortir du cadre crud permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Sortir du cadre CRUD\"), mdx(\"p\", null, \"M\\xEAme si ce n\\u2019est pas l\\u2019objet de cet article, je vais tout de m\\xEAme en parler un peu, car\\ncontrairement \\xE0 ce que certains pensent, il est possible de sortir du cadre CRUD avec une API REST.\\nVous devrez alors utiliser la m\\xE9thode POST, et ainsi profiter du caract\\xE8re unsafe/non-idempotent de\\ncette derni\\xE8re. Utiliser POST vous prot\\xE8ge d\\u2019effets de bord \\xE9voqu\\xE9s pr\\xE9c\\xE9demment (ex : retirer deux\\nfois l\\u2019argent sur le compte d\\u2019un client, double envoi de mail, \\u2026).\"), mdx(\"p\", null, \"Exemple : \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"POST api.mon-application.org/utilisateurs/42/envoyer-mail-confirmation\")), mdx(\"p\", null, \"N\\u2019oubliez pas que c\\u2019est un \\xE9change entre le client et le serveur. Par cons\\xE9quent, il doit y avoir\\nune r\\xE9ponse. R\\xE9ponse qui se mat\\xE9rialise dans le cas pr\\xE9sent par des\\n\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"http://www.restapitutorial.com/httpstatuscodes.html\"\n  }, \"codes\"), \". Dans le cas pr\\xE9sent, il faudra\\nrenvoyer un \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"204 No Content\"), \".\"), mdx(\"h2\", {\n    \"id\": \"sources\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#sources\",\n    \"aria-label\": \"sources permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Sources\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Si vous voulez en savoir plus sur l\\u2019utilisation de PATCH, je vous recommande cet article :\\n\", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://williamdurand.fr/2014/02/14/please-do-not-patch-like-an-idiot/\"\n  }, \"blog de William DURAND - Please do not PATCH like an idiot\"), \"\\nd\\xE9di\\xE9 \\xE0 ce sujet.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"J\\u2019ai r\\xE9cement d\\xE9couvert cet ouvrage :\\n\", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"http://shop.oreilly.com/product/0636920021575.do\"\n  }, \"REST API Design Rulebook (Mark Masse)\"), \". C\\u2019est\\nune v\\xE9ritable mine d\\u2019or. Si vous vous posez des questions du type : quel code HTTP retourner ?\\nQuelle forme d\\u2019URL est la plus judicieuse ? Ai-je le droit de faire xxx ? \\u2026 ce livre est fait\\npour vous !\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Enfin, le \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"http://restcookbook.com\"\n  }, \"restcookbook\"), \" et l\\u2019article de\\n\", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"http://jasonsirota.com/rest-partial-updates-use-post-put-or-patch\"\n  }, \"Jason Sirota : REST Partial Updates: Use POST, PUT or PATCH?\"), \"\\nm\\u2019ont beaucoup aid\\xE9.\")));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"title":"REST, CRUD et bonnes pratiques","date":"2015-09-15T00:00:00.000Z","slug":"rest-crud","language":null,"tags":["REST","HTTP"],"cover":{"publicURL":"/static/eec960b0c4fdc35fe78d195d1d7b8287/abstract-5.jpg","childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#c8a8d8","images":{"fallback":{"src":"/static/eec960b0c4fdc35fe78d195d1d7b8287/ff179/abstract-5.jpg","srcSet":"/static/eec960b0c4fdc35fe78d195d1d7b8287/c77c3/abstract-5.jpg 284w,\n/static/eec960b0c4fdc35fe78d195d1d7b8287/97508/abstract-5.jpg 568w,\n/static/eec960b0c4fdc35fe78d195d1d7b8287/ff179/abstract-5.jpg 1136w","sizes":"(min-width: 1136px) 1136px, 100vw"},"sources":[{"srcSet":"/static/eec960b0c4fdc35fe78d195d1d7b8287/be6c4/abstract-5.webp 284w,\n/static/eec960b0c4fdc35fe78d195d1d7b8287/331df/abstract-5.webp 568w,\n/static/eec960b0c4fdc35fe78d195d1d7b8287/a3622/abstract-5.webp 1136w","type":"image/webp","sizes":"(min-width: 1136px) 1136px, 100vw"}]},"width":1136,"height":640}}},"imageShare":null,"translations":null,"redditPostId":null}}},"pageContext":{"slug":"rest-crud","previous":{"fileAbsolutePath":"/home/runner/work/maxpou.fr/maxpou.fr/content/posts/2021/2021-05-27-vue-js-module-architecture/index.mdx","frontmatter":{"title":"Vue.js: Let's Scale!","slug":"vue-js-module-architecture","tags":["Vue.js"],"language":"en","featured":true,"cover":{"publicURL":"/static/0efc7f7b0b5eeea26232de8583ee1aa7/cover.jpg","childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#084848","images":{"fallback":{"src":"/static/0efc7f7b0b5eeea26232de8583ee1aa7/a962d/cover.jpg","srcSet":"/static/0efc7f7b0b5eeea26232de8583ee1aa7/da65b/cover.jpg 160w,\n/static/0efc7f7b0b5eeea26232de8583ee1aa7/f6fcd/cover.jpg 320w,\n/static/0efc7f7b0b5eeea26232de8583ee1aa7/a962d/cover.jpg 640w,\n/static/0efc7f7b0b5eeea26232de8583ee1aa7/f3dc5/cover.jpg 1280w","sizes":"(min-width: 640px) 640px, 100vw"},"sources":[{"srcSet":"/static/0efc7f7b0b5eeea26232de8583ee1aa7/405d4/cover.webp 160w,\n/static/0efc7f7b0b5eeea26232de8583ee1aa7/dde70/cover.webp 320w,\n/static/0efc7f7b0b5eeea26232de8583ee1aa7/18e38/cover.webp 640w,\n/static/0efc7f7b0b5eeea26232de8583ee1aa7/f121e/cover.webp 1280w","type":"image/webp","sizes":"(min-width: 640px) 640px, 100vw"}]},"width":640,"height":426}}},"unlisted":null},"timeToRead":5,"excerpt":"Just like React, Vue.js is a great tool to build web applications. In this article, I will share a\nproject I have been working on over the…"},"next":{"fileAbsolutePath":"/home/runner/work/maxpou.fr/maxpou.fr/content/posts/2019/2019-11-28-git-cheat-sheet/index.md","frontmatter":{"title":"Git: Cheat Sheet (advanced)","slug":"git-cheat-sheet","tags":["Git"],"language":"en","featured":true,"cover":{"publicURL":"/static/20c5da898a702c5828fba56bf688f49f/git-toolbox.png","childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#d8e8f8","images":{"fallback":{"src":"/static/20c5da898a702c5828fba56bf688f49f/f60b4/git-toolbox.png","srcSet":"/static/20c5da898a702c5828fba56bf688f49f/c325e/git-toolbox.png 160w,\n/static/20c5da898a702c5828fba56bf688f49f/3b9da/git-toolbox.png 320w,\n/static/20c5da898a702c5828fba56bf688f49f/f60b4/git-toolbox.png 640w","sizes":"(min-width: 640px) 640px, 100vw"},"sources":[{"srcSet":"/static/20c5da898a702c5828fba56bf688f49f/c5556/git-toolbox.webp 160w,\n/static/20c5da898a702c5828fba56bf688f49f/06b74/git-toolbox.webp 320w,\n/static/20c5da898a702c5828fba56bf688f49f/e076d/git-toolbox.webp 640w","type":"image/webp","sizes":"(min-width: 640px) 640px, 100vw"}]},"width":640,"height":270}}},"unlisted":null},"timeToRead":1,"excerpt":"If you find git confusing, I created this little cheat sheet! Please, note that I voluntarily\nskipped the basic commands like  git commit…"}}},"staticQueryHashes":["1956263691","2709979211"]}