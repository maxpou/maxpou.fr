"use strict";(self.webpackChunkmaxpou_fr=self.webpackChunkmaxpou_fr||[]).push([[2568],{1339:function(n,a,e){e.r(a),e.d(a,{default:function(){return g}});var s=e(1151),t=e(7294);function o(n){const a=Object.assign({p:"p",a:"a",em:"em",br:"br",h2:"h2",span:"span",strong:"strong",h3:"h3",blockquote:"blockquote",ul:"ul",li:"li",img:"img"},(0,s.ah)(),n.components);return t.createElement(t.Fragment,null,t.createElement(a.p,null,"Last month, I gave a talk about\n",t.createElement(a.a,{href:"https://slides.maxpou.fr/immutability-js/"},t.createElement(a.em,null,"Immutability for functional JavaScript")," in the DublinJS meetup (slides)"),".",t.createElement(a.br),"\n","I discovered Immutability almost 2 years ago in a French Meetup dedicated to Functional Programming\nbut I didn‚Äôt gave a try. 6 months later, after another talk, I decided to learn and understand this\nparadigm. It changed my way of writing code, mostly, when I started to adopt Immutability as a rule\nof thumb."),"\n",t.createElement(a.h2,{id:"immutability-kezako",style:{position:"relative"}},t.createElement(a.a,{href:"#immutability-kezako","aria-label":"immutability kezako permalink",className:"anchor before"},t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Immutability? Kezako?"),"\n",t.createElement(a.p,null,"If you follow the JavaScript trends, you probably heard about ",t.createElement(a.strong,null,"functional programming"),". It‚Äôs\ngetting popular since the ES2015 version of JavaScript. Immutability is one pillar of this paradigm.\nThe notion behind is very simple: ",t.createElement(a.em,null,"‚ÄúForget about variables, everything is a constant‚Äù"),". You‚Äôre\nmanipulating a list of users? Put them into a constant. You want to add an users? The list must be\nanother structure."),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> heroName <span class="token operator">=</span> <span class="token string">\'Logan\'</span>\nheroName <span class="token operator">=</span> <span class="token string">\'Groot\'</span> <span class="token comment">// üö´ Unauthorized!</span></code></pre></div>'}}),"\n",t.createElement(a.h2,{id:"why-immutability-is-important",style:{position:"relative"}},t.createElement(a.a,{href:"#why-immutability-is-important","aria-label":"why immutability is important permalink",className:"anchor before"},t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Why Immutability is important?"),"\n",t.createElement(a.h3,{id:"unwanted-mutations",style:{position:"relative"}},t.createElement(a.a,{href:"#unwanted-mutations","aria-label":"unwanted mutations permalink",className:"anchor before"},t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Unwanted mutations"),"\n",t.createElement(a.p,null,"Let‚Äôs take our first example with Moment. Moment is a really nice library to manage your date in JS.\nThe first time I was using it, I fall into a classic trap: an unwanted mutation.:"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> today <span class="token operator">=</span> <span class="token function">moment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token keyword">const</span> nextYear <span class="token operator">=</span> today<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">\'years\'</span><span class="token punctuation">)</span>\n\ntoday <span class="token operator">===</span> nextYear <span class="token comment">// true</span></code></pre></div>'}}),"\n",t.createElement(a.p,null,"By mistake -and because I didn‚Äôt read the full documentation :) - I changed the value of today (see\nlast line)."),"\n",t.createElement(a.h3,{id:"mutables-variables-give-you-headache",style:{position:"relative"}},t.createElement(a.a,{href:"#mutables-variables-give-you-headache","aria-label":"mutables variables give you headache permalink",className:"anchor before"},t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Mutables variables give you headache"),"\n",t.createElement(a.blockquote,null,"\n",t.createElement(a.p,null,"Mutable state is the new spaghetti code",t.createElement(a.br),"\n","‚Äî ",t.createElement(a.strong,null,"Rich Hickey, author of Clojure")),"\n"),"\n",t.createElement(a.p,null,"Given a function ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">hulkify()</code>'}})," in a Hero class like the following one."),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">Hero</span> <span class="token punctuation">{</span>\n  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">\'beige\'</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>strengh <span class="token operator">=</span> <span class="token number">1</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">hulkify</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">\'green\'</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>strengh <span class="token operator">=</span> <span class="token number">1000</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code></pre></div>'}}),"\n",t.createElement(a.p,null,"and a code like this:"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> bruceBanner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hero</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token comment">// ... do something ...</span>\nbruceBanner<span class="token punctuation">.</span><span class="token function">goToRestaurant</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token comment">// ... do something ...</span>\nbruceBanner<span class="token punctuation">.</span><span class="token function">hulkify</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// bring mutation</span>\n<span class="token comment">// ... do something ...</span>\nbruceBanner<span class="token punctuation">.</span><span class="token function">fight</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></div>'}}),"\n",t.createElement(a.p,null,"The previous examples bring severals problems:"),"\n",t.createElement(a.ul,null,"\n",t.createElement(a.li,null,"after mutation, the variable‚Äôs name and her associated values doesn‚Äôt match anymore. After\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">bruceBanner.hulkify()</code>'}}),", ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">bruceBanner</code>'}})," became Hulk. For a better readability/maintainability, it\ndeserves it own variable."),"\n",t.createElement(a.li,null,"what if I reorder the functions calls? Then, I will send Hulk in a restaurant and the Human\nversion of Bruce Banner in a fight‚Ä¶"),"\n"),"\n",t.createElement(a.p,null,"If data have some mutations, you have to keep in mind the mutation order."),"\n",t.createElement(a.h3,{id:"time-traveling",style:{position:"relative"}},t.createElement(a.a,{href:"#time-traveling","aria-label":"time traveling permalink",className:"anchor before"},t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Time traveling"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 57.432432432432435%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAQACBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHjLmViP//EABUQAQEAAAAAAAAAAAAAAAAAABAC/9oACAEBAAEFAmn/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAWEAEBAQAAAAAAAAAAAAAAAAAQAXH/2gAIAQEABj8CZj//xAAcEAABAwUAAAAAAAAAAAAAAAAAARAhEUFxkdH/2gAIAQEAAT8h4aK4IQCWb//aAAwDAQACAAMAAAAQCO//xAAWEQEBAQAAAAAAAAAAAAAAAAAAESH/2gAIAQMBAT8Q1H//xAAVEQEBAAAAAAAAAAAAAAAAAAARAP/aAAgBAgEBPxBZv//EAB0QAQADAAEFAAAAAAAAAAAAAAEAESExcZHB0fD/2gAIAQEAAT8QCqz55lgVeYk9WEVQXd6zRYOa4mZh2n//2Q==\'); background-size: cover; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/5d3e1cb1015730436c243ab627201c46/cbe2e/back-to-the-future.webp 148w,\n/static/5d3e1cb1015730436c243ab627201c46/3084c/back-to-the-future.webp 295w,\n/static/5d3e1cb1015730436c243ab627201c46/5ca24/back-to-the-future.webp 590w,\n/static/5d3e1cb1015730436c243ab627201c46/cf77e/back-to-the-future.webp 620w"\n              sizes="(max-width: 590px) 100vw, 590px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/5d3e1cb1015730436c243ab627201c46/a80bd/back-to-the-future.jpg 148w,\n/static/5d3e1cb1015730436c243ab627201c46/1c91a/back-to-the-future.jpg 295w,\n/static/5d3e1cb1015730436c243ab627201c46/1c72d/back-to-the-future.jpg 590w,\n/static/5d3e1cb1015730436c243ab627201c46/935bc/back-to-the-future.jpg 620w"\n            sizes="(max-width: 590px) 100vw, 590px"\n            type="image/jpeg"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/5d3e1cb1015730436c243ab627201c46/1c72d/back-to-the-future.jpg"\n            alt="Back to the future"\n            title=""\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n    </span>'}}),"\n",t.createElement(a.p,null,"There is a really nice pattern called CQRS ",t.createElement(a.em,null,"(Command Query Responsibility Segregation)"),". The\nstarting point is the following: editing something may be harmful. Because mutation hide change. So\nthis pattern consist in removing any update/delete statement only create. If you take a look, that\nexactly how Git works. If you delete some code, you can retrieve it later."),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> heroPet<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">\'cat\'</span>\nhero<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span>heroPet<span class="token punctuation">[</span>heroPet<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>\n<span class="token comment">// later</span>\n<span class="token keyword">const</span> heroPet<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">\'dragon\'</span>\nhero<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span>heroPet<span class="token punctuation">[</span>heroPet<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span></code></pre></div>'}}),"\n",t.createElement(a.p,null,"This approach will allow the hero to play with his previous pet, even if he change it!"),"\n",t.createElement(a.h3,{id:"thread-safety",style:{position:"relative"}},t.createElement(a.a,{href:"#thread-safety","aria-label":"thread safety permalink",className:"anchor before"},t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Thread safety?"),"\n",t.createElement(a.p,null,"One last advantage for moving into immutable object is the¬†Thread safety. On a multi-threaded\napplication, two threads can manipulate 2 different versions of one data structure. However,\nJavaScript is concurrent by default, so we‚Äôre not really impacted by this aspect (I didn‚Äôt try with\n",t.createElement(a.a,{href:"https://parallel.js.org/"},"parallel.js"),")."),"\n",t.createElement(a.h2,{id:"pitfalls--misconceptions",style:{position:"relative"}},t.createElement(a.a,{href:"#pitfalls--misconceptions","aria-label":"pitfalls  misconceptions permalink",className:"anchor before"},t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Pitfalls & Misconceptions"),"\n",t.createElement(a.h3,{id:"code-classlanguage-textconstcode-is-not-about-immutability",style:{position:"relative"}},t.createElement(a.a,{href:"#code-classlanguage-textconstcode-is-not-about-immutability","aria-label":"code classlanguage textconstcode is not about immutability permalink",className:"anchor before"},t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">const</code>'}})," is not about immutability"),"\n",t.createElement(a.p,null,"ES2015 came with a new nice keyword: ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">const</code>'}}),"."),"\n",t.createElement(a.blockquote,null,"\n",t.createElement(a.p,null,"Constants are block-scoped, much like variables defined using the let statement. The value of a\nconstant cannot change through re-assignment, and it can‚Äôt be redeclared.",t.createElement(a.br),"\n","‚Äî ",t.createElement(a.strong,null,t.createElement(a.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const"},"MDN"))),"\n"),"\n",t.createElement(a.p,null,"It means, once a constant is declared, you cannot change it."),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> meaningOfLife <span class="token operator">=</span> <span class="token number">42</span>\nmeaningOfLife <span class="token operator">=</span> <span class="token string">\'boom\'</span> <span class="token comment">// Uncaught TypeError: Assignment to constant variable</span></code></pre></div>'}}),"\n",t.createElement(a.p,null,"Then came a big confusion on the internets. People start to think that ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">const</code>'}})," was made for\nimmutable structures. In fact ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">const</code>'}})," only create an immutable binding between the identifier and\nthe value. If you assign an object as a value, you‚Äôre free to change this object."),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> hero <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">\'Batman\'</span>\n<span class="token punctuation">}</span>\n\nhero<span class="token punctuation">.</span>name<span class="token operator">:</span> <span class="token string">\'Daredevil\'</span>\n\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>hero<span class="token punctuation">)</span> <span class="token comment">// Object {name: "Daredevil"}</span></code></pre></div>'}}),"\n",t.createElement(a.p,null,"The object signature is still the same, only his parameters change. But it‚Äôs not an excuse for not\nusing it!"),"\n",t.createElement(a.h3,{id:"mutable-states-inside-code-classlanguage-textmapcode",style:{position:"relative"}},t.createElement(a.a,{href:"#mutable-states-inside-code-classlanguage-textmapcode","aria-label":"mutable states inside code classlanguage textmapcode permalink",className:"anchor before"},t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"mutable states inside ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">map()</code>'}})),"\n",t.createElement(a.p,null,"To loop an array, ",t.createElement(a.a,{href:"https://www.maxpou.fr/no-more-loop-in-js/"},"forget about for/while loop")," and start\nusing Array.prototype.map(). Array.prototype.forEach() is a sibling to map() but it create side\neffect, while map prevent them by creating a new structure. Now, map() looks cool right? I can do\nsome operations with my objects in a Array.map() loop, and it will preserve my initial values?\nWell‚Ä¶ not exactly!"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> newHeroes <span class="token operator">=</span> heroes<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">h</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  h<span class="token punctuation">.</span>name <span class="token operator">=</span> h<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n  <span class="token keyword">return</span> h\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n\nconsole<span class="token punctuation">.</span><span class="token function">table</span><span class="token punctuation">(</span>newHeroes<span class="token punctuation">)</span> <span class="token comment">// newHeroes now contains name in uppercase üëç</span>\nconsole<span class="token punctuation">.</span><span class="token function">table</span><span class="token punctuation">(</span>heroes<span class="token punctuation">)</span> <span class="token comment">// heroes now contains name in uppercase üëé</span></code></pre></div>'}}),"\n",t.createElement(a.p,null,"As expected, I created a new structure of heroes with a toString property.",t.createElement(a.br),"\n","But JavaScript always pass variables by value‚Ä¶ except when this variable refer to an object. And\nalmost everything is an object in JS! In the map() loop, ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">h</code>'}})," refer to a hero reference. That why the\nheroes are updated!"),"\n",t.createElement(a.img,{src:"/197a0c5aa96302b99b8c1d1178d8a86a/pass-by-reference-vs-pass-by-value-animation.gif",alt:"pass by reference vs pass by value animation"}),"\n",t.createElement(a.h2,{id:"solutions",style:{position:"relative"}},t.createElement(a.a,{href:"#solutions","aria-label":"solutions permalink",className:"anchor before"},t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Solutions"),"\n",t.createElement(a.p,null,"Hopefully, JavaScript offer severals quick wins to deal with immutability. To keep everything\nconsistent, I‚Äôm gonna use the following structure for this functions:"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> hero <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">\'Daredevil\'</span><span class="token punctuation">,</span>\n  <span class="token literal-property property">location</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token literal-property property">city</span><span class="token operator">:</span> <span class="token string">\'New York\'</span><span class="token punctuation">,</span>\n    <span class="token literal-property property">district</span><span class="token operator">:</span> <span class="token string">\'Kitchen Hell\'</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span></code></pre></div>'}}),"\n",t.createElement(a.h3,{id:"objectfreeze-vs-objectseal-vs-objectassign-vs-object-spread-properties",style:{position:"relative"}},t.createElement(a.a,{href:"#objectfreeze-vs-objectseal-vs-objectassign-vs-object-spread-properties","aria-label":"objectfreeze vs objectseal vs objectassign vs object spread properties permalink",className:"anchor before"},t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Object.freeze() vs. Object.seal() vs. Object.assign() vs. Object Spread Properties"),"\n",t.createElement(a.ul,null,"\n",t.createElement(a.li,null,"\n",t.createElement(a.p,null,t.createElement(a.strong,null,t.createElement(a.a,{href:"https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze"},"Object.freeze()")),":\nfreeze the given object (only the first level)"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">Object<span class="token punctuation">.</span><span class="token function">freeze</span><span class="token punctuation">(</span>hero<span class="token punctuation">)</span>\n\nhero<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">\'Jessica Jones\'</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>hero<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">\'Jessica Jones\'</span><span class="token punctuation">)</span> <span class="token comment">// false (hero is unchanged)</span>\n\nhero<span class="token punctuation">.</span>location<span class="token punctuation">.</span>city <span class="token operator">=</span> <span class="token string">\'Dublin\'</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>hero<span class="token punctuation">.</span>location<span class="token punctuation">.</span>city <span class="token operator">===</span> <span class="token string">\'Dublin\'</span><span class="token punctuation">)</span> <span class="token comment">// true (hero.location has been changed)</span></code></pre></div>'}}),"\n"),"\n",t.createElement(a.li,null,"\n",t.createElement(a.p,null,t.createElement(a.strong,null,t.createElement(a.a,{href:"https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/seal"},"Object.seal()")),":\nprevent adding new properties to a given object"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">Object<span class="token punctuation">.</span><span class="token function">seal</span><span class="token punctuation">(</span>hero<span class="token punctuation">)</span>\n\nhero<span class="token punctuation">.</span>weapon <span class="token operator">=</span> <span class="token string">\'staff\'</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>hero<span class="token punctuation">.</span>weapon<span class="token punctuation">)</span> <span class="token comment">// undefined (hero is unchanged)</span>\n\nhero<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">\'Jessica Jones\'</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>hero<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">\'Jessica Jones\'</span><span class="token punctuation">)</span> <span class="token comment">// true (hero.name has been changed)</span></code></pre></div>'}}),"\n"),"\n",t.createElement(a.li,null,"\n",t.createElement(a.p,null,t.createElement(a.strong,null,t.createElement(a.a,{href:"https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign"},"Object.assign()")),":\ncreate copy of a given object"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> newHero <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> hero<span class="token punctuation">)</span>\n\nnewHero<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">\'Jessica Jones\'</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>hero<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">\'Jessica Jones\'</span><span class="token punctuation">)</span> <span class="token comment">// false (hero is unchanged)</span>\n\nnewHero<span class="token punctuation">.</span>location<span class="token punctuation">.</span>city <span class="token operator">=</span> <span class="token string">\'Dublin\'</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>hero<span class="token punctuation">.</span>location<span class="token punctuation">.</span>city <span class="token operator">===</span> <span class="token string">\'Dublin\'</span><span class="token punctuation">)</span> <span class="token comment">// true (hero.location has been changed)</span></code></pre></div>'}}),"\n"),"\n",t.createElement(a.li,null,"\n",t.createElement(a.p,null,t.createElement(a.strong,null,t.createElement(a.a,{href:"https://github.com/tc39/proposal-object-rest-spread"},"Object Spread Properties - Stage 3 (Draft)")),":\nan alternative to Object.assign() - currently in stage 3 (only available through compilers: Babel,\nTypeScript‚Ä¶)."),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> newHero <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token operator">...</span>hero<span class="token punctuation">,</span>\n  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">\'Jessica Jones\'</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>hero<span class="token punctuation">.</span>name <span class="token operator">===</span> newHero<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// false (hero is unchanged)</span>\n\nnewHero<span class="token punctuation">.</span>location<span class="token punctuation">.</span>district <span class="token operator">=</span> <span class="token string">\'Dublin\'</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>hero<span class="token punctuation">.</span>location<span class="token punctuation">.</span>city <span class="token operator">===</span> <span class="token string">\'Dublin\'</span><span class="token punctuation">)</span> <span class="token comment">// true (hero.location has been changed)</span></code></pre></div>'}}),"\n"),"\n"),"\n",t.createElement(a.p,null,"Whatever we use, we always face the same problem: we need a ",t.createElement(a.strong,null,"deep clone"),". Usually theses deep\nclone/copy methods use recursion."),"\n",t.createElement(a.h3,{id:"and-what-about-json",style:{position:"relative"}},t.createElement(a.a,{href:"#and-what-about-json","aria-label":"and what about json permalink",className:"anchor before"},t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"And what about JSON?"),"\n",t.createElement(a.p,null,"When we Google the following term: ",t.createElement(a.em,null,"Immutable + Javascript"),", some StackOverflow results redirects to\n",t.createElement(a.strong,null,"JSON.parse(JSON.stringify())"),". At first sight, it could be interesting because it solves all\nprevious problems."),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> hero <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">\'Daredevil\'</span><span class="token punctuation">,</span>\n  <span class="token literal-property property">location</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token literal-property property">city</span><span class="token operator">:</span> <span class="token string">\'New York\'</span><span class="token punctuation">,</span>\n    <span class="token literal-property property">district</span><span class="token operator">:</span> <span class="token string">\'Kitchen Hell\'</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">const</span> newHero <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>hero<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// "{"name":"Daredevil", {...}}"</span>\n\nnewHero<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">\'Jessica Jones\'</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>hero<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">\'Daredevil\'</span><span class="token punctuation">)</span> <span class="token comment">// true (hero in unchanged)</span>\n\nnewHero<span class="token punctuation">.</span>location<span class="token punctuation">.</span>city <span class="token operator">=</span> <span class="token string">\'Dublin\'</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>hero<span class="token punctuation">.</span>location<span class="token punctuation">.</span>city <span class="token operator">===</span> <span class="token string">\'Dublin\'</span><span class="token punctuation">)</span> <span class="token comment">// true (hero.location in unchanged)</span></code></pre></div>'}}),"\n",t.createElement(a.p,null,"üéâ Tadaaa!"),"\n",t.createElement(a.p,null,"Well‚Ä¶ I have a bad news: JSON for ",t.createElement(a.strong,null,"JavaScript")," Standard Object Notation* is a ",t.createElement(a.strong,null,"language\nagnostic format"),". Yes. Really!"),"\n",t.createElement(a.blockquote,null,"\n",t.createElement(a.p,null,"It does not attempt to impose ECMAScript‚Äôs internal data representations on other programming\nlanguages.",t.createElement(a.br),"\n","‚Äî\n",t.createElement(a.strong,null,t.createElement(a.a,{href:"http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf"},"Final draft of the TC39 ‚ÄúThe JSON Data Interchange Format‚Äù standard"))," >\n",t.createElement(a.em,null,"(look at the introduction)")),"\n"),"\n",t.createElement(a.p,null,"After, it‚Äôs makes sence. Ruby/Scala/Python/PHP/‚Ä¶ should not implement some Javascript\nspecificities such as Symbols, undefined‚Ä¶ or even the functions!"),"\n",t.createElement(a.p,null,t.createElement(a.strong,null,"How are handle non-stringifiable types?")),"\n",t.createElement(a.p,null,"They are simply removed."),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> hero <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">\'Daredevil\'</span><span class="token punctuation">,</span>\n  <span class="token literal-property property">birthdate</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">1989</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token function-variable function">sayHello</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token string">\'hello\'</span><span class="token punctuation">,</span>\n  <span class="token literal-property property">symbol</span><span class="token operator">:</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token literal-property property">banana</span><span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n<span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>hero<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// "{"name":"Daredevil", birthdate: "1989-05-10T23:00:00.000Z"}"</span></code></pre></div>'}}),"\n",t.createElement(a.p,null,t.createElement(a.strong,null,"How are handle circular references")),"\n",t.createElement(a.p,null,"Circular references simply generate errors."),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> daredevil <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token literal-property property">friends</span><span class="token operator">:</span> <span class="token punctuation">[</span>daredevil<span class="token punctuation">]</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>daredevil<span class="token punctuation">)</span><span class="token punctuation">)</span>\n<span class="token comment">// Uncaught TypeError: Converting circular structure to JSON</span></code></pre></div>'}}),"\n",t.createElement(a.p,null,"So for both of this reason, I would recommend to use this with an extreme precaution."),"\n",t.createElement(a.h2,{id:"persistent-data-structure",style:{position:"relative"}},t.createElement(a.a,{href:"#persistent-data-structure","aria-label":"persistent data structure permalink",className:"anchor before"},t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Persistent data structure"),"\n",t.createElement(a.p,null,"I now want to save the world against a big attack. Let‚Äôs grab my heroes. Yes, ALL of them!"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> heroes <span class="token operator">=</span> <span class="token punctuation">[</span>\n  ‚ãÆ\n  <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">\'Wolverine\'</span><span class="token punctuation">,</span> <span class="token literal-property property">isReady</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">/* ... others properties ... */</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">\'Deadpool\'</span><span class="token punctuation">,</span> <span class="token literal-property property">isReady</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>  <span class="token comment">/* ... others properties ... */</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">\'Magneto\'</span><span class="token punctuation">,</span> <span class="token literal-property property">isReady</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>   <span class="token comment">/* ... others properties ... */</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">\'Gandalf\'</span><span class="token punctuation">,</span> <span class="token literal-property property">isReady</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>    <span class="token comment">/* ... others properties ... */</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token function">‚ãÆ</span>\n  <span class="token punctuation">(</span><span class="token number">100</span> <span class="token number">000</span> heroes<span class="token punctuation">)</span>\n<span class="token punctuation">]</span></code></pre></div>'}}),"\n",t.createElement(a.p,null,"Oops, I need them to get ready."),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">heroes<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">hero</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> newHero <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> hero<span class="token punctuation">)</span>\n  newHero<span class="token punctuation">.</span>isReady <span class="token operator">=</span> <span class="token boolean">true</span>\n  <span class="token keyword">return</span> newHero\n<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>'}}),"\n",t.createElement(a.p,null,"To update just one field, I have to create 100 000 copies of my objects. And also, duplicate a lot\nof unchanged properties, including the Hero Gandalf which is already prepared‚Ä¶ We are going to\nface performances issues‚Ä¶ there is probably a better way to do it!"),"\n",t.createElement(a.p,null,"If you have this problem, it‚Äôs time to switch to libraries such as\n",t.createElement(a.a,{href:"https://facebook.github.io/immutable-js/"},"Immutable.js")," or\n",t.createElement(a.a,{href:"http://swannodette.github.io/mori/#title"},"Mori")))}var p=function(n){void 0===n&&(n={});const{wrapper:a}=Object.assign({},(0,s.ah)(),n.components);return a?t.createElement(a,n,t.createElement(o,n)):o(n)},c=e(4222),l=e(418),r=e(4529),i=e(7953),u=e(4849),m=e(5536),d=e(2404);function h(n){let{data:a,pageContext:e,children:s,location:o}=n;const p=a.post,{previous:h,next:g}=e;return t.createElement(c.Z,{location:o},t.createElement(m.Z,{title:p.frontmatter.title,description:p.frontmatter.description||p.excerpt,cover:p.frontmatter.cover&&p.frontmatter.cover.publicURL,imageShare:p.frontmatter.imageShare&&p.frontmatter.imageShare.publicURL,lang:p.frontmatter.language,translations:p.frontmatter.translations,path:p.frontmatter.slug,isBlogPost:!0}),t.createElement(r.Z,{heroImg:p.frontmatter.cover,title:p.frontmatter.title}),t.createElement(l.Z,null,t.createElement(i.Z,{post:p},s)),t.createElement(l.Z,{as:"aside"},t.createElement(d.Z,{slug:p.frontmatter.slug,title:p.frontmatter.title,redditPostId:p.frontmatter.redditPostId})),t.createElement(u.Z,{previous:h,next:g}))}function g(n){return t.createElement(h,n,t.createElement(p,n))}},7953:function(n,a,e){e.d(a,{Z:function(){return g}});var s=e(7294),t=e(5086),o=e(311),p=e(8385),c=e(8259),l=e(8032);const r=t.default.div.withConfig({displayName:"Bio__BioWrapper",componentId:"sc-1t07u8t-0"})(["& .author-image{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;position:absolute;top:-40px;left:50%;margin-left:-40px;width:80px;height:80px;border-radius:100%;overflow:hidden;padding:6px;z-index:2;box-shadow:#ececec 0 0 0 1px;background-color:var(--color-wrapperBackground);}& .author-image img{border-radius:100%;}& .author-profile .author-image{position:relative;left:auto;top:auto;width:120px;height:120px;padding:3px;margin:-100px auto 0 auto;box-shadow:none;}& .followMeWrapper{padding-top:10px;}"]),i=(0,t.default)(o.xv).withConfig({displayName:"Bio__BioText",componentId:"sc-1t07u8t-1"})(["& a{box-shadow:0 2px 0 0 var(--color-secondary);}& a:hover{filter:brightness(150%);box-shadow:none;}"]);var u=()=>{const{authorName:n,authorDescription:a}=(0,c.Z)();return s.createElement(r,null,s.createElement("figure",{className:"author-image"},s.createElement(l.S,{src:"../../content/images/avatar.jpeg",alt:n,__imageData:e(4663)})),s.createElement("section",null,s.createElement("h2",null,"About the author"),s.createElement(i,{dangerouslySetInnerHTML:{__html:a}}),s.createElement("div",{className:"followMeWrapper"},s.createElement(p.Z,null))))},m=e(8297);const d=t.default.article.withConfig({displayName:"Article__ArticleWrapper",componentId:"sc-15webty-0"})(["padding:0 30px 30px;@media only screen and (max-width:500px){padding:0;}"]),h=t.default.footer.withConfig({displayName:"Article__ArticleFooter",componentId:"sc-15webty-1"})(["position:relative;margin:6rem 0 0;padding:3rem 0 0;border-top:1px solid #ececec;"]);var g=function(n){let{post:a,children:e}=n;return s.createElement(d,null,s.createElement(m.Z,{date:a.frontmatter.date,tags:a.frontmatter.tags,translations:a.frontmatter.translations},e),s.createElement(h,null,s.createElement(u,null)))}},6476:function(n,a,e){e.d(a,{Z:function(){return p}});var s=e(7294),t=e(5086);const o=t.default.img.withConfig({displayName:"Flag__FlagImage",componentId:"sc-1ft2x4f-0"})(["padding-right:0.5rem;padding-bottom:0.2rem;"]);var p=function(n){let{language:a}=n;const e="en"===a?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAPASURBVDhPrZT7TxxVFMc/d/Y1wA60gEXwgSU1ViJiJSZqahpqm2jQNlRSHyhRa6wG2kTSpK3v2BptoyRorJi2IaLlF/qyoTU0sRAClDaKRqQ0qShElkJBdpd9z+7seGfQ+A9wkjvn3jnn3Pu93/PNFaY0lsiUf/2SmNATuqm4XYyPTRMOJ3C7nXbAMNLkF2STEw+RXAjjyvYSVDXmZhZwOBYx6HoKrWA5N4dmEZoXMflFi1m4YT2B4jtp2ncKny9IVpZKPK5TXfswlROXmb84RO5DFXQXP8CpYwOoqptoTOeWu4p4uUQn9/pfOJ7dgjJcupZIbz/qd8fZv7+aqk33EgpF5bkmQsivIqwZpviPWpNQIsnjm8p5S7tGocckZ8d2Bn6ZRLnUe5U9v+cSy9QI7H2Xmur7adxbJRHOEgrrSAikg0GIxQlHdK4vJNi5tZSNF9pQn6jC/WQV9fXfcrFvDCUm4fZ3DbPxkxEGVz2C75k6ykWAr1q3k6llkAyESM3NkwyG8OZnc2BdFsUnW1nW/CndvjQVFR/QNzBBTKJlzh8wdcM0o3raDOiWUEzTiEQWJ9Imd71njq5Zb3vbov/H/OGEXWfVW/uI0Z17TPObE5DhwVKcrTqLq/QiR44cDeGRsUQCQ6ITiiJzFhMVyafFq4SFeOEpFKtG98trzAdJ+YMYATmkTwcX7JGamSXpm7K9tTb8AdIyx47JPKvOqk/LzcVky1Ezs6cP0+0mlTSIRHWE1J1wyWEYhAd/InVjDueKfLwPVmDEJQrVIxEpqMLA5XJYgiNWuRZx4tzP5pU/YkQjCQqLNHY8Lwtm5zC+78JdV8vE1m3Mdxwnt6aG4o6j9tXDXd14VAfHnKu52j+CV+qytCQDh4uy95sPHGFqPETrkTpibe0kG17jHXMNpy/N8ljoCoHh31hx3z00/qhwvvMymxs246t/g1u7z/LZjTy+bjqMW3hQIpEYr7xey9i1j1l4cRuJM508V9ZIU8sZ8papiLSFRfIhuc3P1/i8uZ11lQe5/exJbpOkn5s4xJu7X0J3ulD2HXyaw4dqmVp5N9Ml5awaKaWz7bzcIFMOgWIRS8r2dpvJprfnV8nVq/y5YQvZPT/Q0L6btx/NQ8mYGmew4A4u7PqQso+GiYyNoWkSkXBgJPxMy3q/c7ntrbX1X5NiVpQUqwtr+bJjiKzRIcyZScTfwYDpTybxJBPkZMkOWofbJuQrEifqVFFk99Kyi5mpOF6vKmOLGrTABoOyefEkNxUVSipsBS6NLeHjCP8AHa/ubr0bcvgAAAAASUVORK5CYII=":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAKnRFWHRDcmVhdGlvbiBUaW1lAEZyIDkgTm92IDIwMDcgMTY6Mjc6MDYgKzAxMDAM3ZqdAAAAB3RJTUUH1wsJDxwzm8yD2gAAAAlwSFlzAAALEgAACxIB0t1+/AAAAARnQU1BAACxjwv8YQUAAAHdSURBVHjaxVO7btRAFD3zsNdxQIqQqBYk6ghR0tLxDXwCn8HX0BGlo6JCKAqCIlVCkCjQLgkgxbDB67XnlXPHRvsJGWs04/F53ZkxcNtNvXj5arG7uzf3KfJNIUSFh/dn2H9Qc564pABj0Z98hPt6CsVHyzoCrv6tl/bO3Xvzx0+fw0cveugp8ORRjWf7e1lAmi5naKuAHh2QSI4RpQbeHBzOrSfIBQ/vAzWRE8jcDQNCQk4g3TtinMtkEUHfIaxW0OIqa55rMTEYu3xXWm/r1AYZ5AYolqoJ6D4dU1jDCjFkMrskoFukKG2ys56EFEkyC38abE4+w1z/heU3K0Q/OUchp0zNxCCuU+sX37F69xZYt9CmQDHKUYDwQMPIONpo9A5o2gH9ZoPBjwKm5h78/glcs+ayylQtpyOjQFLS2fnovMHrDz9wftEixTACJKY1HFUmZbIk5GM4WkWyI/bg+AJD0CjKAmVhMlFPpchmaWUm4v8+HrElAu/Pmnz+RWmReGmU2QoYmRsRQHYdE2CbYMOaF51HOWNt1iJSoODFqeSd9YlAUe2g4+gVpjI0ZmoUspe/Lpfdqpk7cWH0QN0zVeOwqxnSjJtYVWi/fEO/DlDWZ2chX4W0vO1/EbgBHTnbxGOMU+UAAAAASUVORK5CYII=",t="en"===a?"english post":"post en francais";return s.createElement(o,{src:e,alt:t,className:"flag"})}},8385:function(n,a,e){var s=e(7294),t=e(5086),o=e(8259),p=e(5136);const c=t.default.a.withConfig({displayName:"FollowMe__TwitterButton",componentId:"sc-1w7ya39-0"})(["background-color:#1da1f2;border-color:#1da1f2;color:#fff;font-size:0.9rem;border-radius:3px;padding:10px 20px 10px 25px;font-weight:600;transition:background 0s;&:hover{background-color:#fff;color:#1da1f2;border:1px solid #1da1f2;}& > svg{transform:translateX(-50%) translateY(15%);}"]);a.Z=n=>{let{...a}=n;const{twitterUsername:e}=(0,o.Z)();return s.createElement(c,Object.assign({rel:"noopener",target:"_blank",href:"https://twitter.com/intent/follow?screen_name="+e},a),s.createElement(p.Z,null),"Follow @",e)}},4849:function(n,a,e){var s=e(7294),t=e(8032),o=e(1883),p=e(5086),c=e(8259),l=e(820),r=e(6476),i=e(311);const u=p.default.aside.withConfig({displayName:"PrevNextPost__PreviewContainer",componentId:"sc-qi508c-0"})(["display:flex;flex-wrap:wrap;align-items:center;justify-content:center;max-width:810px;margin:40px auto 0px;"]),m=(0,p.default)(o.Link).withConfig({displayName:"PrevNextPost__PreviewLink",componentId:"sc-qi508c-1"})(["height:100%;display:block;"]),d=p.default.article.withConfig({displayName:"PrevNextPost__Preview",componentId:"sc-qi508c-2"})(["cursor:pointer;flex:1 1 300px;align-self:stretch;background-color:var(--color-secondaryContentBackground);box-shadow:0 0 0 0,0 6px 12px rgba(0,0,0,0.1);margin:20px 20px;border-radius:5px;&:hover{box-shadow:0 0 0 0,0 6px 12px var(--color-grey300);transition:all 0.3s ease;transform:translate3D(0,-1px,0);}"]),h=p.default.div.withConfig({displayName:"PrevNextPost__PreviewCover",componentId:"sc-qi508c-3"})(["& > *{height:200px;border-radius:5px 5px 0 0;}"]),g=p.default.div.withConfig({displayName:"PrevNextPost__PreviewContent",componentId:"sc-qi508c-4"})(["padding:20px;height:calc(100% - 200px);flex-direction:column;flex-grow:inherit;justify-content:space-between;display:flex;header{padding:0 0 10px 0;}section{padding-bottom:10px;}footer{align-items:flex-end;font-size:0.8em;}"]);a.Z=n=>{const{previous:a,next:e}=n,o=[a,e].filter((n=>n)).map((n=>({node:n}))),{defaultLang:p}=(0,c.Z)();return s.createElement(s.Fragment,null,s.createElement(u,null,o.map(((n,a)=>{const{excerpt:e}=n.node,o=n.node.fields.timeToRead.text,{tags:c,cover:u,title:k,slug:b,language:A}=n.node.frontmatter,f=(0,t.c)(u);return s.createElement(d,{key:"prev-next-"+a},s.createElement(m,{to:"/"+b,"aria-label":"View "+k+" article"},s.createElement(h,null,s.createElement(t.G,{image:f,alt:"View "+k+" article"})),s.createElement(g,null,s.createElement("header",null,s.createElement("h2",null,p!==A&&s.createElement(r.Z,{language:A}),k)),s.createElement("section",null,s.createElement("p",null,e)),s.createElement("footer",null,s.createElement(i.OV,{min:o}),Array.isArray(c)&&s.createElement(s.Fragment,null,s.createElement(i.fU,null),s.createElement(l.Z,{tags:c,noLink:!0}))))))}))))}},5136:function(n,a,e){var s=e(7294);a.Z=n=>s.createElement("svg",Object.assign({"aria-label":"Twitter",viewBox:"0 0 24 24",width:"1em",height:"1em"},n),s.createElement("path",{fill:"currentColor",d:"M23.954 4.569a10 10 0 0 1-2.825.775 4.958 4.958 0 0 0 2.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 0 0-8.384 4.482C7.691 8.094 4.066 6.13 1.64 3.161a4.822 4.822 0 0 0-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 0 1-2.228-.616v.061a4.923 4.923 0 0 0 3.946 4.827 4.996 4.996 0 0 1-2.212.085 4.937 4.937 0 0 0 4.604 3.417 9.868 9.868 0 0 1-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 0 0 7.557 2.209c9.054 0 13.999-7.496 13.999-13.986 0-.209 0-.42-.015-.63a9.936 9.936 0 0 0 2.46-2.548l-.047-.02z"}))},4663:function(n){n.exports=JSON.parse('{"layout":"constrained","backgroundColor":"#080808","images":{"fallback":{"src":"/static/9760e642bf7a05b3ba35950d80435566/37851/avatar.jpg","srcSet":"/static/9760e642bf7a05b3ba35950d80435566/5b1fa/avatar.jpg 115w,\\n/static/9760e642bf7a05b3ba35950d80435566/f0f53/avatar.jpg 230w,\\n/static/9760e642bf7a05b3ba35950d80435566/37851/avatar.jpg 460w","sizes":"(min-width: 460px) 460px, 100vw"},"sources":[{"srcSet":"/static/9760e642bf7a05b3ba35950d80435566/f8466/avatar.webp 115w,\\n/static/9760e642bf7a05b3ba35950d80435566/84992/avatar.webp 230w,\\n/static/9760e642bf7a05b3ba35950d80435566/b5c5b/avatar.webp 460w","type":"image/webp","sizes":"(min-width: 460px) 460px, 100vw"}]},"width":460,"height":460}')}}]);
//# sourceMappingURL=component---src-templates-blog-post-js-content-file-path-content-posts-2017-2017-10-16-immutability-js-without-library-index-md-f560f25cc3914917e8a4.js.map