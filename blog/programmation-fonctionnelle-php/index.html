<!DOCTYPE html><html lang="fr"> <head><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/x-icon" href="/favicon.ico"><meta name="generator" content="Astro v4.14.5"><!-- Font preloads --><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="preload" as="style" href="https://fonts.googleapis.com/css?family=Lato:400,700&display=swap"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700&display=swap" media="print"><!-- Canonical URL --><link rel="canonical" href="https://www.maxpou.fr/blog/programmation-fonctionnelle-php/"><!-- Primary Meta Tags --><title>PHP et Programmation fonctionnelle</title><meta name="title" content="PHP et Programmation fonctionnelle"><meta name="description" content="A blog post written by Maxence Poutord"><script defer data-domain="maxpou.fr" src="https://plausible.io/js/plausible.js"></script><link rel="alternate" type="application/rss+xml" title="Maxence Poutord • Maxpou Blog" href="/rss.xml"><link rel="sitemap" type="application/xml" href="/sitemap-index.xml"><!-- Open Graph / Facebook --><meta property="og:type" content="article"><meta property="og:url" content="https://www.maxpou.fr/blog/programmation-fonctionnelle-php/"><meta property="og:title" content="PHP et Programmation fonctionnelle"><meta property="og:description" content="A blog post written by Maxence Poutord"><meta property="og:image" content="https://www.maxpou.fr/og/programmation-fonctionnelle-php.png"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://www.maxpou.fr/blog/programmation-fonctionnelle-php/"><meta property="twitter:title" content="PHP et Programmation fonctionnelle"><meta property="twitter:description" content="A blog post written by Maxence Poutord"><meta name="twitter:creator" content="_maxpou"><meta property="twitter:image" content="https://www.maxpou.fr/og/programmation-fonctionnelle-php.png"><script>
  const theme = (() => {
    if (typeof localStorage !== 'undefined' && localStorage.getItem('theme')) {
      return localStorage.getItem('theme')
    }
    if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
      return 'dark'
    }
    return 'light'
  })()

  if (theme === 'light') {
    document.documentElement.classList.remove('dark')
  } else {
    document.documentElement.classList.add('dark')
  }
  window.localStorage.setItem('theme', theme)
  typeof plausible !== 'undefined'
    && plausible('pageview', {props: {darkMode: theme !== 'light'}})
</script><link rel="stylesheet" href="/_astro/_slug_.C0WkA3ci.css">
<style>code[class*=language-],pre[class*=language-]{color:#ccc;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.comment,.token.block-comment,.token.prolog,.token.doctype,.token.cdata{color:#999}.token.punctuation{color:#ccc}.token.tag,.token.attr-name,.token.namespace,.token.deleted{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.number,.token.function{color:#f08d49}.token.property,.token.class-name,.token.constant,.token.symbol{color:#f8c555}.token.selector,.token.important,.token.atrule,.token.keyword,.token.builtin{color:#cc99cd}.token.string,.token.char,.token.attr-value,.token.regex,.token.variable{color:#7ec699}.token.operator,.token.entity,.token.url{color:#67cdcc}.token.important,.token.bold{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}.expressive-code{margin-top:1em}
</style>
<link rel="stylesheet" href="/_astro/_slug_.Dv2PKHyk.css">
<style>footer[data-astro-cid-sz7xmlte]{padding:2em 1em 6em;color:rgb(var(--gray))}a[data-astro-cid-eimmu3lg]{display:inline-block;text-decoration:none;border-bottom:4px solid transparent}a[data-astro-cid-eimmu3lg].active{font-weight:bolder;border-bottom-color:#ffdc4e}*{transition:background .5s ease}*::-moz-selection{background-color:#ffdc4e;color:#3e4047}*::selection{background-color:#ffdc4e;color:#3e4047}
</style><script type="module">const n=document.getElementById("burger-button"),e=document.getElementById("burger-line-1"),r=document.getElementById("burger-line-2"),t=document.getElementById("burger-line-3"),o=document.getElementById("menu-backdrop");n.addEventListener("click",()=>{o.classList.contains("hidden")?(o.classList.add("flex"),o.classList.remove("hidden"),e.style.transform="rotate(45deg)",e.style.top="0",e.style.backgroundColor="white",r.style.backgroundColor="transparent",t.style.transform="rotate(-45deg)",t.style.top="0",t.style.backgroundColor="white"):(e.style.transform="rotate(0)",e.style.removeProperty("top"),e.style.removeProperty("background-color"),r.style.removeProperty("background-color"),t.style.removeProperty("background-color"),t.style.transform="rotate(0)",t.style.removeProperty("top"),o.classList.add("hidden"),o.classList.remove("flex"))});
</script></head> <body class="bg-gradient-to-b from-blue-50 to-[#f5f7f9] dark:bg-gray-600 dark:bg-gradient-to-b dark:from-gray-600"> <header class="bg-white dark:bg-gray-600 px-4 h-16"> <nav class="dark:text-white h-16 flex items-center justify-between max-w-screen-xl w-full mx-auto"> <h1 class="text-lg dark:text-white font-bold"> <a href="/">Maxence Poutord</a> </h1> <div class="md:flex hidden"> <a href="/blog" class="py-4 mx-4 no-underline text-lg hover:text-blue-900 dark:text-white dark:hover:text-mainYellow" data-astro-cid-eimmu3lg> Blog </a>  <a href="/speaking" class="py-4 mx-4 no-underline text-lg hover:text-blue-900 dark:text-white dark:hover:text-mainYellow" data-astro-cid-eimmu3lg> Speaking </a>  <a href="/about" class="py-4 mx-4 no-underline text-lg hover:text-blue-900 dark:text-white dark:hover:text-mainYellow" data-astro-cid-eimmu3lg> About </a>  <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).only=e;window.dispatchEvent(new Event("astro:only"));})();;(()=>{var A=Object.defineProperty;var g=(i,o,a)=>o in i?A(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a;var d=(i,o,a)=>g(i,typeof o!="symbol"?o+"":o,a);{let i={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t)},o=t=>{let[l,e]=t;return l in i?i[l](e):void 0},a=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([l,e])=>[l,o(e)]));class y extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var b;if(!this.hydrator||!this.isConnected)return;let e=(b=this.parentElement)==null?void 0:b.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let c=this.querySelectorAll("astro-slot"),n={},h=this.querySelectorAll("template[data-astro-template]");for(let r of h){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of c){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("name")||"default"]=r.innerHTML)}let p;try{p=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",v=this.getAttribute("component-export");throw v&&(s+=` (export ${v})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}let u;await this.hydrator(this)(this.Component,p,n,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),c.disconnect(),this.childrenConnectedCallback()},c=new MutationObserver(()=>{var n;((n=this.lastChild)==null?void 0:n.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});c.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),c=this.getAttribute("client");if(Astro[c]===void 0){window.addEventListener(`astro:${c}`,()=>this.start(),{once:!0});return}try{await Astro[c](async()=>{let n=this.getAttribute("renderer-url"),[h,{default:p}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),u=this.getAttribute("component-export")||"default";if(!u.includes("."))this.Component=h[u];else{this.Component=h;for(let f of u.split("."))this.Component=this.Component[f]}return this.hydrator=p,this.hydrate},e,this)}catch(n){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,n)}}attributeChangedCallback(){this.hydrate()}}d(y,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",y)}})();</script><astro-island uid="Ao5zg" component-url="/_astro/DarkModeButton.-bQd4iv-.js" component-export="default" renderer-url="/_astro/client.wfCDxYdq.js" props="{&quot;className&quot;:[0,&quot;mb-1&quot;]}" ssr="" client="only" opts="{&quot;name&quot;:&quot;DarkModeButton&quot;,&quot;value&quot;:&quot;preact&quot;}"></astro-island> </div> <button id="burger-button" aria-label="Toggle mobile menu" class="md:hidden block w-14 h-14 relative focus:outline-none rounded z-10"> <div class="block w-5 absolute left-6 top-1/2 transform -translate-x-1/2 -translate-y-1/2"> <span id="burger-line-1" class="block absolute h-0.5 w-7 text-white bg-gray-600 dark:bg-white transform transition-all duration-500 ease-in-out -top-2"></span> <span id="burger-line-2" class="block absolute h-0.5 w-7 text-white bg-gray-600 dark:bg-white transform transition-all duration-500 ease-in-out"></span> <span id="burger-line-3" class="block absolute h-0.5 w-7 text-white bg-gray-600 dark:bg-white transform transition-all duration-500 ease-in-out top-2"></span> </div> </button> </nav> <div id="menu-backdrop" class="hidden bg-gray-600 bg-opacity-95 absolute top-0 left-0 h-screen w-screen backdrop-opacity-90 items-center justify-center"> <ul class="text-white font-bold text-xl"> <li class="p-3"><a href="/">Home</a></li> <li class="p-3"><a href="/blog">Blog</a></li> <li class="p-3"><a href="/speaking">Speaking</a></li> <li class="p-3"><a href="/about">About</a></li> <li class="p-3"> <astro-island uid="lieIt" component-url="/_astro/DarkModeButton.-bQd4iv-.js" component-export="default" renderer-url="/_astro/client.wfCDxYdq.js" props="{&quot;textOnly&quot;:[0,true],&quot;className&quot;:[0,&quot;!p-0&quot;]}" ssr="" client="only" opts="{&quot;name&quot;:&quot;DarkModeButton&quot;,&quot;value&quot;:&quot;preact&quot;}"></astro-island> </li> </ul> </div> </header>  <main class="m-0 mx-auto min-h-[70vh] w-full max-w-screen-xl px-4 py-12 text-gray-500 dark:text-gray-100">  <article> <div class="hero-image"> <img src="/_astro/banner.B1Q8SWl9_Z1dgyF9.webp" alt="Cover for PHP et Programmation fonctionnelle" class="rounded-xl shadow-xl mx-auto h-[500px] object-cover w-full" width="1020" height="500" loading="lazy" decoding="async"> </div> <div class="container m-auto text-center"> <div class="mt-3 text-blueGreyed dark:text-gray-300"> <time datetime="2016-12-11T00:00:00.000Z"> 11 December 2016 </time>  </div> <h1 class="font-bold text-3xl dark:text-white text-center leading-none py-4 mb-2 "> PHP et Programmation fonctionnelle </h1> <div class="pb-6"> <a href="/tags/PHP" class="mr-2 inline-block rounded-lg bg-darkBlue px-3 py-2 text-sm text-white no-underline hover:bg-blueGreyed dark:bg-blueGreyed dark:hover:bg-darkBlue shadow-md hover:shadow-xl"> PHP </a><a href="/tags/FunctionalProgramming" class="mr-2 inline-block rounded-lg bg-darkBlue px-3 py-2 text-sm text-white no-underline hover:bg-blueGreyed dark:bg-blueGreyed dark:hover:bg-darkBlue shadow-md hover:shadow-xl"> FunctionalProgramming </a>  </div> </div> <div class="m-auto w-[720px] max-w-full">  <div class="prose
  max-w-none
  dark:prose-invert
  prose-headings:underline
  prose-h2:text-2xl prose-h2:font-bold prose-h2:dark:text-mainYellow
  prose-h3:text-xl prose-h3:font-bold
  prose-p:mb-0
  prose-p:mt-4
  prose-a:underline-offset-4
  prose-a:decoration-2
  prose-a:text-gray-700 dark:prose-a:text-slate-100 hover:prose-a:text-slate-900
  prose-a:decoration-gray-300
  hover:prose-a:decoration-blue-700 dark:hover:prose-a:decoration-mainYellow
  prose-img:rounded-xl">  <p>Depuis quelque temps, j’entends de plus en plus parler d’un autre paradigme de programmation : la
<strong>programmation fonctionnelle</strong> (ou <em>PF</em> pour les intimes). Bon, je ne vais pas vous faire une
introduction à la programmation fonctionnelle, des
<a href="https://medium.com/@cscalfani/so-you-want-to-be-a-functional-programmer-part-1-1f15e387e536">articles</a>/conférences
sur la toile le font très bien. L’idée est plutôt de reprendre des concepts clefs et voir ce que
l’on peut en faire avec dans notre merveilleux monde de PHP.</p>
<h2 id="immuabilité-ou-immutabilité">Immuabilité (ou immutabilité)</h2>
<p>Une variable est une valeur qui peut être amenée à être modifiée dans le temps. Elle va <em>varier</em>, en
passant d’un état à un autre. Un des concepts clefs de la PF est de supprimer cette notion de temps
(d’état) ou du moins, de la minimiser. On va parler d’<strong>immuabilité</strong>.</p>
<p>Ce qui veut dire, exit les variables à qui on assigne un entier puis un tableau… un peu comme ceci
:</p>
<div class="expressive-code"><link rel="stylesheet" href="/_astro/ec.aqfpi.css"><script type="module" src="/_astro/ec.sgewm.js"></script><figure class="frame"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#89DDFF">&#x3C;?</span><span style="--0:#BABED8">php</span></div><div class="ec-line"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">wtf  </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">10</span><span style="--0:#89DDFF">;</span></div><div class="ec-line"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">wtf </span><span style="--0:#89DDFF">+=</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">5</span><span style="--0:#89DDFF">;</span></div><div class="ec-line"><span style="--0:#9FA4BC;--0fs:italic">// puis plus loin</span></div><div class="ec-line"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">wtf  </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">"</span><span style="--0:#C3E88D">cinq</span><span style="--0:#89DDFF">"</span><span style="--0:#89DDFF">;</span></div><div class="ec-line"><span style="--0:#9FA4BC;--0fs:italic">// et enfin</span></div><div class="ec-line"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">wtf  </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">new</span><span style="--0:#BABED8"> </span><span style="--0:#FFCB6B">Banana</span><span style="--0:#89DDFF">();</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="<?php$wtf  = 10;$wtf += 5;// puis plus loin$wtf  = &#x22;cinq&#x22;;// et enfin$wtf  = new Banana();"><div></div></button></div></figure></div>
<p>Il en va de même pour les enrichissements de tableaux dans des boucles… pensez <strong>stateless</strong> !</p>
<p>Dans PHP, le support des variables immuables n’est pas dingue-dingue. On va avoir :</p>
<ul>
<li><a href="http://php.net/manual/en/function.define.php">define</a> : qui associera à un nom une constante au
moment de l’exécution;</li>
<li><a href="http://php.net/manual/en/language.oop5.constants.php">const</a> : pour les constantes de classe.
Attention, ces constantes ne peuvent pas être déclarées de manière dynamique (dans un if).</li>
</ul>
<p>Autant const est intéressante, mais define elle est différente car l’assignation se fait via une
fonction. D’un point de vue personnel, j’ai du mal à m’affranchir du bon vieux <code>$maVariable</code>. Donc
une fois que ma variable est assignée, je n’y touche plus (mais rien ne m’assure que c’est vrai).</p>
<h2 id="immuabilité-et-porté-des-variables">Immuabilité et porté des variables</h2>
<p>En PHP, la portée d’une variable de s’étend pas jusque dans une fonction. Ce qui veut dire que si
vous tentez d’exécuter ce bout de code:</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#89DDFF">&#x3C;?</span><span style="--0:#BABED8">php</span></div><div class="ec-line"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">ten </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">10</span><span style="--0:#89DDFF">;</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#C792EA">function</span><span style="--0:#BABED8"> </span><span style="--0:#82AAFF">someFunction</span><span style="--0:#89DDFF">($</span><span style="--0:#BABED8">value</span><span style="--0:#89DDFF">)</span></div><div class="ec-line"><span style="--0:#89DDFF">{</span></div><div class="ec-line"><span style="--0:#BABED8">    </span><span style="--0:#89DDFF;--0fs:italic">return</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">value </span><span style="--0:#89DDFF">+</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">ten</span><span style="--0:#89DDFF">;</span></div><div class="ec-line"><span style="--0:#89DDFF">}</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#82AAFF">someFunction</span><span style="--0:#89DDFF">(</span><span style="--0:#F78C6C">12</span><span style="--0:#89DDFF">);</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="<?php$ten = 10;function someFunction($value){    return $value + $ten;}someFunction(12);"><div></div></button></div></figure></div>
<p>Un message d’erreur de type notice renverra ceci: <strong>Notice: Undefined variable: ten in myscript.php
on line 5</strong>. En effet, la variable <code>$ten</code> n’est pas accessible dans le scope de la fonction (pas
comme en JS!).</p>
<p>Pour accéder à la variable <code>$ten</code> à l’intérieur de la fonction, il faudra utiliser le système de
Closure (une fonction lambda qui peut accéder à des éléments extérieurs à son scope de création) :</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#89DDFF">&#x3C;?</span><span style="--0:#BABED8">php</span></div><div class="ec-line"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">ten </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">10</span><span style="--0:#89DDFF">;</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">someFunction </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#C792EA">function</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">($</span><span style="--0:#BABED8">value</span><span style="--0:#89DDFF">)</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">use</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">($</span><span style="--0:#BABED8">ten</span><span style="--0:#89DDFF">)</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">{</span></div><div class="ec-line"><span style="--0:#BABED8">    </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">ten </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">21</span><span style="--0:#89DDFF">;</span></div><div class="ec-line"><span style="--0:#BABED8">    </span><span style="--0:#89DDFF;--0fs:italic">return</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">value </span><span style="--0:#89DDFF">+</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">ten</span><span style="--0:#89DDFF">;</span></div><div class="ec-line"><span style="--0:#89DDFF">};</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#82AAFF">echo</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">someFunction</span><span style="--0:#89DDFF">(</span><span style="--0:#F78C6C">12</span><span style="--0:#89DDFF">);</span><span style="--0:#BABED8"> </span><span style="--0:#9FA4BC;--0fs:italic">// 33</span></div><div class="ec-line"><span style="--0:#82AAFF">echo</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">ten</span><span style="--0:#89DDFF">;</span><span style="--0:#BABED8">              </span><span style="--0:#9FA4BC;--0fs:italic">// 10</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="<?php$ten = 10;$someFunction = function ($value) use ($ten) {    $ten = 21;    return $value + $ten;};echo $someFunction(12); // 33echo $ten;              // 10"><div></div></button></div></figure></div>
<p>Note: la variable <code>$ten</code> est passée par valeur. Pour la passer par référence, il faut utiliser le
symbole <strong>&#x26;</strong> comme ceci : <code>&#x26;$ten</code> lors de la déclaration de la variable dans la fonction. Le
<code>echo $ten</code> renverra alors 21 mais surtout, le code perdra son immuabilité.</p>
<p>Vous noterez que c’est sur ce système de closure que s’appuient les frameworks
<a href="http://silex.sensiolabs.org/doc/master/usage.html#example-get-route">Silex</a> et
<a href="https://laravel.com/docs/5.1/routing#basic-routing">Laravel</a> pour leurs systèmes de routing.</p>
<h2 id="immuabilité-et-objets">Immuabilité et Objets</h2>
<p>Il n’y a rien de plus facile que de faire évoluer une variable en PHP. Mais qu’en est-il pour nos
objets ?<br>
Et bien, le concept d’immuabilité n’existe pas non plus en PHP OO. On aurait vite tendance à croire
qu’en mettant un attribut final à une classe et en supprimant les setters, le tour est joué… mais
en PHP, on peut appeler un constructeur autant de fois que l’on veut !</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#89DDFF">&#x3C;?</span><span style="--0:#BABED8">php</span></div><div class="ec-line"><span style="--0:#C792EA">final</span><span style="--0:#BABED8"> </span><span style="--0:#C792EA">class</span><span style="--0:#BABED8"> </span><span style="--0:#FFCB6B">Fruit</span></div><div class="ec-line"><span style="--0:#89DDFF">{</span></div><div class="ec-line"><span style="--0:#BABED8">    </span><span style="--0:#C792EA">private</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">name</span><span style="--0:#89DDFF">;</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#BABED8">    </span><span style="--0:#C792EA">public</span><span style="--0:#BABED8"> </span><span style="--0:#C792EA">function</span><span style="--0:#BABED8"> </span><span style="--0:#82AAFF">__construct</span><span style="--0:#89DDFF">($</span><span style="--0:#BABED8">name</span><span style="--0:#89DDFF">)</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">{</span></div><div class="ec-line"><span style="--0:#BABED8">        </span><span style="--0:#89DDFF">$this-></span><span style="--0:#BABED8">name </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">name</span><span style="--0:#89DDFF">;</span></div><div class="ec-line"><span style="--0:#BABED8">    </span><span style="--0:#89DDFF">}</span></div><div class="ec-line"><span style="--0:#89DDFF">}</span></div><div class="ec-line"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">fruit </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">new</span><span style="--0:#BABED8"> </span><span style="--0:#FFCB6B">Fruit</span><span style="--0:#89DDFF">(</span><span style="--0:#89DDFF">'</span><span style="--0:#C3E88D">Banana</span><span style="--0:#89DDFF">'</span><span style="--0:#89DDFF">);</span></div><div class="ec-line"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">fruit</span><span style="--0:#89DDFF">-></span><span style="--0:#82AAFF">__construct</span><span style="--0:#89DDFF">(</span><span style="--0:#89DDFF">'</span><span style="--0:#C3E88D">Kiwi</span><span style="--0:#89DDFF">'</span><span style="--0:#89DDFF">);</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="<?phpfinal class Fruit{    private $name;    public function __construct($name) {        $this->name = $name;    }}$fruit = new Fruit(&#x27;Banana&#x27;);$fruit->__construct(&#x27;Kiwi&#x27;);"><div></div></button></div></figure></div>
<p>On pourrait aussi rendre le constructeur privé… mais avec la
<a href="http://php.net/manual/en/class.reflectionclass.php">réflexion</a> le concept d’immuabilité en OO est
devenu complètement impossible :</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#89DDFF">&#x3C;?</span><span style="--0:#BABED8">php</span></div><div class="ec-line"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">fruit       </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">new</span><span style="--0:#BABED8"> </span><span style="--0:#FFCB6B">Fruit</span><span style="--0:#89DDFF">(</span><span style="--0:#89DDFF">'</span><span style="--0:#C3E88D">Banana</span><span style="--0:#89DDFF">'</span><span style="--0:#89DDFF">);</span></div><div class="ec-line"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">refObject   </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">new</span><span style="--0:#BABED8"> </span><span style="--0:#FFCB6B">ReflectionObject</span><span style="--0:#89DDFF">($</span><span style="--0:#BABED8">fruit</span><span style="--0:#89DDFF">);</span></div><div class="ec-line"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">refProperty </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">refObject</span><span style="--0:#89DDFF">-></span><span style="--0:#82AAFF">getProperty</span><span style="--0:#89DDFF">(</span><span style="--0:#89DDFF">'</span><span style="--0:#C3E88D">name</span><span style="--0:#89DDFF">'</span><span style="--0:#89DDFF">);</span></div><div class="ec-line"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">refProperty</span><span style="--0:#89DDFF">-></span><span style="--0:#82AAFF">setAccessible</span><span style="--0:#89DDFF">(true);</span></div><div class="ec-line"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">refProperty</span><span style="--0:#89DDFF">-></span><span style="--0:#82AAFF">setValue</span><span style="--0:#89DDFF">($</span><span style="--0:#BABED8">fruit</span><span style="--0:#89DDFF">,</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">'</span><span style="--0:#C3E88D">Apple</span><span style="--0:#89DDFF">'</span><span style="--0:#89DDFF">);</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="<?php$fruit       = new Fruit(&#x27;Banana&#x27;);$refObject   = new ReflectionObject($fruit);$refProperty = $refObject->getProperty(&#x27;name&#x27;);$refProperty->setAccessible(true);$refProperty->setValue($fruit, &#x27;Apple&#x27;);"><div></div></button></div></figure></div>
<p>Bref, l’immuabilité est donc juste une histoire de conventions.</p>
<h2 id="récursion">Récursion</h2>
<p><img  src="/_astro/loop.D6e0_UrI_ZY1vhc.webp" alt="loop" width="190" height="355" loading="lazy" decoding="async"></p>
<p>Quand il y a dans votre code une notion de parenté qui s’étend à plusieurs niveaux, il peut-être
intéressant de créer des fonctions qui s’appelleront elles-même. On va en trouver dans différents
cas d’usage : fonctions mathématiques (exemple ci-après avec la suite de Fibonacci), rechercher un
fichier dans un file system… C’est une bonne alternative aux bons vieux while/for bien crades (qui
utilisent des variables).</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#89DDFF">&#x3C;?</span><span style="--0:#BABED8">php</span></div><div class="ec-line"><span style="--0:#C792EA">function</span><span style="--0:#BABED8"> </span><span style="--0:#82AAFF">fibonacci</span><span style="--0:#89DDFF">(</span><span style="--0:#F78C6C">int</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">n</span><span style="--0:#89DDFF">):</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">int</span></div><div class="ec-line"><span style="--0:#89DDFF">{</span></div><div class="ec-line"><span style="--0:#BABED8">    </span><span style="--0:#89DDFF;--0fs:italic">return</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">n </span><span style="--0:#89DDFF">&#x3C;</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">2</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">?</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">n </span><span style="--0:#89DDFF">:</span><span style="--0:#BABED8"> </span><span style="--0:#82AAFF">fibonacci</span><span style="--0:#89DDFF">($</span><span style="--0:#BABED8">n</span><span style="--0:#89DDFF">-</span><span style="--0:#F78C6C">1</span><span style="--0:#89DDFF">)</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">+</span><span style="--0:#BABED8"> </span><span style="--0:#82AAFF">fibonacci</span><span style="--0:#89DDFF">($</span><span style="--0:#BABED8">n</span><span style="--0:#89DDFF">-</span><span style="--0:#F78C6C">2</span><span style="--0:#89DDFF">);</span></div><div class="ec-line"><span style="--0:#89DDFF">}</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="<?phpfunction fibonacci(int $n): int{    return $n < 2 ? $n : fibonacci($n-1) + fibonacci($n-2);}"><div></div></button></div></figure></div>
<p>Notez cependant qu’utiliser la récursion peut s’évérer assez gourmande en ressources si la fonction
s’appelle elle-même un très grand nombre de fois. Attention aussi aux boucles infinies :) <em>(une fois
sur deux j’oublie le return et c’est la catastrophe !)</em></p>
<h2 id="fonction-de-premier-ordre-et-fonction-dordre-supérieur">Fonction de premier ordre et fonction d’ordre supérieur</h2>
<p>PHP supporte depuis PHP 5.3 (2009), les fonctions de première classe <em>(first-class functions)</em>. Ce
qui veut dire que l’on peut attribuer une fonction à une variable. Une fonction d’ordre supérieur
<em>(high order function)</em> est une fonction qui peut accepter au moins une fonction comme paramètre
et/ou retourner une autre fonction (callable).</p>
<p>Exemple:</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#89DDFF">&#x3C;?</span><span style="--0:#BABED8">php</span></div><div class="ec-line"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">addTen </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#C792EA">function</span><span style="--0:#89DDFF">($</span><span style="--0:#BABED8">item</span><span style="--0:#89DDFF">)</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">{</span></div><div class="ec-line"><span style="--0:#BABED8">    </span><span style="--0:#89DDFF;--0fs:italic">return</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">item </span><span style="--0:#89DDFF">+</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">10</span><span style="--0:#89DDFF">;</span></div><div class="ec-line"><span style="--0:#89DDFF">};</span></div><div class="ec-line"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">addTen</span><span style="--0:#89DDFF">(</span><span style="--0:#F78C6C">32</span><span style="--0:#89DDFF">);</span><span style="--0:#BABED8"> </span><span style="--0:#9FA4BC;--0fs:italic">//42</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="<?php$addTen = function($item) {    return $item + 10;};$addTen(32); //42"><div></div></button></div></figure></div>
<p>L’intérêt de ce type de fonctions, c’est que vos fonctions seront plus composables, paramétrables et
réutilisables (et aussi faciles à tester !). On pourra aussi facilement les coupler avec des
fonctions de type :</p>
<ul>
<li><a href="http://php.net/manual/en/function.array-map.php">array_map</a> : pour parcourir le tableau et
appliquer une transformation à chacun des éléments. Conserve l’ordre et ne supprime pas les
valeurs;</li>
<li><a href="http://php.net/manual/en/function.array-filter.php">array_filter</a> : pour supprimer des entrées.
Conserve l’ordre et les valeurs;</li>
<li><a href="http://php.net/manual/en/function.array-reduce.php">array_reduce</a> : pour réduire le tableau à une
seule valeur.</li>
</ul>
<p>Exemple:</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#89DDFF">&#x3C;?</span><span style="--0:#BABED8">php</span></div><div class="ec-line"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">input </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">[</span><span style="--0:#F78C6C">1</span><span style="--0:#89DDFF">,</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">2</span><span style="--0:#89DDFF">,</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">3</span><span style="--0:#89DDFF">,</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">4</span><span style="--0:#89DDFF">,</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">5</span><span style="--0:#89DDFF">,</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">6</span><span style="--0:#89DDFF">];</span></div><div class="ec-line"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">inputAddTen </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#82AAFF">array_map</span><span style="--0:#89DDFF">($</span><span style="--0:#BABED8">addTen</span><span style="--0:#89DDFF">,</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">input</span><span style="--0:#89DDFF">);</span><span style="--0:#BABED8"> </span><span style="--0:#9FA4BC;--0fs:italic">// [11, 12, 13, 14, 15, 16]</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="<?php$input = [1, 2, 3, 4, 5, 6];$inputAddTen = array_map($addTen, $input); // [11, 12, 13, 14, 15, 16]"><div></div></button></div></figure></div>
<p>Si vous êtes perdus, voici une petite anti-sèche:</p>
<blockquote class="twitter-tweet" data-lang="fr"><p lang="en" dir="ltr">Map/filter/reduce in a tweet:<br><br>map([🌽, 🐮, 🐔], cook)<br>=> [🍿, 🍔, 🍳]<br><br>filter([🍿, 🍔, 🍳], isVegetarian)<br>=>  [🍿, 🍳]<br><br>reduce([🍿, 🍳], eat)<br>=> 💩</p>— Steven Luscher (@steveluscher) <a href="https://twitter.com/steveluscher/status/741089564329054208">10 juin 2016</a></blockquote>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
<p>Autre utilisation des fonctions d’ordre supérieur : créer une fonction qui retourne une fonction.</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#89DDFF">&#x3C;?</span><span style="--0:#BABED8">php</span></div><div class="ec-line"><span style="--0:#C792EA">function</span><span style="--0:#BABED8"> </span><span style="--0:#82AAFF">greaterThan</span><span style="--0:#89DDFF">(</span><span style="--0:#F78C6C">int</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">n</span><span style="--0:#89DDFF">):</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">callable</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">{</span></div><div class="ec-line"><span style="--0:#BABED8">    </span><span style="--0:#89DDFF;--0fs:italic">return</span><span style="--0:#BABED8"> </span><span style="--0:#C792EA">function</span><span style="--0:#89DDFF">(</span><span style="--0:#F78C6C">int</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">m</span><span style="--0:#89DDFF">)</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">use</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">(</span><span style="--0:#BABED8">int </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">n</span><span style="--0:#89DDFF">):</span><span style="--0:#BABED8"> </span><span style="--0:#FFCB6B">boolean</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">{</span></div><div class="ec-line"><span style="--0:#BABED8">        </span><span style="--0:#89DDFF;--0fs:italic">return</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">m </span><span style="--0:#89DDFF">></span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">n</span><span style="--0:#89DDFF">;</span></div><div class="ec-line"><span style="--0:#BABED8">    </span><span style="--0:#89DDFF">};</span></div><div class="ec-line"><span style="--0:#89DDFF">}</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">greaterThan10 </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#82AAFF">greaterThan</span><span style="--0:#89DDFF">(</span><span style="--0:#F78C6C">10</span><span style="--0:#89DDFF">);</span></div><div class="ec-line"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">greaterThan10</span><span style="--0:#89DDFF">(</span><span style="--0:#F78C6C">11</span><span style="--0:#89DDFF">);</span><span style="--0:#BABED8"> </span><span style="--0:#9FA4BC;--0fs:italic">//true</span></div><div class="ec-line"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">greaterThan10</span><span style="--0:#89DDFF">(</span><span style="--0:#F78C6C">9</span><span style="--0:#89DDFF">);</span><span style="--0:#BABED8">  </span><span style="--0:#9FA4BC;--0fs:italic">//false</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="<?phpfunction greaterThan(int $n): callable {    return function(int $m) use (int $n): boolean {        return $m > $n;    };}$greaterThan10 = greaterThan(10);$greaterThan10(11); //true$greaterThan10(9);  //false"><div></div></button></div></figure></div>
<p>Bon par contre <strong>deux points noirs</strong> :</p>
<ul>
<li>dans ces fonctions, la position du callback est différente d’une fonction à l’autre :
array_filter($array, <strong>$callback</strong>) et array_map(**$callback**, $array);</li>
<li>le chaînage n’est pas possible et sa variante n’est vraiment pas sexy :</li>
</ul>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#89DDFF">&#x3C;?</span><span style="--0:#BABED8">php</span></div><div class="ec-line"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">addTen </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#C792EA">function</span><span style="--0:#89DDFF">($</span><span style="--0:#BABED8">item</span><span style="--0:#89DDFF">)</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">{</span></div><div class="ec-line"><span style="--0:#BABED8">    </span><span style="--0:#89DDFF;--0fs:italic">return</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">item </span><span style="--0:#89DDFF">+</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">10</span><span style="--0:#89DDFF">;</span></div><div class="ec-line"><span style="--0:#89DDFF">};</span></div><div class="ec-line"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">isEven </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#C792EA">function</span><span style="--0:#89DDFF">($</span><span style="--0:#BABED8">v</span><span style="--0:#89DDFF">)</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">{</span></div><div class="ec-line"><span style="--0:#BABED8">    </span><span style="--0:#89DDFF;--0fs:italic">return</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">v</span><span style="--0:#89DDFF">%</span><span style="--0:#F78C6C">2</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">==</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">0</span></div><div class="ec-line"><span style="--0:#89DDFF">};</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#82AAFF">array_map</span><span style="--0:#89DDFF">($</span><span style="--0:#BABED8">addTen</span><span style="--0:#89DDFF">,</span></div><div class="ec-line"><span style="--0:#BABED8">          </span><span style="--0:#82AAFF">array_filter</span><span style="--0:#89DDFF">([</span><span style="--0:#F78C6C">1</span><span style="--0:#89DDFF">,</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">2</span><span style="--0:#89DDFF">,</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">3</span><span style="--0:#89DDFF">,</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">4</span><span style="--0:#89DDFF">,</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">5</span><span style="--0:#89DDFF">,</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">6</span><span style="--0:#89DDFF">],</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">isEven</span><span style="--0:#89DDFF">));</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="<?php$addTen = function($item) {    return $item + 10;};$isEven = function($v) {    return $v%2 == 0};array_map($addTen,          array_filter([1, 2, 3, 4, 5, 6], $isEven));"><div></div></button></div></figure></div>
<h2 id="fonctions-pures">Fonctions pures</h2>
<p>La notion de pureté est très importante car elle permet d’éviter les effets de bord <em>(side
effects)</em>. Elle devra donc renvoyer toujours le même lorsqu’on l’appelle avec les mêmes arguments.
Elle ne doit donc pas interagir avec des devices d’I/O ou même des éléments mémoire.</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#89DDFF">&#x3C;?</span><span style="--0:#BABED8">php</span></div><div class="ec-line"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">myNumber </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">1</span><span style="--0:#89DDFF">;</span></div><div class="ec-line"><span style="--0:#C792EA">function</span><span style="--0:#BABED8"> </span><span style="--0:#82AAFF">add</span><span style="--0:#89DDFF">($</span><span style="--0:#BABED8">number</span><span style="--0:#89DDFF">)</span></div><div class="ec-line"><span style="--0:#89DDFF">{</span></div><div class="ec-line"><span style="--0:#BABED8">    </span><span style="--0:#C792EA">global</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">myNumber</span><span style="--0:#89DDFF">;</span></div><div class="ec-line"><span style="--0:#BABED8">    </span><span style="--0:#89DDFF;--0fs:italic">return</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">myNumber </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">myNumber </span><span style="--0:#89DDFF">+</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">number</span><span style="--0:#89DDFF">;</span></div><div class="ec-line"><span style="--0:#89DDFF">}</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#82AAFF">echo</span><span style="--0:#BABED8"> </span><span style="--0:#82AAFF">add</span><span style="--0:#89DDFF">(</span><span style="--0:#F78C6C">5</span><span style="--0:#89DDFF">);</span><span style="--0:#BABED8"> </span><span style="--0:#9FA4BC;--0fs:italic">//6</span></div><div class="ec-line"><span style="--0:#82AAFF">echo</span><span style="--0:#BABED8"> </span><span style="--0:#82AAFF">add</span><span style="--0:#89DDFF">(</span><span style="--0:#F78C6C">5</span><span style="--0:#89DDFF">);</span><span style="--0:#BABED8"> </span><span style="--0:#9FA4BC;--0fs:italic">//11</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="<?php$myNumber = 1;function add($number){    global $myNumber;    return $myNumber = $myNumber + $number;}echo add(5); //6echo add(5); //11"><div></div></button></div></figure></div>
<p>Cette fonction n’est pas pure car elle ne renvoie pas toujours le même résultat pour le même
paramètre d’entrée.</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#89DDFF">&#x3C;?</span><span style="--0:#BABED8">php</span></div><div class="ec-line"><span style="--0:#C792EA">function</span><span style="--0:#BABED8"> </span><span style="--0:#82AAFF">sum</span><span style="--0:#89DDFF">($</span><span style="--0:#BABED8">a</span><span style="--0:#89DDFF">,</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">b</span><span style="--0:#89DDFF">)</span></div><div class="ec-line"><span style="--0:#89DDFF">{</span></div><div class="ec-line"><span style="--0:#BABED8">    </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">logger </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$this-></span><span style="--0:#82AAFF">get</span><span style="--0:#89DDFF">(</span><span style="--0:#89DDFF">'</span><span style="--0:#C3E88D">logger</span><span style="--0:#89DDFF">'</span><span style="--0:#89DDFF">);</span></div><div class="ec-line"><span style="--0:#BABED8">    </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">logger</span><span style="--0:#89DDFF">-></span><span style="--0:#82AAFF">info</span><span style="--0:#89DDFF">(</span><span style="--0:#89DDFF">'</span><span style="--0:#C3E88D">sum</span><span style="--0:#89DDFF">'</span><span style="--0:#89DDFF">,</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">a</span><span style="--0:#89DDFF">,</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">b</span><span style="--0:#89DDFF">);</span></div><div class="ec-line"><span style="--0:#BABED8">    </span><span style="--0:#89DDFF;--0fs:italic">return</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">a </span><span style="--0:#89DDFF">+</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">b</span><span style="--0:#89DDFF">;</span></div><div class="ec-line"><span style="--0:#89DDFF">}</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#82AAFF">sum</span><span style="--0:#89DDFF">(</span><span style="--0:#F78C6C">3</span><span style="--0:#89DDFF">,</span><span style="--0:#F78C6C">7</span><span style="--0:#89DDFF">);</span><span style="--0:#BABED8"> </span><span style="--0:#9FA4BC;--0fs:italic">//10</span></div><div class="ec-line"><span style="--0:#82AAFF">sum</span><span style="--0:#89DDFF">(</span><span style="--0:#F78C6C">3</span><span style="--0:#89DDFF">,</span><span style="--0:#F78C6C">7</span><span style="--0:#89DDFF">);</span><span style="--0:#BABED8"> </span><span style="--0:#9FA4BC;--0fs:italic">//10</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="<?phpfunction sum($a, $b){    $logger = $this->get(&#x27;logger&#x27;);    $logger->info(&#x27;sum&#x27;, $a, $b);    return $a + $b;}sum(3,7); //10sum(3,7); //10"><div></div></button></div></figure></div>
<p>Cette fonction n’est en effet pas pure car elle interagit avec un élément d’I/O, à savoir : le
logger. Bon du coup si on supprime le logger, on peut dire que cette fonction est pure. Vous l’aurez
compris, une fonction pure va de pair avec l’acronyme <em>KISS (Keep It Simple, Stupid)</em>. Comme vu dans
la partie sur l’immuabilité, PHP nous protège pas mal des effets de bord. Essayez donc au maximum de
mettre un maximum de fonctions pures dans votre code et de limiter celles avec des effets de bord.
Vous gagnerez grandement en testabilité !</p>
<p>Pour les développeurs OO, il faudra aussi éviter de trop jouer avec le <code>$this</code>.</p>
<h2 id="mémoization">Mémoization</h2>
<p>Parfois on a des calculs assez conséquents au sein d’une fonction et cette dernière est susceptible
d’être rappelée ultérieurement avec les mêmes paramètres. C’est à ce moment que le concept de
mémoization entre en jeu. Pour éviter de patienter une deuxième fois pour un calcul déjà fait, il
est possible de créer un <strong>pseudo-cache à l’intérieur même de votre fonction</strong>.</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#89DDFF">&#x3C;?</span><span style="--0:#BABED8">php</span></div><div class="ec-line"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">memoMD5 </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#C792EA">function</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">($</span><span style="--0:#BABED8">value</span><span style="--0:#89DDFF">)</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">{</span></div><div class="ec-line"><span style="--0:#BABED8">    </span><span style="--0:#C792EA">static</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">cache </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">[];</span></div><div class="ec-line"><span style="--0:#BABED8">    </span><span style="--0:#89DDFF;--0fs:italic">if</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">(</span><span style="--0:#82AAFF">isset</span><span style="--0:#89DDFF">($</span><span style="--0:#BABED8">cache</span><span style="--0:#89DDFF">[$</span><span style="--0:#BABED8">value</span><span style="--0:#89DDFF">]))</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">{</span></div><div class="ec-line"><span style="--0:#BABED8">        </span><span style="--0:#82AAFF">echo</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">"</span><span style="--0:#C3E88D">memoize - </span><span style="--0:#89DDFF">"</span><span style="--0:#89DDFF">;</span></div><div class="ec-line"><span style="--0:#BABED8">        </span><span style="--0:#89DDFF;--0fs:italic">return</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">cache</span><span style="--0:#89DDFF">[$</span><span style="--0:#BABED8">value</span><span style="--0:#89DDFF">];</span></div><div class="ec-line"><span style="--0:#BABED8">    </span><span style="--0:#89DDFF">}</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#BABED8">    </span><span style="--0:#82AAFF">sleep</span><span style="--0:#89DDFF">(</span><span style="--0:#F78C6C">5</span><span style="--0:#89DDFF">);</span><span style="--0:#BABED8"> </span><span style="--0:#9FA4BC;--0fs:italic">//imaginez ici un long calcul</span></div><div class="ec-line"><span style="--0:#BABED8">    </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">cache</span><span style="--0:#89DDFF">[$</span><span style="--0:#BABED8">value</span><span style="--0:#89DDFF">]</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#82AAFF">md5</span><span style="--0:#89DDFF">($</span><span style="--0:#BABED8">value</span><span style="--0:#89DDFF">);</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#BABED8">    </span><span style="--0:#89DDFF;--0fs:italic">return</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">cache</span><span style="--0:#89DDFF">[$</span><span style="--0:#BABED8">value</span><span style="--0:#89DDFF">];</span></div><div class="ec-line"><span style="--0:#89DDFF">};</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#82AAFF">echo</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">memoMD5</span><span style="--0:#89DDFF">(</span><span style="--0:#F78C6C">1</span><span style="--0:#89DDFF">);</span><span style="--0:#BABED8"> </span><span style="--0:#9FA4BC;--0fs:italic">// affiche après ~5s: c4ca4238a0b923820dcc509a6f75849b</span></div><div class="ec-line"><span style="--0:#82AAFF">echo</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">memoMD5</span><span style="--0:#89DDFF">(</span><span style="--0:#F78C6C">2</span><span style="--0:#89DDFF">);</span><span style="--0:#BABED8"> </span><span style="--0:#9FA4BC;--0fs:italic">// affiche après ~5s: c81e728d9d4c2f636f067f89cc14862c</span></div><div class="ec-line"><span style="--0:#82AAFF">echo</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">memoMD5</span><span style="--0:#89DDFF">(</span><span style="--0:#F78C6C">1</span><span style="--0:#89DDFF">);</span><span style="--0:#BABED8"> </span><span style="--0:#9FA4BC;--0fs:italic">// affiche après ~0s: memoize - c4ca4238a0b923820dcc509a6f75849b</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="<?php$memoMD5 = function ($value) {    static $cache = [];    if (isset($cache[$value])) {        echo &#x22;memoize - &#x22;;        return $cache[$value];    }    sleep(5); //imaginez ici un long calcul    $cache[$value] = md5($value);    return $cache[$value];};echo $memoMD5(1); // affiche après ~5s: c4ca4238a0b923820dcc509a6f75849becho $memoMD5(2); // affiche après ~5s: c81e728d9d4c2f636f067f89cc14862cecho $memoMD5(1); // affiche après ~0s: memoize - c4ca4238a0b923820dcc509a6f75849b"><div></div></button></div></figure></div>
<h2 id="le-mot-de-la-fin">Le mot de la fin</h2>
<p>Je n’ai pas abordé tous les concepts de la PF dans cet article. Sachez qu’il existe des solutions
<em>full-PHP</em> qui implémentent les concepts de <a href="https://github.com/ircmaxell/monad-php">monad</a>,
<a href="https://github.com/matteosister/php-curry">currying</a>…</p>
<p>PHP n’est pas vraiment le meilleur langage qui se prête à la programmation fonctionnelle. Écrire
avec un style fonctionnel ne sera pas aussi propre à lire qu’en JavaScript (surtout depuis ES6),
Scala, Haskell… Mais ce n’est pas pour autant qu’il faut le laisser de côté ce paradigme.</p>
<p>Par exemple, entre ces deux exemples, je préfère de loin celui qui adopte un style
fonctionnel :</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#89DDFF">&#x3C;?</span><span style="--0:#BABED8">php</span></div><div class="ec-line"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">input </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">[</span><span style="--0:#F78C6C">1</span><span style="--0:#89DDFF">,</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">2</span><span style="--0:#89DDFF">,</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">3</span><span style="--0:#89DDFF">,</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">4</span><span style="--0:#89DDFF">,</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">5</span><span style="--0:#89DDFF">,</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">6</span><span style="--0:#89DDFF">];</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#9FA4BC;--0fs:italic">// style procédural</span></div><div class="ec-line"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">odds </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">[];</span></div><div class="ec-line"><span style="--0:#89DDFF;--0fs:italic">for</span><span style="--0:#89DDFF">($</span><span style="--0:#BABED8">i</span><span style="--0:#89DDFF">=</span><span style="--0:#F78C6C">0</span><span style="--0:#89DDFF">;</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">i </span><span style="--0:#89DDFF">&#x3C;</span><span style="--0:#BABED8"> </span><span style="--0:#82AAFF">count</span><span style="--0:#89DDFF">($</span><span style="--0:#BABED8">input</span><span style="--0:#89DDFF">);</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">i</span><span style="--0:#89DDFF">++)</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">{</span></div><div class="ec-line"><span style="--0:#BABED8">    </span><span style="--0:#89DDFF;--0fs:italic">if</span><span style="--0:#89DDFF">($</span><span style="--0:#BABED8">input</span><span style="--0:#89DDFF">[$</span><span style="--0:#BABED8">i</span><span style="--0:#89DDFF">]</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">%</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">2</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">!=</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">0</span><span style="--0:#89DDFF">)</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">{</span></div><div class="ec-line"><span style="--0:#BABED8">        </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">odds</span><span style="--0:#89DDFF">[]</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">input</span><span style="--0:#89DDFF">[$</span><span style="--0:#BABED8">i</span><span style="--0:#89DDFF">];</span></div><div class="ec-line"><span style="--0:#BABED8">    </span><span style="--0:#89DDFF">}</span></div><div class="ec-line"><span style="--0:#89DDFF">}</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#9FA4BC;--0fs:italic">// style fonctionnel</span></div><div class="ec-line"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">odds </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#82AAFF">array_filter</span><span style="--0:#89DDFF">($</span><span style="--0:#BABED8">input</span><span style="--0:#89DDFF">,</span><span style="--0:#BABED8"> </span><span style="--0:#C792EA">function</span><span style="--0:#89DDFF">($</span><span style="--0:#BABED8">v</span><span style="--0:#89DDFF">)</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">{</span></div><div class="ec-line"><span style="--0:#BABED8">    </span><span style="--0:#89DDFF;--0fs:italic">return</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">v </span><span style="--0:#89DDFF">%</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">2</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">!==</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">0</span><span style="--0:#89DDFF">;</span></div><div class="ec-line"><span style="--0:#89DDFF">});</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="<?php$input = [1, 2, 3, 4, 5, 6];// style procédural$odds = [];for($i=0; $i < count($input); $i++) {    if($input[$i] % 2 != 0) {        $odds[] = $input[$i];    }}// style fonctionnel$odds = array_filter($input, function($v) {    return $v % 2 !== 0;});"><div></div></button></div></figure></div>
<p>Vous améliorerez grandement la qualité de votre en utilisant des variables immuables et des
fonctions pures. La récursion est très utile, même si elle peut s’avérer triviale lors de débug.
Pour le reste, c’est au cas par cas.</p>
<p><strong>Mais pourquoi est-ce si étranger en PHP ?</strong></p>
<p>Adopter un style fonctionnel est nécessaire dans un langage où les zones mémoires peuvent être
partagées. C’est d’ailleurs pour celà que l’immuabilité et la pureté des fonctions sont si
primordiales.<br>
PHP a été conçu pour afficher des pages web en un temps inférieur à 1s. Une fois que la page est
chargée, toute la mémoire qui a été nécessaire pour afficher la page disparaît. On est dans une
<strong>Share Nothing Architecture</strong>, ce qui veut dire que chaque processus qui est chargé d’afficher une
page en PHP ne va pas partager sa mémoire avec un autre (pas comme en Java où certains threads
partagent de la mémoire).<br>
C’est pour ces raisons que l’on entend si peu parler de Programmation Fonctionnelle en PHP.</p> <div> <hr> <h2 class="dark:text-gray-100">About the author</h2> <div class="flex flex-col md:flex-row items-center gap-5 md:gap-8 mt-5"> <div class="relative flex-shrink-0 h-32 w-32"> <img src="/_astro/profile-picture.CAXSHk1R_2wF1t7.webp" class="not-prose h-32 w-32 object-cover rounded-full" loading="eager" alt="Maxence Poutord" width="128" height="128" decoding="async"> </div> <div> <p class="!mt-0 pb-2">
Hey, I'm Maxence Poutord, a passionate software engineer. In my
        day-to-day job, I'm working as a senior front-end engineer at Orderfox.
        When I'm not working, you can find me travelling the world or cooking.
</p> <a class="not-prose inline-flex rounded border
    font-semibold no-underline
    transition-colors duration-200 ease-in-out px-3 py-2
    border-[#1da1f2] bg-[#1da1f2] text-white
    hover:border-[#1da1f2] hover:bg-white hover:text-[#1da1f2]" rel="noopener" target="_blank" href="https://twitter.com/intent/follow?screen_name=_maxpou"> <svg role="img" aria-label="Twitter" viewBox="0 0 24 24" width="1em" height="1em" class="h-6 w-6 pr-2"><path fill="currentColor" d="M23.954 4.569a10 10 0 0 1-2.825.775 4.958 4.958 0 0 0 2.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 0 0-8.384 4.482C7.691 8.094 4.066 6.13 1.64 3.161a4.822 4.822 0 0 0-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 0 1-2.228-.616v.061a4.923 4.923 0 0 0 3.946 4.827 4.996 4.996 0 0 1-2.212.085 4.937 4.937 0 0 0 4.604 3.417 9.868 9.868 0 0 1-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 0 0 7.557 2.209c9.054 0 13.999-7.496 13.999-13.986 0-.209 0-.42-.015-.63a9.936 9.936 0 0 0 2.46-2.548l-.047-.02z"></path></svg>
Follow @_maxpou
 </a> </div> </div> </div> <section class="mx-auto mt-12"> <script src="https://giscus.app/client.js" data-repo="maxpou/maxpou.fr" data-repo-id="MDEwOlJlcG9zaXRvcnk0MTg1MTQyOQ==" data-category="General" data-category-id="MDE4OkRpc2N1c3Npb25DYXRlZ29yeTMyMzMwNzY1" data-mapping="og:title" data-strict="0" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="bottom" data-theme="preferred_color_scheme" data-lang="fr" data-loading="lazy" crossorigin="anonymous" async></script> </section> <script>
  function updateGiscusTheme() {
    const theme = document.documentElement.classList.contains('dark') ? 'dark' : 'light';
    const iframe = document.querySelector('iframe.giscus-frame');
    if (!iframe) return;
    iframe.contentWindow.postMessage({ giscus: { setConfig: { theme }}}, 'https://giscus.app');
  }

  const observer = new MutationObserver(updateGiscusTheme);
  observer.observe(document.documentElement, { attributes: true, attributeFilter: ['class'] });
  
  window.onload = () => {
    updateGiscusTheme();
  };
</script>  </div>  <div> <h2 class="text-2xl underline mt-12 font-bold dark:text-mainYellow">
Recommended posts
</h2> <div class="grid grid-cols-1 gap-6 md:grid-cols-2 mt-6"> <a title="Vue.js Testing Made it Easy (with Testing Library)" href="/blog/vue-js-testing-library/" class="ease flex flex-col rounded-lg bg-white transition duration-300 dark:bg-gray-500 hover:translate-y-0.5 shadow-md  hover:shadow-xl group"> <picture> <source srcset="/_astro/cover.FA1DSgeP_Zpwefq.webp" type="image/webp"><source srcset="/_astro/cover.FA1DSgeP_Z1HRvXP.avif" type="image/avif"><source srcset="/_astro/cover.FA1DSgeP_Z1IBH83.jpeg" type="image/jpeg"> <img src="/_astro/cover.FA1DSgeP_LJGrw.jpg" alt="Cover for post Vue.js Testing Made it Easy (with Testing Library)" class="h-56 w-full rounded-b-none rounded-t-lg object-cover transition" width="420" height="224" loading="lazy" decoding="async"> </picture> <div class="p-4"> <header class="text-xl text-gray-700 dark:text-gray-100">  <span class="inline"> <span class="from-blue-100 to-blue-100 text-dark dark:bg-none font-semibold
           bg-gradient-to-r bg-[length:0px_10px] bg-left-bottom bg-no-repeat transition-[background-size] duration-500 hover:bg-[length:100%_3px] group-hover:bg-[length:100%_10px]">  Vue.js Testing Made it Easy (with Testing Library) </span> </span> </header> <p class="date text-gray-400 dark:text-gray-100 text-sm"> How Testing Library helps you to write better integration test </p> </div> </a><a title="Vue.js: Let's Scale!" href="/blog/vue-js-module-architecture/" class="ease flex flex-col rounded-lg bg-white transition duration-300 dark:bg-gray-500 hover:translate-y-0.5 shadow-md  hover:shadow-xl group"> <picture> <source srcset="/_astro/cover.B5jYl0xe_ZohYqF.webp" type="image/webp"><source srcset="/_astro/cover.B5jYl0xe_ughil.avif" type="image/avif"><source srcset="/_astro/cover.B5jYl0xe_Z1096cA.jpeg" type="image/jpeg"> <img src="/_astro/cover.B5jYl0xe_ZjLtB3.jpg" alt="Cover for post Vue.js: Let's Scale!" class="h-56 w-full rounded-b-none rounded-t-lg object-cover transition" width="420" height="224" loading="lazy" decoding="async"> </picture> <div class="p-4"> <header class="text-xl text-gray-700 dark:text-gray-100">  <span class="inline"> <span class="from-blue-100 to-blue-100 text-dark dark:bg-none font-semibold
           bg-gradient-to-r bg-[length:0px_10px] bg-left-bottom bg-no-repeat transition-[background-size] duration-500 hover:bg-[length:100%_3px] group-hover:bg-[length:100%_10px]">  Vue.js: Let&#39;s Scale! </span> </span> </header> <p class="date text-gray-400 dark:text-gray-100 text-sm"> Architecture and technical decision behind a big Vue.js application. </p> </div> </a> </div> </div>  </div> </article>  </main> <footer class="bg-blue-50 dark:bg-gray-600 dark:text-white w-full mx-auto pb-0" data-astro-cid-sz7xmlte> <div class="m-auto flex w-[1024px] max-w-full flex-wrap justify-between" data-astro-cid-sz7xmlte> <div class="w-full pb-4 md:w-auto flex-auto" data-astro-cid-sz7xmlte> <p class="pb-1 font-bold" data-astro-cid-sz7xmlte>
&copy; 2014 - 2024 - Maxence Poutord </p> <p data-astro-cid-sz7xmlte>Built with Astro, Tailwind and some ☕️</p> <p data-astro-cid-sz7xmlte>
Hosted with <span class="text-red-500" data-astro-cid-sz7xmlte>❤</span> by <a class="hover:text-gray-700 hover:underline dark:hover:text-mainYellow" href="https://github.com/maxpou/maxpou.fr" data-astro-cid-sz7xmlte>GitHub</a>.
</p> </div> <div class="flex-auto" data-astro-cid-sz7xmlte> <h3 class="pb-1 font-bold" data-astro-cid-sz7xmlte>Explore</h3> <ul data-astro-cid-sz7xmlte> <li data-astro-cid-sz7xmlte> <a href="/uses" target="_self" class="hover:text-gray-700 hover:underline dark:hover:text-mainYellow" data-astro-cid-sz7xmlte> Uses </a> </li><li data-astro-cid-sz7xmlte> <a href="/recipes" target="_self" class="hover:text-gray-700 hover:underline dark:hover:text-mainYellow" data-astro-cid-sz7xmlte> Recipes (kitchen) </a> </li><li data-astro-cid-sz7xmlte> <a href="/about" target="_self" class="hover:text-gray-700 hover:underline dark:hover:text-mainYellow" data-astro-cid-sz7xmlte> About </a> </li><li data-astro-cid-sz7xmlte> <a href="/cv" target="_blank" class="hover:text-gray-700 hover:underline dark:hover:text-mainYellow" data-astro-cid-sz7xmlte> Resume (cv) </a> </li><li data-astro-cid-sz7xmlte> <a href="/readme" target="_self" class="hover:text-gray-700 hover:underline dark:hover:text-mainYellow" data-astro-cid-sz7xmlte> Readme </a> </li> </ul> </div> <div class="flex-auto" data-astro-cid-sz7xmlte> <h3 class="pb-1 font-bold flex-auto" data-astro-cid-sz7xmlte>Let's connect</h3> <ul data-astro-cid-sz7xmlte> <li data-astro-cid-sz7xmlte> <a href="https://github.com/maxpou" rel="noopener noreferrer" class="hover:text-gray-700 hover:underline dark:hover:text-mainYellow" data-astro-cid-sz7xmlte> GitHub </a> </li><li data-astro-cid-sz7xmlte> <a href="https://twitter.com/_maxpou" rel="noopener noreferrer" class="hover:text-gray-700 hover:underline dark:hover:text-mainYellow" data-astro-cid-sz7xmlte> Twitter </a> </li><li data-astro-cid-sz7xmlte> <a href="https://www.linkedin.com/in/maxpou/" rel="noopener noreferrer" class="hover:text-gray-700 hover:underline dark:hover:text-mainYellow" data-astro-cid-sz7xmlte> LinkedIn </a> </li><li data-astro-cid-sz7xmlte> <a href="/rss.xml" class="hover:text-gray-700 hover:underline dark:hover:text-mainYellow" data-astro-cid-sz7xmlte> RSS feed </a> </li> </ul> </div> </div>  </footer>  </body> </html>