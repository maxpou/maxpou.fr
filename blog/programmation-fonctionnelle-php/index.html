<!DOCTYPE html><html lang="fr"> <head><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/x-icon" href="/favicon.ico"><meta name="generator" content="Astro v5.0.2"><!-- SEO Meta Tags --><meta name="language" content="en"><meta name="geo.region" content="FR"><meta name="geo.placename" content="France"><meta name="author" content="Maxence Poutord"><meta name="robots" content="index, follow"><meta name="googlebot" content="index, follow"><!-- Font preloads --><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="preload" as="style" href="https://fonts.googleapis.com/css?family=Lato:400,700&display=swap"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700&display=swap" media="print"><!-- Canonical URL --><link rel="canonical" href="https://www.maxpou.fr/blog/programmation-fonctionnelle-php/"><!-- Primary Meta Tags --><title>PHP et Programmation fonctionnelle</title><meta name="title" content="PHP et Programmation fonctionnelle"><meta name="description" content="A blog post written by Maxence Poutord"><script defer data-domain="maxpou.fr" src="https://plausible.io/js/plausible.js"></script><link rel="alternate" type="application/rss+xml" title="Maxence Poutord ‚Ä¢ Maxpou Blog" href="/rss.xml"><link rel="sitemap" type="application/xml" href="/sitemap-index.xml"><!-- Open Graph / Facebook --><meta property="og:type" content="article"><meta property="og:url" content="https://www.maxpou.fr/blog/programmation-fonctionnelle-php/"><meta property="og:title" content="PHP et Programmation fonctionnelle"><meta property="og:description" content="A blog post written by Maxence Poutord"><meta property="og:site_name" content="Maxence Poutord"><meta property="og:locale" content="en_US"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta property="og:image" content="https://www.maxpou.fr/og/programmation-fonctionnelle-php.png"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://www.maxpou.fr/blog/programmation-fonctionnelle-php/"><meta property="twitter:title" content="PHP et Programmation fonctionnelle"><meta property="twitter:description" content="A blog post written by Maxence Poutord"><meta name="twitter:creator" content="_maxpou"><meta property="twitter:image" content="https://www.maxpou.fr/og/programmation-fonctionnelle-php.png"><!-- Web App Manifest --><link rel="manifest" href="/manifest.json"><meta name="theme-color" content="#ffdc4e"><!-- DNS Prefetch --><link rel="dns-prefetch" href="//fonts.googleapis.com"><link rel="dns-prefetch" href="//plausible.io"><script>
  const theme = (() => {
    if (typeof localStorage !== 'undefined' && localStorage.getItem('theme')) {
      return localStorage.getItem('theme')
    }
    if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
      return 'dark'
    }
    return 'light'
  })()

  if (theme === 'light') {
    document.documentElement.classList.remove('dark')
  } else {
    document.documentElement.classList.add('dark')
  }
  window.localStorage.setItem('theme', theme)
  typeof plausible !== 'undefined'
    && plausible('pageview', {props: {darkMode: theme !== 'light'}})
</script><link rel="stylesheet" href="/_astro/_slug_.Brw77WB7.css">
<style>code[class*=language-],pre[class*=language-]{color:#ccc;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.comment,.token.block-comment,.token.prolog,.token.doctype,.token.cdata{color:#999}.token.punctuation{color:#ccc}.token.tag,.token.attr-name,.token.namespace,.token.deleted{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.number,.token.function{color:#f08d49}.token.property,.token.class-name,.token.constant,.token.symbol{color:#f8c555}.token.selector,.token.important,.token.atrule,.token.keyword,.token.builtin{color:#cc99cd}.token.string,.token.char,.token.attr-value,.token.regex,.token.variable{color:#7ec699}.token.operator,.token.entity,.token.url{color:#67cdcc}.token.important,.token.bold{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}.expressive-code{margin-top:1em}aside>p:first-child{margin-top:0}
[data-astro-image]{width:100%;height:auto;-o-object-fit:var(--fit);object-fit:var(--fit);-o-object-position:var(--pos);object-position:var(--pos);aspect-ratio:var(--w) / var(--h)}[data-astro-image=responsive]{max-width:calc(var(--w) * 1px);max-height:calc(var(--h) * 1px)}[data-astro-image=fixed]{width:calc(var(--w) * 1px);height:calc(var(--h) * 1px)}
</style>
<link rel="stylesheet" href="/_astro/_slug_.BfsIBSZT.css">
<style>footer[data-astro-cid-sz7xmlte]{padding:2em 1em 6em;color:rgb(var(--gray))}a[data-astro-cid-eimmu3lg]{display:inline-block;text-decoration:none;border-bottom:4px solid transparent}a[data-astro-cid-eimmu3lg].active{font-weight:bolder;border-bottom-color:#ffdc4e}*{transition:background .5s ease}*::-moz-selection{background-color:#ffdc4e;color:#3e4047}*::selection{background-color:#ffdc4e;color:#3e4047}
</style></head> <body class="bg-gradient-to-b from-blue-50 to-[#f5f7f9] dark:bg-gray-600 dark:bg-gradient-to-b dark:from-gray-600"> <header class="bg-white dark:bg-gray-600 px-4 h-16"> <nav class="dark:text-white h-16 flex items-center justify-between max-w-screen-xl w-full mx-auto"> <h1 class="text-lg dark:text-white font-bold"> <a href="/">Maxence Poutord</a> </h1> <div class="md:flex hidden"> <a href="/blog" class="py-4 mx-4 no-underline text-lg hover:text-blue-900 dark:text-white dark:hover:text-mainYellow" data-astro-cid-eimmu3lg> Blog </a>  <a href="/speaking" class="py-4 mx-4 no-underline text-lg hover:text-blue-900 dark:text-white dark:hover:text-mainYellow" data-astro-cid-eimmu3lg> Speaking </a>  <a href="/about" class="py-4 mx-4 no-underline text-lg hover:text-blue-900 dark:text-white dark:hover:text-mainYellow" data-astro-cid-eimmu3lg> About </a>  <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).only=e;window.dispatchEvent(new Event("astro:only"));})();;(()=>{var A=Object.defineProperty;var g=(i,o,a)=>o in i?A(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a;var d=(i,o,a)=>g(i,typeof o!="symbol"?o+"":o,a);{let i={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t),11:t=>1/0*t},o=t=>{let[l,e]=t;return l in i?i[l](e):void 0},a=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([l,e])=>[l,o(e)]));class y extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var b;if(!this.hydrator||!this.isConnected)return;let e=(b=this.parentElement)==null?void 0:b.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let c=this.querySelectorAll("astro-slot"),n={},h=this.querySelectorAll("template[data-astro-template]");for(let r of h){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of c){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("name")||"default"]=r.innerHTML)}let p;try{p=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",v=this.getAttribute("component-export");throw v&&(s+=` (export ${v})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}let u;await this.hydrator(this)(this.Component,p,n,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),c.disconnect(),this.childrenConnectedCallback()},c=new MutationObserver(()=>{var n;((n=this.lastChild)==null?void 0:n.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});c.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),c=this.getAttribute("client");if(Astro[c]===void 0){window.addEventListener(`astro:${c}`,()=>this.start(),{once:!0});return}try{await Astro[c](async()=>{let n=this.getAttribute("renderer-url"),[h,{default:p}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),u=this.getAttribute("component-export")||"default";if(!u.includes("."))this.Component=h[u];else{this.Component=h;for(let f of u.split("."))this.Component=this.Component[f]}return this.hydrator=p,this.hydrate},e,this)}catch(n){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,n)}}attributeChangedCallback(){this.hydrate()}}d(y,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",y)}})();</script><astro-island uid="Ao5zg" component-url="/_astro/DarkModeButton.CNi1GYye.js" component-export="default" renderer-url="/_astro/client.C34Y2FhB.js" props="{&quot;className&quot;:[0,&quot;mb-1&quot;]}" ssr client="only" opts="{&quot;name&quot;:&quot;DarkModeButton&quot;,&quot;value&quot;:&quot;preact&quot;}"></astro-island> </div> <button id="burger-button" aria-label="Toggle mobile menu" class="md:hidden block w-14 h-14 relative focus:outline-none rounded z-10"> <div class="block w-5 absolute left-6 top-1/2 transform -translate-x-1/2 -translate-y-1/2"> <span id="burger-line-1" class="block absolute h-0.5 w-7 text-white bg-gray-600 dark:bg-white transform transition-all duration-500 ease-in-out -top-2"></span> <span id="burger-line-2" class="block absolute h-0.5 w-7 text-white bg-gray-600 dark:bg-white transform transition-all duration-500 ease-in-out"></span> <span id="burger-line-3" class="block absolute h-0.5 w-7 text-white bg-gray-600 dark:bg-white transform transition-all duration-500 ease-in-out top-2"></span> </div> </button> </nav> <div id="menu-backdrop" class="hidden bg-gray-600 bg-opacity-95 absolute top-0 left-0 h-screen w-screen backdrop-opacity-90 items-center justify-center"> <ul class="text-white font-bold text-xl"> <li class="p-3"><a href="/">Home</a></li> <li class="p-3"><a href="/blog">Blog</a></li> <li class="p-3"><a href="/speaking">Speaking</a></li> <li class="p-3"><a href="/about">About</a></li> <li class="p-3"> <astro-island uid="lieIt" component-url="/_astro/DarkModeButton.CNi1GYye.js" component-export="default" renderer-url="/_astro/client.C34Y2FhB.js" props="{&quot;textOnly&quot;:[0,true],&quot;className&quot;:[0,&quot;!p-0&quot;]}" ssr client="only" opts="{&quot;name&quot;:&quot;DarkModeButton&quot;,&quot;value&quot;:&quot;preact&quot;}"></astro-island> </li> </ul> </div> </header> <script type="module">const n=document.getElementById("burger-button"),e=document.getElementById("burger-line-1"),r=document.getElementById("burger-line-2"),t=document.getElementById("burger-line-3"),o=document.getElementById("menu-backdrop");n.addEventListener("click",()=>{o.classList.contains("hidden")?(o.classList.add("flex"),o.classList.remove("hidden"),e.style.transform="rotate(45deg)",e.style.top="0",e.style.backgroundColor="white",r.style.backgroundColor="transparent",t.style.transform="rotate(-45deg)",t.style.top="0",t.style.backgroundColor="white"):(e.style.transform="rotate(0)",e.style.removeProperty("top"),e.style.removeProperty("background-color"),r.style.removeProperty("background-color"),t.style.removeProperty("background-color"),t.style.transform="rotate(0)",t.style.removeProperty("top"),o.classList.add("hidden"),o.classList.remove("flex"))});</script> <main class="m-0 mx-auto min-h-[70vh] w-full max-w-screen-xl px-4 py-12 text-gray-500 dark:text-gray-100">  <script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","headline":"PHP et Programmation fonctionnelle","author":{"@type":"Person","name":"Maxence Poutord","url":"https://www.maxpou.fr"},"publisher":{"@type":"Organization","name":"Maxence Poutord","logo":{"@type":"ImageObject","url":"https://www.maxpou.fr/android-chrome-192x192.png"}},"datePublished":"2016-12-11T00:00:00.000Z","dateModified":"2016-12-11T00:00:00.000Z","image":"https://www.maxpou.fr[object Object]","url":"https://www.maxpou.fr/blog/programmation-fonctionnelle-php/","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.maxpou.fr/blog/programmation-fonctionnelle-php/"},"keywords":"PHP, FunctionalProgramming","articleSection":"Blog"}</script> <article> <div class="hero-image"> <img src="/_astro/banner.B1Q8SWl9_ZLuyYv.webp" alt="Cover for PHP et Programmation fonctionnelle" class="rounded-xl shadow-xl mx-auto h-[500px] object-cover w-full" width="1020" height="500" loading="lazy" decoding="async" class="rounded-xl shadow-xl mx-auto h-[500px] object-cover w-full"> </div> <div class="container m-auto text-center"> <div class="mt-3 text-blueGreyed dark:text-gray-300"> <time datetime="2016-12-11T00:00:00.000Z"> 11 December 2016 </time>  </div> <h1 class="font-bold text-3xl dark:text-white text-center leading-none py-4 mb-2 "> PHP et Programmation fonctionnelle </h1> <div class="pb-6"> <a href="/tags/PHP" class="mr-2 inline-block rounded-lg bg-darkBlue px-3 py-2 text-sm text-white no-underline hover:bg-blueGreyed dark:bg-blueGreyed dark:hover:bg-darkBlue shadow-md hover:shadow-xl"> PHP </a><a href="/tags/FunctionalProgramming" class="mr-2 inline-block rounded-lg bg-darkBlue px-3 py-2 text-sm text-white no-underline hover:bg-blueGreyed dark:bg-blueGreyed dark:hover:bg-darkBlue shadow-md hover:shadow-xl"> FunctionalProgramming </a>  </div> </div> <div class="m-auto w-[720px] max-w-full">  <div class="prose
  max-w-none
  dark:prose-invert
  prose-headings:underline
  prose-h2:text-2xl prose-h2:font-bold prose-h2:dark:text-mainYellow
  prose-h3:text-xl prose-h3:font-bold
  prose-p:mb-0
  prose-p:mt-4
  prose-a:underline-offset-4
  prose-a:decoration-2
  prose-a:text-gray-700 dark:prose-a:text-slate-100 hover:prose-a:text-slate-900
  prose-a:decoration-gray-300
  hover:prose-a:decoration-blue-700 dark:hover:prose-a:decoration-mainYellow
  prose-img:rounded-xl">  <p>Depuis quelque temps, j‚Äôentends de plus en plus parler d‚Äôun autre paradigme de programmation : la
<strong>programmation fonctionnelle</strong> (ou <em>PF</em> pour les intimes). Bon, je ne vais pas vous faire une
introduction √† la programmation fonctionnelle, des
<a href="https://medium.com/@cscalfani/so-you-want-to-be-a-functional-programmer-part-1-1f15e387e536">articles</a>/conf√©rences
sur la toile le font tr√®s bien. L‚Äôid√©e est plut√¥t de reprendre des concepts clefs et voir ce que
l‚Äôon peut en faire avec dans notre merveilleux monde de PHP.</p>
<h2 id="immuabilit√©-ou-immutabilit√©">Immuabilit√© (ou immutabilit√©)</h2>
<p>Une variable est une valeur qui peut √™tre amen√©e √† √™tre modifi√©e dans le temps. Elle va <em>varier</em>, en
passant d‚Äôun √©tat √† un autre. Un des concepts clefs de la PF est de supprimer cette notion de temps
(d‚Äô√©tat) ou du moins, de la minimiser. On va parler d‚Äô<strong>immuabilit√©</strong>.</p>
<p>Ce qui veut dire, exit les variables √† qui on assigne un entier puis un tableau‚Ä¶ un peu comme ceci
:</p>
<div class="expressive-code"><link rel="stylesheet" href="/_astro/ec.c5zw9.css"><script type="module" src="/_astro/ec.8zarh.js"></script><figure class="frame"><figcaption class="header"></figcaption><pre data-language="php"><code><div class="ec-line"><div class="code"><span style="--0:#89DDFF">&#x3C;?</span><span style="--0:#BABED8">php</span></div></div><div class="ec-line"><div class="code"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">wtf  </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">10</span><span style="--0:#89DDFF">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">wtf </span><span style="--0:#89DDFF">+=</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">5</span><span style="--0:#89DDFF">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#9FA4BC;--0fs:italic">// puis plus loin</span></div></div><div class="ec-line"><div class="code"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">wtf  </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">"</span><span style="--0:#C3E88D">cinq</span><span style="--0:#89DDFF">"</span><span style="--0:#89DDFF">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#9FA4BC;--0fs:italic">// et enfin</span></div></div><div class="ec-line"><div class="code"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">wtf  </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">new</span><span style="--0:#BABED8"> </span><span style="--0:#FFCB6B">Banana</span><span style="--0:#89DDFF">();</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="<?php$wtf  = 10;$wtf += 5;// puis plus loin$wtf  = &#x22;cinq&#x22;;// et enfin$wtf  = new Banana();"><div></div></button></div></figure></div>
<p>Il en va de m√™me pour les enrichissements de tableaux dans des boucles‚Ä¶ pensez <strong>stateless</strong> !</p>
<p>Dans PHP, le support des variables immuables n‚Äôest pas dingue-dingue. On va avoir :</p>
<ul>
<li><a href="http://php.net/manual/en/function.define.php">define</a> : qui associera √† un nom une constante au
moment de l‚Äôex√©cution;</li>
<li><a href="http://php.net/manual/en/language.oop5.constants.php">const</a> : pour les constantes de classe.
Attention, ces constantes ne peuvent pas √™tre d√©clar√©es de mani√®re dynamique (dans un if).</li>
</ul>
<p>Autant const est int√©ressante, mais define elle est diff√©rente car l‚Äôassignation se fait via une
fonction. D‚Äôun point de vue personnel, j‚Äôai du mal √† m‚Äôaffranchir du bon vieux <code>$maVariable</code>. Donc
une fois que ma variable est assign√©e, je n‚Äôy touche plus (mais rien ne m‚Äôassure que c‚Äôest vrai).</p>
<h2 id="immuabilit√©-et-port√©-des-variables">Immuabilit√© et port√© des variables</h2>
<p>En PHP, la port√©e d‚Äôune variable de s‚Äô√©tend pas jusque dans une fonction. Ce qui veut dire que si
vous tentez d‚Äôex√©cuter ce bout de code:</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="php"><code><div class="ec-line"><div class="code"><span style="--0:#89DDFF">&#x3C;?</span><span style="--0:#BABED8">php</span></div></div><div class="ec-line"><div class="code"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">ten </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">10</span><span style="--0:#89DDFF">;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA">function</span><span style="--0:#BABED8"> </span><span style="--0:#82AAFF">someFunction</span><span style="--0:#89DDFF">($</span><span style="--0:#BABED8">value</span><span style="--0:#89DDFF">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#89DDFF">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#89DDFF;--0fs:italic">return</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">value </span><span style="--0:#89DDFF">+</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">ten</span><span style="--0:#89DDFF">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#89DDFF">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF">someFunction</span><span style="--0:#89DDFF">(</span><span style="--0:#F78C6C">12</span><span style="--0:#89DDFF">);</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="<?php$ten = 10;function someFunction($value){    return $value + $ten;}someFunction(12);"><div></div></button></div></figure></div>
<p>Un message d‚Äôerreur de type notice renverra ceci: <strong>Notice: Undefined variable: ten in myscript.php
on line 5</strong>. En effet, la variable <code>$ten</code> n‚Äôest pas accessible dans le scope de la fonction (pas
comme en JS!).</p>
<p>Pour acc√©der √† la variable <code>$ten</code> √† l‚Äôint√©rieur de la fonction, il faudra utiliser le syst√®me de
Closure (une fonction lambda qui peut acc√©der √† des √©l√©ments ext√©rieurs √† son scope de cr√©ation) :</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="php"><code><div class="ec-line"><div class="code"><span style="--0:#89DDFF">&#x3C;?</span><span style="--0:#BABED8">php</span></div></div><div class="ec-line"><div class="code"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">ten </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">10</span><span style="--0:#89DDFF">;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">someFunction </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#C792EA">function</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">($</span><span style="--0:#BABED8">value</span><span style="--0:#89DDFF">)</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">use</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">($</span><span style="--0:#BABED8">ten</span><span style="--0:#89DDFF">)</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">ten </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">21</span><span style="--0:#89DDFF">;</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#89DDFF;--0fs:italic">return</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">value </span><span style="--0:#89DDFF">+</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">ten</span><span style="--0:#89DDFF">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#89DDFF">};</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF">echo</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">someFunction</span><span style="--0:#89DDFF">(</span><span style="--0:#F78C6C">12</span><span style="--0:#89DDFF">);</span><span style="--0:#BABED8"> </span><span style="--0:#9FA4BC;--0fs:italic">// 33</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF">echo</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">ten</span><span style="--0:#89DDFF">;</span><span style="--0:#BABED8">              </span><span style="--0:#9FA4BC;--0fs:italic">// 10</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="<?php$ten = 10;$someFunction = function ($value) use ($ten) {    $ten = 21;    return $value + $ten;};echo $someFunction(12); // 33echo $ten;              // 10"><div></div></button></div></figure></div>
<p>Note: la variable <code>$ten</code> est pass√©e par valeur. Pour la passer par r√©f√©rence, il faut utiliser le
symbole <strong>&#x26;</strong> comme ceci : <code>&#x26;$ten</code> lors de la d√©claration de la variable dans la fonction. Le
<code>echo $ten</code> renverra alors 21 mais surtout, le code perdra son immuabilit√©.</p>
<p>Vous noterez que c‚Äôest sur ce syst√®me de closure que s‚Äôappuient les frameworks
<a href="http://silex.sensiolabs.org/doc/master/usage.html#example-get-route">Silex</a> et
<a href="https://laravel.com/docs/5.1/routing#basic-routing">Laravel</a> pour leurs syst√®mes de routing.</p>
<h2 id="immuabilit√©-et-objets">Immuabilit√© et Objets</h2>
<p>Il n‚Äôy a rien de plus facile que de faire √©voluer une variable en PHP. Mais qu‚Äôen est-il pour nos
objets ?<br>
Et bien, le concept d‚Äôimmuabilit√© n‚Äôexiste pas non plus en PHP OO. On aurait vite tendance √† croire
qu‚Äôen mettant un attribut final √† une classe et en supprimant les setters, le tour est jou√©‚Ä¶ mais
en PHP, on peut appeler un constructeur autant de fois que l‚Äôon veut !</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="php"><code><div class="ec-line"><div class="code"><span style="--0:#89DDFF">&#x3C;?</span><span style="--0:#BABED8">php</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA">final</span><span style="--0:#BABED8"> </span><span style="--0:#C792EA">class</span><span style="--0:#BABED8"> </span><span style="--0:#FFCB6B">Fruit</span></div></div><div class="ec-line"><div class="code"><span style="--0:#89DDFF">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA">private</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">name</span><span style="--0:#89DDFF">;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA">public</span><span style="--0:#BABED8"> </span><span style="--0:#C792EA">function</span><span style="--0:#BABED8"> </span><span style="--0:#82AAFF">__construct</span><span style="--0:#89DDFF">($</span><span style="--0:#BABED8">name</span><span style="--0:#89DDFF">)</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#89DDFF">$this-></span><span style="--0:#BABED8">name </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">name</span><span style="--0:#89DDFF">;</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#89DDFF">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#89DDFF">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">fruit </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">new</span><span style="--0:#BABED8"> </span><span style="--0:#FFCB6B">Fruit</span><span style="--0:#89DDFF">(</span><span style="--0:#89DDFF">'</span><span style="--0:#C3E88D">Banana</span><span style="--0:#89DDFF">'</span><span style="--0:#89DDFF">);</span></div></div><div class="ec-line"><div class="code"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">fruit</span><span style="--0:#89DDFF">-></span><span style="--0:#82AAFF">__construct</span><span style="--0:#89DDFF">(</span><span style="--0:#89DDFF">'</span><span style="--0:#C3E88D">Kiwi</span><span style="--0:#89DDFF">'</span><span style="--0:#89DDFF">);</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="<?phpfinal class Fruit{    private $name;    public function __construct($name) {        $this->name = $name;    }}$fruit = new Fruit(&#x27;Banana&#x27;);$fruit->__construct(&#x27;Kiwi&#x27;);"><div></div></button></div></figure></div>
<p>On pourrait aussi rendre le constructeur priv√©‚Ä¶ mais avec la
<a href="http://php.net/manual/en/class.reflectionclass.php">r√©flexion</a> le concept d‚Äôimmuabilit√© en OO est
devenu compl√®tement impossible :</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="php"><code><div class="ec-line"><div class="code"><span style="--0:#89DDFF">&#x3C;?</span><span style="--0:#BABED8">php</span></div></div><div class="ec-line"><div class="code"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">fruit       </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">new</span><span style="--0:#BABED8"> </span><span style="--0:#FFCB6B">Fruit</span><span style="--0:#89DDFF">(</span><span style="--0:#89DDFF">'</span><span style="--0:#C3E88D">Banana</span><span style="--0:#89DDFF">'</span><span style="--0:#89DDFF">);</span></div></div><div class="ec-line"><div class="code"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">refObject   </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">new</span><span style="--0:#BABED8"> </span><span style="--0:#FFCB6B">ReflectionObject</span><span style="--0:#89DDFF">($</span><span style="--0:#BABED8">fruit</span><span style="--0:#89DDFF">);</span></div></div><div class="ec-line"><div class="code"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">refProperty </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">refObject</span><span style="--0:#89DDFF">-></span><span style="--0:#82AAFF">getProperty</span><span style="--0:#89DDFF">(</span><span style="--0:#89DDFF">'</span><span style="--0:#C3E88D">name</span><span style="--0:#89DDFF">'</span><span style="--0:#89DDFF">);</span></div></div><div class="ec-line"><div class="code"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">refProperty</span><span style="--0:#89DDFF">-></span><span style="--0:#82AAFF">setAccessible</span><span style="--0:#89DDFF">(true);</span></div></div><div class="ec-line"><div class="code"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">refProperty</span><span style="--0:#89DDFF">-></span><span style="--0:#82AAFF">setValue</span><span style="--0:#89DDFF">($</span><span style="--0:#BABED8">fruit</span><span style="--0:#89DDFF">,</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">'</span><span style="--0:#C3E88D">Apple</span><span style="--0:#89DDFF">'</span><span style="--0:#89DDFF">);</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="<?php$fruit       = new Fruit(&#x27;Banana&#x27;);$refObject   = new ReflectionObject($fruit);$refProperty = $refObject->getProperty(&#x27;name&#x27;);$refProperty->setAccessible(true);$refProperty->setValue($fruit, &#x27;Apple&#x27;);"><div></div></button></div></figure></div>
<p>Bref, l‚Äôimmuabilit√© est donc juste une histoire de conventions.</p>
<h2 id="r√©cursion">R√©cursion</h2>
<p><img alt="loop" width="190" height="355" loading="lazy" decoding="async" src="/_astro/loop.D6e0_UrI_SJ4kn.webp" ></p>
<p>Quand il y a dans votre code une notion de parent√© qui s‚Äô√©tend √† plusieurs niveaux, il peut-√™tre
int√©ressant de cr√©er des fonctions qui s‚Äôappelleront elles-m√™me. On va en trouver dans diff√©rents
cas d‚Äôusage : fonctions math√©matiques (exemple ci-apr√®s avec la suite de Fibonacci), rechercher un
fichier dans un file system‚Ä¶ C‚Äôest une bonne alternative aux bons vieux while/for bien crades (qui
utilisent des variables).</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="php"><code><div class="ec-line"><div class="code"><span style="--0:#89DDFF">&#x3C;?</span><span style="--0:#BABED8">php</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA">function</span><span style="--0:#BABED8"> </span><span style="--0:#82AAFF">fibonacci</span><span style="--0:#89DDFF">(</span><span style="--0:#F78C6C">int</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">n</span><span style="--0:#89DDFF">):</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">int</span></div></div><div class="ec-line"><div class="code"><span style="--0:#89DDFF">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#89DDFF;--0fs:italic">return</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">n </span><span style="--0:#89DDFF">&#x3C;</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">2</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">?</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">n </span><span style="--0:#89DDFF">:</span><span style="--0:#BABED8"> </span><span style="--0:#82AAFF">fibonacci</span><span style="--0:#89DDFF">($</span><span style="--0:#BABED8">n</span><span style="--0:#89DDFF">-</span><span style="--0:#F78C6C">1</span><span style="--0:#89DDFF">)</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">+</span><span style="--0:#BABED8"> </span><span style="--0:#82AAFF">fibonacci</span><span style="--0:#89DDFF">($</span><span style="--0:#BABED8">n</span><span style="--0:#89DDFF">-</span><span style="--0:#F78C6C">2</span><span style="--0:#89DDFF">);</span></div></div><div class="ec-line"><div class="code"><span style="--0:#89DDFF">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="<?phpfunction fibonacci(int $n): int{    return $n < 2 ? $n : fibonacci($n-1) + fibonacci($n-2);}"><div></div></button></div></figure></div>
<p>Notez cependant qu‚Äôutiliser la r√©cursion peut s‚Äô√©v√©rer assez gourmande en ressources si la fonction
s‚Äôappelle elle-m√™me un tr√®s grand nombre de fois. Attention aussi aux boucles infinies :) <em>(une fois
sur deux j‚Äôoublie le return et c‚Äôest la catastrophe !)</em></p>
<h2 id="fonction-de-premier-ordre-et-fonction-dordre-sup√©rieur">Fonction de premier ordre et fonction d‚Äôordre sup√©rieur</h2>
<p>PHP supporte depuis PHP 5.3 (2009), les fonctions de premi√®re classe <em>(first-class functions)</em>. Ce
qui veut dire que l‚Äôon peut attribuer une fonction √† une variable. Une fonction d‚Äôordre sup√©rieur
<em>(high order function)</em> est une fonction qui peut accepter au moins une fonction comme param√®tre
et/ou retourner une autre fonction (callable).</p>
<p>Exemple:</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="php"><code><div class="ec-line"><div class="code"><span style="--0:#89DDFF">&#x3C;?</span><span style="--0:#BABED8">php</span></div></div><div class="ec-line"><div class="code"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">addTen </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#C792EA">function</span><span style="--0:#89DDFF">($</span><span style="--0:#BABED8">item</span><span style="--0:#89DDFF">)</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#89DDFF;--0fs:italic">return</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">item </span><span style="--0:#89DDFF">+</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">10</span><span style="--0:#89DDFF">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#89DDFF">};</span></div></div><div class="ec-line"><div class="code"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">addTen</span><span style="--0:#89DDFF">(</span><span style="--0:#F78C6C">32</span><span style="--0:#89DDFF">);</span><span style="--0:#BABED8"> </span><span style="--0:#9FA4BC;--0fs:italic">//42</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="<?php$addTen = function($item) {    return $item + 10;};$addTen(32); //42"><div></div></button></div></figure></div>
<p>L‚Äôint√©r√™t de ce type de fonctions, c‚Äôest que vos fonctions seront plus composables, param√©trables et
r√©utilisables (et aussi faciles √† tester !). On pourra aussi facilement les coupler avec des
fonctions de type :</p>
<ul>
<li><a href="http://php.net/manual/en/function.array-map.php">array_map</a> : pour parcourir le tableau et
appliquer une transformation √† chacun des √©l√©ments. Conserve l‚Äôordre et ne supprime pas les
valeurs;</li>
<li><a href="http://php.net/manual/en/function.array-filter.php">array_filter</a> : pour supprimer des entr√©es.
Conserve l‚Äôordre et les valeurs;</li>
<li><a href="http://php.net/manual/en/function.array-reduce.php">array_reduce</a> : pour r√©duire le tableau √† une
seule valeur.</li>
</ul>
<p>Exemple:</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="php"><code><div class="ec-line"><div class="code"><span style="--0:#89DDFF">&#x3C;?</span><span style="--0:#BABED8">php</span></div></div><div class="ec-line"><div class="code"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">input </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">[</span><span style="--0:#F78C6C">1</span><span style="--0:#89DDFF">,</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">2</span><span style="--0:#89DDFF">,</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">3</span><span style="--0:#89DDFF">,</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">4</span><span style="--0:#89DDFF">,</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">5</span><span style="--0:#89DDFF">,</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">6</span><span style="--0:#89DDFF">];</span></div></div><div class="ec-line"><div class="code"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">inputAddTen </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#82AAFF">array_map</span><span style="--0:#89DDFF">($</span><span style="--0:#BABED8">addTen</span><span style="--0:#89DDFF">,</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">input</span><span style="--0:#89DDFF">);</span><span style="--0:#BABED8"> </span><span style="--0:#9FA4BC;--0fs:italic">// [11, 12, 13, 14, 15, 16]</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="<?php$input = [1, 2, 3, 4, 5, 6];$inputAddTen = array_map($addTen, $input); // [11, 12, 13, 14, 15, 16]"><div></div></button></div></figure></div>
<p>Si vous √™tes perdus, voici une petite anti-s√®che:</p>
<blockquote class="twitter-tweet" data-lang="fr"><p lang="en" dir="ltr">Map/filter/reduce in a tweet:<br><br>map([üåΩ, üêÆ, üêî], cook)<br>=> [üçø, üçî, üç≥]<br><br>filter([üçø, üçî, üç≥], isVegetarian)<br>=>  [üçø, üç≥]<br><br>reduce([üçø, üç≥], eat)<br>=> üí©</p>‚Äî Steven Luscher (@steveluscher) <a href="https://twitter.com/steveluscher/status/741089564329054208">10 juin 2016</a></blockquote>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
<p>Autre utilisation des fonctions d‚Äôordre sup√©rieur : cr√©er une fonction qui retourne une fonction.</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="php"><code><div class="ec-line"><div class="code"><span style="--0:#89DDFF">&#x3C;?</span><span style="--0:#BABED8">php</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA">function</span><span style="--0:#BABED8"> </span><span style="--0:#82AAFF">greaterThan</span><span style="--0:#89DDFF">(</span><span style="--0:#F78C6C">int</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">n</span><span style="--0:#89DDFF">):</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">callable</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#89DDFF;--0fs:italic">return</span><span style="--0:#BABED8"> </span><span style="--0:#C792EA">function</span><span style="--0:#89DDFF">(</span><span style="--0:#F78C6C">int</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">m</span><span style="--0:#89DDFF">)</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">use</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">(</span><span style="--0:#BABED8">int </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">n</span><span style="--0:#89DDFF">):</span><span style="--0:#BABED8"> </span><span style="--0:#FFCB6B">boolean</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#89DDFF;--0fs:italic">return</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">m </span><span style="--0:#89DDFF">></span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">n</span><span style="--0:#89DDFF">;</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#89DDFF">};</span></div></div><div class="ec-line"><div class="code"><span style="--0:#89DDFF">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">greaterThan10 </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#82AAFF">greaterThan</span><span style="--0:#89DDFF">(</span><span style="--0:#F78C6C">10</span><span style="--0:#89DDFF">);</span></div></div><div class="ec-line"><div class="code"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">greaterThan10</span><span style="--0:#89DDFF">(</span><span style="--0:#F78C6C">11</span><span style="--0:#89DDFF">);</span><span style="--0:#BABED8"> </span><span style="--0:#9FA4BC;--0fs:italic">//true</span></div></div><div class="ec-line"><div class="code"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">greaterThan10</span><span style="--0:#89DDFF">(</span><span style="--0:#F78C6C">9</span><span style="--0:#89DDFF">);</span><span style="--0:#BABED8">  </span><span style="--0:#9FA4BC;--0fs:italic">//false</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="<?phpfunction greaterThan(int $n): callable {    return function(int $m) use (int $n): boolean {        return $m > $n;    };}$greaterThan10 = greaterThan(10);$greaterThan10(11); //true$greaterThan10(9);  //false"><div></div></button></div></figure></div>
<p>Bon par contre <strong>deux points noirs</strong> :</p>
<ul>
<li>dans ces fonctions, la position du callback est diff√©rente d‚Äôune fonction √† l‚Äôautre :
array_filter($array, <strong>$callback</strong>) et array_map(**$callback**, $array);</li>
<li>le cha√Ænage n‚Äôest pas possible et sa variante n‚Äôest vraiment pas sexy :</li>
</ul>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="php"><code><div class="ec-line"><div class="code"><span style="--0:#89DDFF">&#x3C;?</span><span style="--0:#BABED8">php</span></div></div><div class="ec-line"><div class="code"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">addTen </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#C792EA">function</span><span style="--0:#89DDFF">($</span><span style="--0:#BABED8">item</span><span style="--0:#89DDFF">)</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#89DDFF;--0fs:italic">return</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">item </span><span style="--0:#89DDFF">+</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">10</span><span style="--0:#89DDFF">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#89DDFF">};</span></div></div><div class="ec-line"><div class="code"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">isEven </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#C792EA">function</span><span style="--0:#89DDFF">($</span><span style="--0:#BABED8">v</span><span style="--0:#89DDFF">)</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#89DDFF;--0fs:italic">return</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">v</span><span style="--0:#89DDFF">%</span><span style="--0:#F78C6C">2</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">==</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">0</span></div></div><div class="ec-line"><div class="code"><span style="--0:#89DDFF">};</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF">array_map</span><span style="--0:#89DDFF">($</span><span style="--0:#BABED8">addTen</span><span style="--0:#89DDFF">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">          </span><span style="--0:#82AAFF">array_filter</span><span style="--0:#89DDFF">([</span><span style="--0:#F78C6C">1</span><span style="--0:#89DDFF">,</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">2</span><span style="--0:#89DDFF">,</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">3</span><span style="--0:#89DDFF">,</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">4</span><span style="--0:#89DDFF">,</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">5</span><span style="--0:#89DDFF">,</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">6</span><span style="--0:#89DDFF">],</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">isEven</span><span style="--0:#89DDFF">));</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="<?php$addTen = function($item) {    return $item + 10;};$isEven = function($v) {    return $v%2 == 0};array_map($addTen,          array_filter([1, 2, 3, 4, 5, 6], $isEven));"><div></div></button></div></figure></div>
<h2 id="fonctions-pures">Fonctions pures</h2>
<p>La notion de puret√© est tr√®s importante car elle permet d‚Äô√©viter les effets de bord <em>(side
effects)</em>. Elle devra donc renvoyer toujours le m√™me lorsqu‚Äôon l‚Äôappelle avec les m√™mes arguments.
Elle ne doit donc pas interagir avec des devices d‚ÄôI/O ou m√™me des √©l√©ments m√©moire.</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="php"><code><div class="ec-line"><div class="code"><span style="--0:#89DDFF">&#x3C;?</span><span style="--0:#BABED8">php</span></div></div><div class="ec-line"><div class="code"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">myNumber </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">1</span><span style="--0:#89DDFF">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA">function</span><span style="--0:#BABED8"> </span><span style="--0:#82AAFF">add</span><span style="--0:#89DDFF">($</span><span style="--0:#BABED8">number</span><span style="--0:#89DDFF">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#89DDFF">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA">global</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">myNumber</span><span style="--0:#89DDFF">;</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#89DDFF;--0fs:italic">return</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">myNumber </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">myNumber </span><span style="--0:#89DDFF">+</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">number</span><span style="--0:#89DDFF">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#89DDFF">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF">echo</span><span style="--0:#BABED8"> </span><span style="--0:#82AAFF">add</span><span style="--0:#89DDFF">(</span><span style="--0:#F78C6C">5</span><span style="--0:#89DDFF">);</span><span style="--0:#BABED8"> </span><span style="--0:#9FA4BC;--0fs:italic">//6</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF">echo</span><span style="--0:#BABED8"> </span><span style="--0:#82AAFF">add</span><span style="--0:#89DDFF">(</span><span style="--0:#F78C6C">5</span><span style="--0:#89DDFF">);</span><span style="--0:#BABED8"> </span><span style="--0:#9FA4BC;--0fs:italic">//11</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="<?php$myNumber = 1;function add($number){    global $myNumber;    return $myNumber = $myNumber + $number;}echo add(5); //6echo add(5); //11"><div></div></button></div></figure></div>
<p>Cette fonction n‚Äôest pas pure car elle ne renvoie pas toujours le m√™me r√©sultat pour le m√™me
param√®tre d‚Äôentr√©e.</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="php"><code><div class="ec-line"><div class="code"><span style="--0:#89DDFF">&#x3C;?</span><span style="--0:#BABED8">php</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA">function</span><span style="--0:#BABED8"> </span><span style="--0:#82AAFF">sum</span><span style="--0:#89DDFF">($</span><span style="--0:#BABED8">a</span><span style="--0:#89DDFF">,</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">b</span><span style="--0:#89DDFF">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#89DDFF">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">logger </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$this-></span><span style="--0:#82AAFF">get</span><span style="--0:#89DDFF">(</span><span style="--0:#89DDFF">'</span><span style="--0:#C3E88D">logger</span><span style="--0:#89DDFF">'</span><span style="--0:#89DDFF">);</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">logger</span><span style="--0:#89DDFF">-></span><span style="--0:#82AAFF">info</span><span style="--0:#89DDFF">(</span><span style="--0:#89DDFF">'</span><span style="--0:#C3E88D">sum</span><span style="--0:#89DDFF">'</span><span style="--0:#89DDFF">,</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">a</span><span style="--0:#89DDFF">,</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">b</span><span style="--0:#89DDFF">);</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#89DDFF;--0fs:italic">return</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">a </span><span style="--0:#89DDFF">+</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">b</span><span style="--0:#89DDFF">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#89DDFF">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF">sum</span><span style="--0:#89DDFF">(</span><span style="--0:#F78C6C">3</span><span style="--0:#89DDFF">,</span><span style="--0:#F78C6C">7</span><span style="--0:#89DDFF">);</span><span style="--0:#BABED8"> </span><span style="--0:#9FA4BC;--0fs:italic">//10</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF">sum</span><span style="--0:#89DDFF">(</span><span style="--0:#F78C6C">3</span><span style="--0:#89DDFF">,</span><span style="--0:#F78C6C">7</span><span style="--0:#89DDFF">);</span><span style="--0:#BABED8"> </span><span style="--0:#9FA4BC;--0fs:italic">//10</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="<?phpfunction sum($a, $b){    $logger = $this->get(&#x27;logger&#x27;);    $logger->info(&#x27;sum&#x27;, $a, $b);    return $a + $b;}sum(3,7); //10sum(3,7); //10"><div></div></button></div></figure></div>
<p>Cette fonction n‚Äôest en effet pas pure car elle interagit avec un √©l√©ment d‚ÄôI/O, √† savoir : le
logger. Bon du coup si on supprime le logger, on peut dire que cette fonction est pure. Vous l‚Äôaurez
compris, une fonction pure va de pair avec l‚Äôacronyme <em>KISS (Keep It Simple, Stupid)</em>. Comme vu dans
la partie sur l‚Äôimmuabilit√©, PHP nous prot√®ge pas mal des effets de bord. Essayez donc au maximum de
mettre un maximum de fonctions pures dans votre code et de limiter celles avec des effets de bord.
Vous gagnerez grandement en testabilit√© !</p>
<p>Pour les d√©veloppeurs OO, il faudra aussi √©viter de trop jouer avec le <code>$this</code>.</p>
<h2 id="m√©moization">M√©moization</h2>
<p>Parfois on a des calculs assez cons√©quents au sein d‚Äôune fonction et cette derni√®re est susceptible
d‚Äô√™tre rappel√©e ult√©rieurement avec les m√™mes param√®tres. C‚Äôest √† ce moment que le concept de
m√©moization entre en jeu. Pour √©viter de patienter une deuxi√®me fois pour un calcul d√©j√† fait, il
est possible de cr√©er un <strong>pseudo-cache √† l‚Äôint√©rieur m√™me de votre fonction</strong>.</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="php"><code><div class="ec-line"><div class="code"><span style="--0:#89DDFF">&#x3C;?</span><span style="--0:#BABED8">php</span></div></div><div class="ec-line"><div class="code"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">memoMD5 </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#C792EA">function</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">($</span><span style="--0:#BABED8">value</span><span style="--0:#89DDFF">)</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#C792EA">static</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">cache </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">[];</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#89DDFF;--0fs:italic">if</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">(</span><span style="--0:#82AAFF">isset</span><span style="--0:#89DDFF">($</span><span style="--0:#BABED8">cache</span><span style="--0:#89DDFF">[$</span><span style="--0:#BABED8">value</span><span style="--0:#89DDFF">]))</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF">echo</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">"</span><span style="--0:#C3E88D">memoize - </span><span style="--0:#89DDFF">"</span><span style="--0:#89DDFF">;</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#89DDFF;--0fs:italic">return</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">cache</span><span style="--0:#89DDFF">[$</span><span style="--0:#BABED8">value</span><span style="--0:#89DDFF">];</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#89DDFF">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF">sleep</span><span style="--0:#89DDFF">(</span><span style="--0:#F78C6C">5</span><span style="--0:#89DDFF">);</span><span style="--0:#BABED8"> </span><span style="--0:#9FA4BC;--0fs:italic">//imaginez ici un long calcul</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">cache</span><span style="--0:#89DDFF">[$</span><span style="--0:#BABED8">value</span><span style="--0:#89DDFF">]</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#82AAFF">md5</span><span style="--0:#89DDFF">($</span><span style="--0:#BABED8">value</span><span style="--0:#89DDFF">);</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#89DDFF;--0fs:italic">return</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">cache</span><span style="--0:#89DDFF">[$</span><span style="--0:#BABED8">value</span><span style="--0:#89DDFF">];</span></div></div><div class="ec-line"><div class="code"><span style="--0:#89DDFF">};</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF">echo</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">memoMD5</span><span style="--0:#89DDFF">(</span><span style="--0:#F78C6C">1</span><span style="--0:#89DDFF">);</span><span style="--0:#BABED8"> </span><span style="--0:#9FA4BC;--0fs:italic">// affiche apr√®s ~5s: c4ca4238a0b923820dcc509a6f75849b</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF">echo</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">memoMD5</span><span style="--0:#89DDFF">(</span><span style="--0:#F78C6C">2</span><span style="--0:#89DDFF">);</span><span style="--0:#BABED8"> </span><span style="--0:#9FA4BC;--0fs:italic">// affiche apr√®s ~5s: c81e728d9d4c2f636f067f89cc14862c</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF">echo</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">memoMD5</span><span style="--0:#89DDFF">(</span><span style="--0:#F78C6C">1</span><span style="--0:#89DDFF">);</span><span style="--0:#BABED8"> </span><span style="--0:#9FA4BC;--0fs:italic">// affiche apr√®s ~0s: memoize - c4ca4238a0b923820dcc509a6f75849b</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="<?php$memoMD5 = function ($value) {    static $cache = [];    if (isset($cache[$value])) {        echo &#x22;memoize - &#x22;;        return $cache[$value];    }    sleep(5); //imaginez ici un long calcul    $cache[$value] = md5($value);    return $cache[$value];};echo $memoMD5(1); // affiche apr√®s ~5s: c4ca4238a0b923820dcc509a6f75849becho $memoMD5(2); // affiche apr√®s ~5s: c81e728d9d4c2f636f067f89cc14862cecho $memoMD5(1); // affiche apr√®s ~0s: memoize - c4ca4238a0b923820dcc509a6f75849b"><div></div></button></div></figure></div>
<h2 id="le-mot-de-la-fin">Le mot de la fin</h2>
<p>Je n‚Äôai pas abord√© tous les concepts de la PF dans cet article. Sachez qu‚Äôil existe des solutions
<em>full-PHP</em> qui impl√©mentent les concepts de <a href="https://github.com/ircmaxell/monad-php">monad</a>,
<a href="https://github.com/matteosister/php-curry">currying</a>‚Ä¶</p>
<p>PHP n‚Äôest pas vraiment le meilleur langage qui se pr√™te √† la programmation fonctionnelle. √âcrire
avec un style fonctionnel ne sera pas aussi propre √† lire qu‚Äôen JavaScript (surtout depuis ES6),
Scala, Haskell‚Ä¶ Mais ce n‚Äôest pas pour autant qu‚Äôil faut le laisser de c√¥t√© ce paradigme.</p>
<p>Par exemple, entre ces deux exemples, je pr√©f√®re de loin celui qui adopte un style
fonctionnel¬†:</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="php"><code><div class="ec-line"><div class="code"><span style="--0:#89DDFF">&#x3C;?</span><span style="--0:#BABED8">php</span></div></div><div class="ec-line"><div class="code"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">input </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">[</span><span style="--0:#F78C6C">1</span><span style="--0:#89DDFF">,</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">2</span><span style="--0:#89DDFF">,</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">3</span><span style="--0:#89DDFF">,</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">4</span><span style="--0:#89DDFF">,</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">5</span><span style="--0:#89DDFF">,</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">6</span><span style="--0:#89DDFF">];</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#9FA4BC;--0fs:italic">// style proc√©dural</span></div></div><div class="ec-line"><div class="code"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">odds </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">[];</span></div></div><div class="ec-line"><div class="code"><span style="--0:#89DDFF;--0fs:italic">for</span><span style="--0:#89DDFF">($</span><span style="--0:#BABED8">i</span><span style="--0:#89DDFF">=</span><span style="--0:#F78C6C">0</span><span style="--0:#89DDFF">;</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">i </span><span style="--0:#89DDFF">&#x3C;</span><span style="--0:#BABED8"> </span><span style="--0:#82AAFF">count</span><span style="--0:#89DDFF">($</span><span style="--0:#BABED8">input</span><span style="--0:#89DDFF">);</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">i</span><span style="--0:#89DDFF">++)</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#89DDFF;--0fs:italic">if</span><span style="--0:#89DDFF">($</span><span style="--0:#BABED8">input</span><span style="--0:#89DDFF">[$</span><span style="--0:#BABED8">i</span><span style="--0:#89DDFF">]</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">%</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">2</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">!=</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">0</span><span style="--0:#89DDFF">)</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">odds</span><span style="--0:#89DDFF">[]</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">input</span><span style="--0:#89DDFF">[$</span><span style="--0:#BABED8">i</span><span style="--0:#89DDFF">];</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#89DDFF">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#89DDFF">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#9FA4BC;--0fs:italic">// style fonctionnel</span></div></div><div class="ec-line"><div class="code"><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">odds </span><span style="--0:#89DDFF">=</span><span style="--0:#BABED8"> </span><span style="--0:#82AAFF">array_filter</span><span style="--0:#89DDFF">($</span><span style="--0:#BABED8">input</span><span style="--0:#89DDFF">,</span><span style="--0:#BABED8"> </span><span style="--0:#C792EA">function</span><span style="--0:#89DDFF">($</span><span style="--0:#BABED8">v</span><span style="--0:#89DDFF">)</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#89DDFF;--0fs:italic">return</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">$</span><span style="--0:#BABED8">v </span><span style="--0:#89DDFF">%</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">2</span><span style="--0:#BABED8"> </span><span style="--0:#89DDFF">!==</span><span style="--0:#BABED8"> </span><span style="--0:#F78C6C">0</span><span style="--0:#89DDFF">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#89DDFF">});</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="<?php$input = [1, 2, 3, 4, 5, 6];// style proc√©dural$odds = [];for($i=0; $i < count($input); $i++) {    if($input[$i] % 2 != 0) {        $odds[] = $input[$i];    }}// style fonctionnel$odds = array_filter($input, function($v) {    return $v % 2 !== 0;});"><div></div></button></div></figure></div>
<p>Vous am√©liorerez grandement la qualit√© de votre en utilisant des variables immuables et des
fonctions pures. La r√©cursion est tr√®s utile, m√™me si elle peut s‚Äôav√©rer triviale lors de d√©bug.
Pour le reste, c‚Äôest au cas par cas.</p>
<p><strong>Mais pourquoi est-ce si √©tranger en PHP ?</strong></p>
<p>Adopter un style fonctionnel est n√©cessaire dans un langage o√π les zones m√©moires peuvent √™tre
partag√©es. C‚Äôest d‚Äôailleurs pour cel√† que l‚Äôimmuabilit√© et la puret√© des fonctions sont si
primordiales.<br>
PHP a √©t√© con√ßu pour afficher des pages web en un temps inf√©rieur √† 1s. Une fois que la page est
charg√©e, toute la m√©moire qui a √©t√© n√©cessaire pour afficher la page dispara√Æt. On est dans une
<strong>Share Nothing Architecture</strong>, ce qui veut dire que chaque processus qui est charg√© d‚Äôafficher une
page en PHP ne va pas partager sa m√©moire avec un autre (pas comme en Java o√π certains threads
partagent de la m√©moire).<br>
C‚Äôest pour ces raisons que l‚Äôon entend si peu parler de Programmation Fonctionnelle en PHP.</p> <div> <hr> <h2 class="dark:text-gray-100">About the author</h2> <div class="flex flex-col md:flex-row items-center gap-5 md:gap-8 mt-5"> <div class="relative flex-shrink-0 h-32 w-32"> <img src="/_astro/profile-picture.CAXSHk1R_1lrNb9.webp" class="not-prose h-32 w-32 object-cover rounded-full" loading="eager" alt="Maxence Poutord" width="128" height="128" decoding="async" class="not-prose h-32 w-32 object-cover rounded-full"> </div> <div> <p class="!mt-0 pb-2">
Hey, I'm Maxence Poutord, a passionate software engineer. In my
        day-to-day job, I'm working as a senior front-end engineer at Orderfox.
        When I'm not working, you can find me travelling the world or cooking.
</p> <a class="not-prose group inline-flex rounded border
    font-semibold no-underline
    transition-colors duration-200 ease-in-out px-3 py-2
    border-blue-500 bg-blue-500 text-white
    hover:border-blue-500 hover:bg-white hover:text-blue-500" rel="noopener" target="_blank" href="https://bsky.app/profile/maxpou.fr"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" role="img" aria-label="Bluesky" class="h-6 w-6 pr-2 pt-1 fill-white group-hover:fill-blue-600" width="24" height="24"><path d="M111.8 62.2C170.2 105.9 233 194.7 256 242.4c23-47.6 85.8-136.4 144.2-180.2c42.1-31.6 110.3-56 110.3 21.8c0 15.5-8.9 130.5-14.1 149.2C478.2 298 412 314.6 353.1 304.5c102.9 17.5 129.1 75.5 72.5 133.5c-107.4 110.2-154.3-27.6-166.3-62.9l0 0c-1.7-4.9-2.6-7.8-3.3-7.8s-1.6 3-3.3 7.8l0 0c-12 35.3-59 173.1-166.3 62.9c-56.5-58-30.4-116 72.5-133.5C100 314.6 33.8 298 15.7 233.1C10.4 214.4 1.5 99.4 1.5 83.9c0-77.8 68.2-53.4 110.3-21.8z"></path></svg>
Follow me on Bluesky
 </a> </div> </div> </div> <section class="mx-auto mt-12"> <script src="https://giscus.app/client.js" data-repo="maxpou/maxpou.fr" data-repo-id="MDEwOlJlcG9zaXRvcnk0MTg1MTQyOQ==" data-category="General" data-category-id="MDE4OkRpc2N1c3Npb25DYXRlZ29yeTMyMzMwNzY1" data-mapping="og:title" data-strict="0" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="bottom" data-theme="preferred_color_scheme" data-lang="fr" data-loading="lazy" crossorigin="anonymous" async></script> </section> <script>
  function updateGiscusTheme() {
    const theme = document.documentElement.classList.contains('dark') ? 'dark' : 'light';
    const iframe = document.querySelector('iframe.giscus-frame');
    if (!iframe) return;
    iframe.contentWindow.postMessage({ giscus: { setConfig: { theme }}}, 'https://giscus.app');
  }

  const observer = new MutationObserver(updateGiscusTheme);
  observer.observe(document.documentElement, { attributes: true, attributeFilter: ['class'] });
  
  window.onload = () => {
    updateGiscusTheme();
  };
</script>  </div>  <div> <h2 class="text-2xl underline mt-12 font-bold dark:text-mainYellow">
Recommended posts
</h2> <div class="grid grid-cols-1 gap-6 md:grid-cols-2 mt-6"> <a title="Git: Cheat Sheet (advanced)" href="/blog/git-cheat-sheet/" class="ease flex flex-col rounded-lg bg-white transition duration-300 dark:bg-gray-500 hover:translate-y-0.5 shadow-md  hover:shadow-xl group"> <picture> <source srcset="/_astro/git-toolbox.CgO6v5Gs_Z1rGu6b.webp" type="image/webp"><source srcset="/_astro/git-toolbox.CgO6v5Gs_Z1K7gBY.avif" type="image/avif"><source srcset="/_astro/git-toolbox.CgO6v5Gs_1vB13C.jpeg" type="image/jpeg">  <img src="/_astro/git-toolbox.CgO6v5Gs_1qPBcj.png" alt="A Git Cheat Sheet that focuses on Essential Commands for Experienced Developers." loading="lazy" decoding="async" class="h-56 w-full rounded-b-none rounded-t-lg object-cover transition" width="420" height="224" class="h-56 w-full rounded-b-none rounded-t-lg object-cover transition"> </picture> <div class="p-4"> <header class="text-xl text-gray-700 dark:text-gray-100">  <span class="inline"> <span class="from-blue-100 to-blue-100 text-dark dark:bg-none font-semibold
           bg-gradient-to-r bg-[length:0px_10px] bg-left-bottom bg-no-repeat transition-[background-size] duration-500 hover:bg-[length:100%_3px] group-hover:bg-[length:100%_10px]">  Git: Cheat Sheet (advanced) </span> </span> </header> <p class="date text-gray-400 dark:text-gray-100 text-sm"> A Git Cheat Sheet that focuses on Essential Commands for Experienced Developers. </p> </div> </a><a title="Lessons Learned by Maintaining a Large Codebase" href="/blog/lesson-learned-maintaining-large-vue-js-codebase/" class="ease flex flex-col rounded-lg bg-white transition duration-300 dark:bg-gray-500 hover:translate-y-0.5 shadow-md  hover:shadow-xl group"> <picture> <source srcset="/_astro/cover.BXN6JK0j_Zp6a2E.webp" type="image/webp"><source srcset="/_astro/cover.BXN6JK0j_Z1CCOqQ.avif" type="image/avif"><source srcset="/_astro/cover.BXN6JK0j_Z1PLUe6.jpeg" type="image/jpeg">  <img src="/_astro/cover.BXN6JK0j_ZrswL4.jpg" alt="I've been maintaining a massive Vue.js codebase for the last 3 years. Here are 9 lessons I've learned along the way." loading="lazy" decoding="async" class="h-56 w-full rounded-b-none rounded-t-lg object-cover transition" width="420" height="224" class="h-56 w-full rounded-b-none rounded-t-lg object-cover transition"> </picture> <div class="p-4"> <header class="text-xl text-gray-700 dark:text-gray-100">  <span class="inline"> <span class="from-blue-100 to-blue-100 text-dark dark:bg-none font-semibold
           bg-gradient-to-r bg-[length:0px_10px] bg-left-bottom bg-no-repeat transition-[background-size] duration-500 hover:bg-[length:100%_3px] group-hover:bg-[length:100%_10px]">  Lessons Learned by Maintaining a Large Codebase </span> </span> </header> <p class="date text-gray-400 dark:text-gray-100 text-sm"> I&#39;ve been maintaining a massive Vue.js codebase for the last 3 years. Here are 9 lessons I&#39;ve learned along the way. </p> </div> </a> </div> </div>  </div> </article> <section class="mt-12"><h2 class="text-2xl font-bold mb-6 dark:text-white">Related Posts</h2><div class="not-prose grid grid-cols-1 gap-6 md:grid-cols-3"><a title="vagrant up et dites adieu √† WAMP !" href="/blog/vagrant/" class="ease flex flex-col rounded-lg bg-white transition duration-300 dark:bg-gray-500 hover:translate-y-0.5 shadow-md  hover:shadow-xl group"> <picture> <source srcset="/_astro/logo.BwSswIFj_Z1nKlOA.webp" type="image/webp"><source srcset="/_astro/logo.BwSswIFj_Z1nbHeT.avif" type="image/avif"><source srcset="/_astro/logo.BwSswIFj_Z24afiM.jpeg" type="image/jpeg">  <img src="/_astro/logo.BwSswIFj_Zsvuor.png" alt="Pr√©sentation et installation de Vagrant" loading="lazy" decoding="async" class="h-56 w-full rounded-b-none rounded-t-lg object-cover transition" width="420" height="224" class="h-56 w-full rounded-b-none rounded-t-lg object-cover transition"> </picture> <div class="p-4"> <header class="text-xl text-gray-700 dark:text-gray-100"> <p class="text-gray-400 dark:text-gray-100 text-sm"> <time datetime="2015-06-13T00:00:00.000Z"> 13 June 2015 </time> </p> <span class="inline"> <span class="from-blue-100 to-blue-100 text-dark dark:bg-none font-semibold
           bg-gradient-to-r bg-[length:0px_10px] bg-left-bottom bg-no-repeat transition-[background-size] duration-500 hover:bg-[length:100%_3px] group-hover:bg-[length:100%_10px]"> <img src="/_astro/FrFlag.DNsUAno6.png" alt="French post" class="inline pb-[6px] pr-1" loading="lazy"> vagrant up et dites adieu √† WAMP ! </span> </span> </header> <p class="date text-gray-400 dark:text-gray-100 text-sm"> Pr√©sentation et installation de Vagrant </p> </div> </a><a title="Utilisez un framework PHP" href="/blog/utilisez-un-framework-php/" class="ease flex flex-col rounded-lg bg-white transition duration-300 dark:bg-gray-500 hover:translate-y-0.5 shadow-md  hover:shadow-xl group"> <picture> <source srcset="/_astro/abstract-4.c0E__Wcj_11hVeH.webp" type="image/webp"><source srcset="/_astro/abstract-4.c0E__Wcj_Zi63mc.avif" type="image/avif"><source srcset="/_astro/abstract-4.c0E__Wcj_CAnkk.jpeg" type="image/jpeg">  <img src="/_astro/abstract-4.c0E__Wcj_ZuL5FB.jpg" alt="Cover image for Utilisez un framework PHP" loading="lazy" decoding="async" class="h-56 w-full rounded-b-none rounded-t-lg object-cover transition" width="420" height="224" class="h-56 w-full rounded-b-none rounded-t-lg object-cover transition"> </picture> <div class="p-4"> <header class="text-xl text-gray-700 dark:text-gray-100"> <p class="text-gray-400 dark:text-gray-100 text-sm"> <time datetime="2015-07-18T00:00:00.000Z"> 18 July 2015 </time> </p> <span class="inline"> <span class="from-blue-100 to-blue-100 text-dark dark:bg-none font-semibold
           bg-gradient-to-r bg-[length:0px_10px] bg-left-bottom bg-no-repeat transition-[background-size] duration-500 hover:bg-[length:100%_3px] group-hover:bg-[length:100%_10px]"> <img src="/_astro/FrFlag.DNsUAno6.png" alt="French post" class="inline pb-[6px] pr-1" loading="lazy"> Utilisez un framework PHP </span> </span> </header> <p class="date text-gray-400 dark:text-gray-100 text-sm">  </p> </div> </a><a title="Dealing with Enum in a Symfony App with Doctrine2 as ORM" href="/blog/dealing-with-enum-symfony-doctrine/" class="ease flex flex-col rounded-lg bg-white transition duration-300 dark:bg-gray-500 hover:translate-y-0.5 shadow-md  hover:shadow-xl group"> <picture> <source srcset="/_astro/abstract-1.DRH2bYFz_1slidP.webp" type="image/webp"><source srcset="/_astro/abstract-1.DRH2bYFz_1hJE1m.avif" type="image/avif"><source srcset="/_astro/abstract-1.DRH2bYFz_ZoRDgY.jpeg" type="image/jpeg">  <img src="/_astro/abstract-1.DRH2bYFz_Z3Tn1p.jpg" alt="Cover image for Dealing with Enum in a Symfony App with Doctrine2 as ORM" loading="lazy" decoding="async" class="h-56 w-full rounded-b-none rounded-t-lg object-cover transition" width="420" height="224" class="h-56 w-full rounded-b-none rounded-t-lg object-cover transition"> </picture> <div class="p-4"> <header class="text-xl text-gray-700 dark:text-gray-100"> <p class="text-gray-400 dark:text-gray-100 text-sm"> <time datetime="2016-08-04T00:00:00.000Z"> 4 August 2016 </time> </p> <span class="inline"> <span class="from-blue-100 to-blue-100 text-dark dark:bg-none font-semibold
           bg-gradient-to-r bg-[length:0px_10px] bg-left-bottom bg-no-repeat transition-[background-size] duration-500 hover:bg-[length:100%_3px] group-hover:bg-[length:100%_10px]">  Dealing with Enum in a Symfony App with Doctrine2 as ORM </span> </span> </header> <p class="date text-gray-400 dark:text-gray-100 text-sm">  </p> </div> </a></div></section>  </main> <footer class="bg-blue-50 dark:bg-gray-600 dark:text-white w-full mx-auto pb-0" data-astro-cid-sz7xmlte> <div class="m-auto flex w-[1024px] max-w-full flex-wrap justify-between" data-astro-cid-sz7xmlte> <div class="w-full pb-4 md:w-auto flex-auto" data-astro-cid-sz7xmlte> <p class="pb-1 font-bold" data-astro-cid-sz7xmlte>
&copy; 2014 - 2025 - Maxence Poutord </p> <p data-astro-cid-sz7xmlte>Built with Astro, Tailwind and some ‚òïÔ∏è</p> <p data-astro-cid-sz7xmlte>
Hosted with <span class="text-red-500" data-astro-cid-sz7xmlte>‚ù§</span> by <a class="hover:text-gray-700 hover:underline dark:hover:text-mainYellow" href="https://github.com/maxpou/maxpou.fr" data-astro-cid-sz7xmlte>GitHub</a>.
</p> </div> <div class="flex-auto" data-astro-cid-sz7xmlte> <h3 class="pb-1 font-bold" data-astro-cid-sz7xmlte>Explore</h3> <ul data-astro-cid-sz7xmlte> <li data-astro-cid-sz7xmlte> <a href="/uses" target="_self" class="hover:text-gray-700 hover:underline dark:hover:text-mainYellow" data-astro-cid-sz7xmlte> Uses </a> </li><li data-astro-cid-sz7xmlte> <a href="/recipes" target="_self" class="hover:text-gray-700 hover:underline dark:hover:text-mainYellow" data-astro-cid-sz7xmlte> Recipes (kitchen) </a> </li><li data-astro-cid-sz7xmlte> <a href="/about" target="_self" class="hover:text-gray-700 hover:underline dark:hover:text-mainYellow" data-astro-cid-sz7xmlte> About </a> </li><li data-astro-cid-sz7xmlte> <a href="/cv" target="_blank" class="hover:text-gray-700 hover:underline dark:hover:text-mainYellow" data-astro-cid-sz7xmlte> Resume (cv) </a> </li><li data-astro-cid-sz7xmlte> <a href="/readme" target="_self" class="hover:text-gray-700 hover:underline dark:hover:text-mainYellow" data-astro-cid-sz7xmlte> Readme </a> </li> </ul> </div> <div class="flex-auto" data-astro-cid-sz7xmlte> <h3 class="pb-1 font-bold flex-auto" data-astro-cid-sz7xmlte>Let's connect</h3> <ul data-astro-cid-sz7xmlte> <li data-astro-cid-sz7xmlte> <a href="https://github.com/maxpou" rel="noopener noreferrer" class="hover:text-gray-700 hover:underline dark:hover:text-mainYellow" data-astro-cid-sz7xmlte> GitHub </a> </li><li data-astro-cid-sz7xmlte> <a href="https://bsky.app/profile/maxpou.fr" rel="noopener noreferrer" class="hover:text-gray-700 hover:underline dark:hover:text-mainYellow" data-astro-cid-sz7xmlte> Bluesky </a> </li><li data-astro-cid-sz7xmlte> <a href="https://www.linkedin.com/in/maxpou/" rel="noopener noreferrer" class="hover:text-gray-700 hover:underline dark:hover:text-mainYellow" data-astro-cid-sz7xmlte> LinkedIn </a> </li><li data-astro-cid-sz7xmlte> <a href="/rss.xml" class="hover:text-gray-700 hover:underline dark:hover:text-mainYellow" data-astro-cid-sz7xmlte> RSS feed </a> </li> </ul> </div> </div>  </footer>  </body> </html>