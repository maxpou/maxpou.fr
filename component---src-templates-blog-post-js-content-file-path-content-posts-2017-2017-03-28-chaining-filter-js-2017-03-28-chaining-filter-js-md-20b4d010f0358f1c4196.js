"use strict";(self.webpackChunkmaxpou_fr=self.webpackChunkmaxpou_fr||[]).push([[8560],{6358:function(n,a,s){s.r(a),s.d(a,{default:function(){return m}});var t=s(1151),e=s(7294);function p(n){const a=Object.assign({p:"p",a:"a",strong:"strong",span:"span",h2:"h2"},(0,t.ah)(),n.components);return e.createElement(e.Fragment,null,e.createElement(a.p,null,"I recently realize a POC with ",e.createElement(a.a,{href:"https://github.com/maxpou/find-a-room-vuejs2"},"Vue.js"),". I was\nconfronted to this problem: ",e.createElement(a.strong,null,"how to apply an unknown number of filter to a collection?")),"\n",e.createElement(a.p,null,"My previous POC works like this: when I click to a filter, this filter is automatically push in an\narray of filter. And printed datas depends on this array of filters."),"\n",e.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 8.783783783783782%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAjUlEQVR42j3MwQqCMACAYd+3MAVR6ihET1APYe8yCYSg3OZyG6gd0oHXP7p0+m5fFEJgXVd+am3QukNZzyBqfJrisgyf57jNlrGqMOOEUpJe99zsnVgcKZszxluU1ETLvLCEwGee0Z1BSYWylkEIfJLgiwJ/2OPiHdO1wkxvZNv+w7Q+UTYXOvfi+ZB8AUQih2zAlDYPAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/40003c1517c15732385f3f14b3a5fa6d/cbe2e/example.webp 148w,\n/static/40003c1517c15732385f3f14b3a5fa6d/3084c/example.webp 295w,\n/static/40003c1517c15732385f3f14b3a5fa6d/5ca24/example.webp 590w,\n/static/40003c1517c15732385f3f14b3a5fa6d/26ec8/example.webp 615w"\n              sizes="(max-width: 590px) 100vw, 590px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/40003c1517c15732385f3f14b3a5fa6d/12f09/example.png 148w,\n/static/40003c1517c15732385f3f14b3a5fa6d/e4a3f/example.png 295w,\n/static/40003c1517c15732385f3f14b3a5fa6d/fcda8/example.png 590w,\n/static/40003c1517c15732385f3f14b3a5fa6d/f6b72/example.png 615w"\n            sizes="(max-width: 590px) 100vw, 590px"\n            type="image/png"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/40003c1517c15732385f3f14b3a5fa6d/fcda8/example.png"\n            alt="example"\n            title=""\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n    </span>'}}),"\n",e.createElement(a.p,null,"Let’s start with the following data:"),"\n",e.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> heroes <span class="token operator">=</span> <span class="token punctuation">[</span>\n  <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">\'Wolverine\'</span><span class="token punctuation">,</span> <span class="token literal-property property">family</span><span class="token operator">:</span> <span class="token string">\'Marvel\'</span><span class="token punctuation">,</span> <span class="token literal-property property">isEvil</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">\'Deadpool\'</span><span class="token punctuation">,</span> <span class="token literal-property property">family</span><span class="token operator">:</span> <span class="token string">\'Marvel\'</span><span class="token punctuation">,</span> <span class="token literal-property property">isEvil</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">\'Magneto\'</span><span class="token punctuation">,</span> <span class="token literal-property property">family</span><span class="token operator">:</span> <span class="token string">\'Marvel\'</span><span class="token punctuation">,</span> <span class="token literal-property property">isEvil</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">\'Charles Xavier\'</span><span class="token punctuation">,</span> <span class="token literal-property property">family</span><span class="token operator">:</span> <span class="token string">\'Marvel\'</span><span class="token punctuation">,</span> <span class="token literal-property property">isEvil</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">\'Batman\'</span><span class="token punctuation">,</span> <span class="token literal-property property">family</span><span class="token operator">:</span> <span class="token string">\'DC Comics\'</span><span class="token punctuation">,</span> <span class="token literal-property property">isEvil</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">\'Harley Quinn\'</span><span class="token punctuation">,</span> <span class="token literal-property property">family</span><span class="token operator">:</span> <span class="token string">\'DC Comics\'</span><span class="token punctuation">,</span> <span class="token literal-property property">isEvil</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">\'Legolas\'</span><span class="token punctuation">,</span> <span class="token literal-property property">family</span><span class="token operator">:</span> <span class="token string">\'Tolkien\'</span><span class="token punctuation">,</span> <span class="token literal-property property">isEvil</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">\'Gandalf\'</span><span class="token punctuation">,</span> <span class="token literal-property property">family</span><span class="token operator">:</span> <span class="token string">\'Tolkien\'</span><span class="token punctuation">,</span> <span class="token literal-property property">isEvil</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">\'Saruman\'</span><span class="token punctuation">,</span> <span class="token literal-property property">family</span><span class="token operator">:</span> <span class="token string">\'Tolkien\'</span><span class="token punctuation">,</span> <span class="token literal-property property">isEvil</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">]</span></code></pre></div>'}}),"\n",e.createElement(a.p,null,"And the following filters:"),"\n",e.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// not DC Comics</span>\n<span class="token keyword">const</span> <span class="token function-variable function">f1</span> <span class="token operator">=</span> <span class="token parameter">h</span> <span class="token operator">=></span> h<span class="token punctuation">.</span>family <span class="token operator">!==</span> <span class="token string">\'DC Comics\'</span>\n<span class="token comment">// no evil hero</span>\n<span class="token keyword">const</span> <span class="token function-variable function">f2</span> <span class="token operator">=</span> <span class="token parameter">h</span> <span class="token operator">=></span> h<span class="token punctuation">.</span>isEvil <span class="token operator">===</span> <span class="token boolean">false</span></code></pre></div>'}}),"\n",e.createElement(a.p,null,"I can now chain the filters like this:"),"\n",e.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">heroes<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>f1<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>f2<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>whatever<span class="token punctuation">)</span>\n<span class="token comment">// ...</span></code></pre></div>'}}),"\n",e.createElement(a.p,null,"But what if I have to apply severals filters on the same bench of data? … like this:"),"\n",e.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> activeFilters <span class="token operator">=</span> <span class="token punctuation">[</span>f1<span class="token punctuation">,</span> f2<span class="token punctuation">]</span></code></pre></div>'}}),"\n",e.createElement(a.p,null,"Looping inside an array can be a solution:"),"\n",e.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">var</span> filteredHeroes <span class="token operator">=</span> heroes\n<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> filterIndex <span class="token keyword">in</span> activeFilters<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  filteredHeroes <span class="token operator">=</span> filteredHeroes<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>activeFilters<span class="token punctuation">[</span>filterIndex<span class="token punctuation">]</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span></code></pre></div>'}}),"\n",e.createElement(a.p,null,"But as I explain in ",e.createElement(a.a,{href:"https://www.maxpou.fr/no-more-loop-in-js/"},"my previous post"),": imperative\nprogramming is not very elegant."),"\n",e.createElement(a.h2,{id:"solution-using-recursion",style:{position:"relative"}},e.createElement(a.a,{href:"#solution-using-recursion","aria-label":"solution using recursion permalink",className:"anchor before"},e.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Solution: using recursion"),"\n",e.createElement(a.p,null,"A nicer solution is to use a functional approach by using recursion:"),"\n",e.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">recursive_filter</span><span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> arrayFilters<span class="token punctuation">,</span> index <span class="token operator">=</span> <span class="token number">0</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>arrayFilters<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> data\n  <span class="token punctuation">}</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">===</span> arrayFilters<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> data<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>arrayFilters<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n  <span class="token keyword">return</span> <span class="token function">recursive_filter</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>arrayFilters<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> arrayFilters<span class="token punctuation">,</span> index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span></code></pre></div>'}}),"\n",e.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> filteredHeroes <span class="token operator">=</span> <span class="token function">recursive_filter</span><span class="token punctuation">(</span>heroes<span class="token punctuation">,</span> activeFilters<span class="token punctuation">)</span></code></pre></div>'}}),"\n",e.createElement(a.h2,{id:"bad-solution-extending-native-prototype",style:{position:"relative"}},e.createElement(a.a,{href:"#bad-solution-extending-native-prototype","aria-label":"bad solution extending native prototype permalink",className:"anchor before"},e.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Bad solution: extending native prototype"),"\n",e.createElement(a.p,null,"As\n",e.createElement(a.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Inheritance_and_the_prototype_chain#Bad_practice_Extension_of_native_prototypes"},"explained in the MDN"),",\nit is not recommended to extend native object (Array in our case). So the following code will works\n",e.createElement(a.strong,null,"despite the good practice violation"),"."),"\n",e.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// DON\'t DO IT!</span>\n<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">recursive_filter</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">arrayFilters<span class="token punctuation">,</span> index <span class="token operator">=</span> <span class="token number">0</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>arrayFilters<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token keyword">this</span>\n  <span class="token punctuation">}</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">===</span> arrayFilters<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>arrayFilters<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>arrayFilters<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">recursive_filter</span><span class="token punctuation">(</span>arrayFilters<span class="token punctuation">,</span> index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">const</span> filteredHeroes <span class="token operator">=</span> heroes<span class="token punctuation">.</span><span class="token function">recursive_filter</span><span class="token punctuation">(</span>activeFilters<span class="token punctuation">)</span></code></pre></div>'}}))}var o=function(n){void 0===n&&(n={});const{wrapper:a}=Object.assign({},(0,t.ah)(),n.components);return a?e.createElement(a,n,e.createElement(p,n)):p(n)},l=s(4222),c=s(418),r=s(4529),i=s(7953),u=s(4849),k=s(5536),g=s(2404);function d(n){let{data:a,pageContext:s,children:t,location:p}=n;const o=a.post,{previous:d,next:m}=s;return e.createElement(l.Z,{location:p},e.createElement(k.Z,{title:o.frontmatter.title,description:o.frontmatter.description||o.excerpt,cover:o.frontmatter.cover&&o.frontmatter.cover.publicURL,imageShare:o.frontmatter.imageShare&&o.frontmatter.imageShare.publicURL,lang:o.frontmatter.language,translations:o.frontmatter.translations,path:o.frontmatter.slug,isBlogPost:!0}),e.createElement(r.Z,{heroImg:o.frontmatter.cover,title:o.frontmatter.title}),e.createElement(c.Z,null,e.createElement(i.Z,{post:o},t)),e.createElement(c.Z,{as:"aside"},e.createElement(g.Z,{slug:o.frontmatter.slug,title:o.frontmatter.title,redditPostId:o.frontmatter.redditPostId})),e.createElement(u.Z,{previous:d,next:m}))}function m(n){return e.createElement(d,n,e.createElement(o,n))}}}]);
//# sourceMappingURL=component---src-templates-blog-post-js-content-file-path-content-posts-2017-2017-03-28-chaining-filter-js-2017-03-28-chaining-filter-js-md-20b4d010f0358f1c4196.js.map