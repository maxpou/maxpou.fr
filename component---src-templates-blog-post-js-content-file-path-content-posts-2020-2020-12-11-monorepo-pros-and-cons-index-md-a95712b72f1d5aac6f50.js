"use strict";(self.webpackChunkmaxpou_fr=self.webpackChunkmaxpou_fr||[]).push([[7225],{461:function(e,n,t){t.r(n),t.d(n,{default:function(){return h}});var a=t(1151),o=t(7294);function s(e){const n=Object.assign({p:"p",span:"span",em:"em",h2:"h2",a:"a",h3:"h3",strong:"strong",br:"br",ul:"ul",li:"li"},(0,a.ah)(),e.components);return o.createElement(o.Fragment,null,o.createElement(n.p,null,"The trend today is to split things and make them thinner. We witnessed the emergence of\nmicroservices, micro-frontends‚Ä¶"),"\n",o.createElement(n.p,null,"Against this trend, some companies and projects had decided to put multiple applications/libraries\nunder the same git repository. We call this architectural concept a monorepo (or mono repository)."),"\n",o.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAACkklEQVR42mWSW0jTYRjGf9uaf2fpNs+xeShmuqC8kLopIruKTkJdFBIdJDQ6SF4UIoKkgVhQEREkZRfZgXlqF+rmZhZhItg5TUs76NTYpII8xFa9MZ0o9Nx8vO/3fu/z8OMjqydLazlpUVZDGEEJ6mBtsVgUQC2gCraLTIZMx9q4PUCEEaMeiAJiAQNER0FMJBDHu0Ll6ddq9fuhu7w+eIzEl4XhxSPlWo+ngc9PLnOCkPYr+hWSm5Atj7gqLprExY2/LSi/3RwRN3bpoOFjLTl4bYlT8ipDpjuNf4v2Yxm5a7wmzzNEPiTLuzpd1WxoQRNMMdGCWZ7F+6QvXaTb+ON7B4Y/3VE18j5NpM8s3taIEr7UL/HOuCMCE3btVEEOqQN3NJf8j3Tid+vkRbWqfGEhes89kgLtYV7pXCaBdu33by70frfmpnQvFenSyXijupjSw2SeL2DD2UOsA1RFBzBV5LOx4jAbC/eRwIJir+ejlYdkBRxk+x2snzVrJTXgYrO0s8lWRjL9x5d2+26pBz/d523+KZa/ORFRMn4ubPSrneGuKxSGEqoB47CN6F9OamYcNM+0cls6CJ9p4+h0K06/k+bBWnbjfZA4Jb1Wme6Kn2NYp78mb6wigyn/MfQ0kSQvEnzSbxV5Hj/HsMdQIx/TRQaSxNsWXsKQTTP+06nzjzVqJ/O2kdJ7W3Vx0qXIpEORnmp12SKGhmEbpkC7dkwe6yTg1vomWogKuDXXpVMn8kSR0Xr1GY5sxVx2kNRzBzAFH5/OI7Iil5TiXFbm7SJyEcOY5FiW2yvZ8vgC291VZAdNaktZ01HFDmclO8/sxTo/bAYygDRgFbAi+IFDd6rQGeS4JFQnw2yANUA6oMzP/AO/ViQxTELQKQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/b0c137ebd7cfe7057ffd30472e33252c/cbe2e/mono-vs-multi.webp 148w,\n/static/b0c137ebd7cfe7057ffd30472e33252c/3084c/mono-vs-multi.webp 295w,\n/static/b0c137ebd7cfe7057ffd30472e33252c/5ca24/mono-vs-multi.webp 590w,\n/static/b0c137ebd7cfe7057ffd30472e33252c/dad35/mono-vs-multi.webp 885w,\n/static/b0c137ebd7cfe7057ffd30472e33252c/2baf0/mono-vs-multi.webp 1180w,\n/static/b0c137ebd7cfe7057ffd30472e33252c/d1098/mono-vs-multi.webp 1906w"\n              sizes="(max-width: 590px) 100vw, 590px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/b0c137ebd7cfe7057ffd30472e33252c/12f09/mono-vs-multi.png 148w,\n/static/b0c137ebd7cfe7057ffd30472e33252c/e4a3f/mono-vs-multi.png 295w,\n/static/b0c137ebd7cfe7057ffd30472e33252c/fcda8/mono-vs-multi.png 590w,\n/static/b0c137ebd7cfe7057ffd30472e33252c/efc66/mono-vs-multi.png 885w,\n/static/b0c137ebd7cfe7057ffd30472e33252c/c83ae/mono-vs-multi.png 1180w,\n/static/b0c137ebd7cfe7057ffd30472e33252c/df88b/mono-vs-multi.png 1906w"\n            sizes="(max-width: 590px) 100vw, 590px"\n            type="image/png"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/b0c137ebd7cfe7057ffd30472e33252c/fcda8/mono-vs-multi.png"\n            alt="mono vs. multiple repository"\n            title=""\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n    </span>'}}),"\n",o.createElement(n.p,null,"I‚Äôve been using and maintaining a monorepo for 2 years now. Here are my thoughts about it."),"\n",o.createElement(n.p,null,o.createElement(n.em,null,"Context: the monorepo I‚Äôm working on contains ~40 npm packages, mostly standalone vue.js apps. All\nthose small apps are parts of a big application. We decided to split our big app into small ones\nbecause the main one had become hard to maintain. Also, we are ~15 developers working on this\nmonorepo (not full-time).")),"\n",o.createElement(n.h2,{id:"pros",style:{position:"relative"}},o.createElement(n.a,{href:"#pros","aria-label":"pros permalink",className:"anchor before"},o.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Pros"),"\n",o.createElement(n.h3,{id:"-teamwork",style:{position:"relative"}},o.createElement(n.a,{href:"#-teamwork","aria-label":" teamwork permalink",className:"anchor before"},o.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"ü§ù Teamwork"),"\n",o.createElement(n.p,null,o.createElement(n.strong,null,"Favour contributions"),":",o.createElement(n.br),"\n","When you already have the code, contributing is easier. You don‚Äôt need to search for the repo, clone\nit and install it beforehand."),"\n",o.createElement(n.p,null,o.createElement(n.strong,null,"Better overview of the whole system"),":",o.createElement(n.br),"\n","You already have all the source code. So you don‚Äôt need to find the repo url, clone it. A plain old\nctrl + F is enough."),"\n",o.createElement(n.p,null,o.createElement(n.strong,null,"Favour large refactoring"),":",o.createElement(n.br),"\n","Let‚Äôs say you want to change something in one package used everywhere else. You can update all the\npackages in one commit!"),"\n",o.createElement(n.p,null,o.createElement(n.strong,null,"Remove unused code with confidence"),":",o.createElement(n.br),"\n","How many times you wanted to remove code but you didn‚Äôt because you didn‚Äôt know if code was used\nsomewhere else? With monorepo, you don‚Äôt need to go through all repo to see if this code is used or\nnot. It‚Äôs very handy."),"\n",o.createElement(n.p,null,o.createElement(n.strong,null,"Single source of truth"),":",o.createElement(n.br),"\n","The project I‚Äôm working on used to have a very weird name for the main branch. When we changed this\nname to another one, some repositories were updated, some were not (oversight). With a monorepo, you\nonly have to find this information once."),"\n",o.createElement(n.h3,{id:"-dependencies",style:{position:"relative"}},o.createElement(n.a,{href:"#-dependencies","aria-label":" dependencies permalink",className:"anchor before"},o.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"üë®‚Äçüë©‚Äçüëß Dependencies"),"\n",o.createElement(n.p,null,o.createElement(n.strong,null,"Less space on your hard drive"),":",o.createElement(n.br),"\n","If you‚Äôre familiar with the JavaScript ecosystem, you‚Äôre probably aware that the ",o.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">node_module</code>'}}),"\nfolder can be\n",o.createElement(n.a,{href:"https://www.reddit.com/r/ProgrammerHumor/comments/6s0wov/heaviest_objects_in_the_universe/"},"insanely heavy"),".\nWhen we had ~30 apps/packages, it used to take 12Gb on our hard drive. Yes, 12Gb! We had\ndependencies like Vue.js installed 30 times. Fortunately, some tools (like yarn) symlink redundant\ndependencies when workspaces are enabled. Thanks to this functionality,\n",o.createElement(n.a,{href:"https://twitter.com/_maxpou/status/1263426573379739651"},"we went from 12Gb to 1.7Gb"),"."),"\n",o.createElement(n.p,null,o.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 64.86486486486486%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAAC40lEQVR42o1RbUhTURg+6u50I9NIZep0fn8uFYaFgkqUGFGakpZoYFkTovIrjag4WQlWhGVKXNIEdVPvXM5pkqK72lZTFH/U/NEPU6SUnJbL5gckb9zrlIkGPfByzvue5zzwvA9CuwAAbJjTmFwZbMppnjMVd/wwFagWF3PkX41pVSHWnB0YlUoJY/njewtPalSzJXcOM7MLtTrHpOZJn1M1+lB9SWcg4G7h8v23XlNXKN8z5Cf/+FdjgWEU7GG4GCNbsNSW6PfrOGqurDxh7OpNV6Z3aIDYwDbod1dAB2qCqC1iI7iLlNAmUsIgrxGS2RkFdmh3m4i1AP32/vM93rlDLYGRk93hZ5f6BelgQFygkcNynyD7o1Kc+LnrQPxMT8DlCblzhLEn4OSazjdrhXY6uqlll4AQh5QggmlmO/ce/DUgxuZ2JDEPivOW6ICCaQrxvqkR3/TeJ39J65a40itMMg9Gls2r0KGfmojcZX3ibVOfKAehDds8q+IjJGGFURjmsjuWjBIjqS8Sx/JkxwdODMfo4hVxdEqlM0thOVvhMKeDtedtqYGFOHGtwtuc06yFfIUGClrptfMy/cQlMtqaA4BtAaxCYYGBHfBlIHGTrd5ybfpTSsghG6WDXXjNgldQ/e9SUZ3prrB2TczwPCk459difuAqXz29IxCHp1pvfvW7Y8zdg4KY0A4oO9E5UVXYpewcUgYImXSj30BZVBc8dKI2UvdVwsVY9UqFsBUydwjuqxtp8FF9AU7NQPSW5XbHWNA7U9BPZDA9TSdwaBpz2DdVsCN82F8Keq/noHXM3yHoV92bGURqZNGPKIFFzkatSDkyrs2QD/el3kAYuM+6u+0LqWkesxoYlRJGXbLHzHixaGowzn376jDmkkVSFzIr1R0XFblshiN4aU4TKqFHoAA1Ub/G2kynwA5jbEuSJIH+G7ARjmf9XHpI+/pw0Ot1Dd8iiCkD12AwcGma5vzr/183Tk0wEILZ/AAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/b8b8ab847d44244af6ef9755151e4c6b/cbe2e/dependency-management.webp 148w,\n/static/b8b8ab847d44244af6ef9755151e4c6b/3084c/dependency-management.webp 295w,\n/static/b8b8ab847d44244af6ef9755151e4c6b/5ca24/dependency-management.webp 590w,\n/static/b8b8ab847d44244af6ef9755151e4c6b/dad35/dependency-management.webp 885w,\n/static/b8b8ab847d44244af6ef9755151e4c6b/2baf0/dependency-management.webp 1180w,\n/static/b8b8ab847d44244af6ef9755151e4c6b/611d0/dependency-management.webp 2096w"\n              sizes="(max-width: 590px) 100vw, 590px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/b8b8ab847d44244af6ef9755151e4c6b/12f09/dependency-management.png 148w,\n/static/b8b8ab847d44244af6ef9755151e4c6b/e4a3f/dependency-management.png 295w,\n/static/b8b8ab847d44244af6ef9755151e4c6b/fcda8/dependency-management.png 590w,\n/static/b8b8ab847d44244af6ef9755151e4c6b/efc66/dependency-management.png 885w,\n/static/b8b8ab847d44244af6ef9755151e4c6b/c83ae/dependency-management.png 1180w,\n/static/b8b8ab847d44244af6ef9755151e4c6b/8c48a/dependency-management.png 2096w"\n            sizes="(max-width: 590px) 100vw, 590px"\n            type="image/png"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/b8b8ab847d44244af6ef9755151e4c6b/fcda8/dependency-management.png"\n            alt="dependency-management"\n            title=""\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n    </span>'}})," ",o.createElement(n.em,null,"Note: I know npm 7.0 now supports workspaces.\nHowever, it‚Äôs still in the early stage. Important commands\n",o.createElement(n.a,{href:"https://github.com/npm/rfcs/pull/117/files"},"are not supported yet"),".")),"\n",o.createElement(n.p,null,o.createElement(n.strong,null,"Cross-package hot-reload"),":",o.createElement(n.br),"\n","Some tools automatically symlink local dependencies together. Which means, if package-a is used in\npackage-b, you can work on package-a and see the live result in package-b."),"\n",o.createElement(n.p,null,o.createElement(n.strong,null,"Adding a new package is simple"),":",o.createElement(n.br),"\n","For us, all our packages are under a ",o.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">packages</code>'}})," folder. Adding a new package is very\nstraightforward: no need to parameter the continuous integration/package manager credentials, set\nthe repository permissions‚Ä¶ everything is already there."),"\n",o.createElement(n.h2,{id:"cons",style:{position:"relative"}},o.createElement(n.a,{href:"#cons","aria-label":"cons permalink",className:"anchor before"},o.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Cons"),"\n",o.createElement(n.h3,{id:"-git--code-hosting-platforms-gitlabgithub",style:{position:"relative"}},o.createElement(n.a,{href:"#-git--code-hosting-platforms-gitlabgithub","aria-label":" git  code hosting platforms gitlabgithub permalink",className:"anchor before"},o.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"üõ† Git & code hosting platforms (GitLab/GitHub‚Ä¶)"),"\n",o.createElement(n.p,null,o.createElement(n.strong,null,"Authorization"),":",o.createElement(n.br),"\n","When you set read/write permissions on GitLab/GitHub/etc., it‚Äôs usually for the whole repo."),"\n",o.createElement(n.p,null,o.createElement(n.strong,null,"üí° Tip:")," You can also create a\n",o.createElement(n.a,{href:"https://docs.gitlab.com/ee/user/project/code_owners.html"},"CODEOWNERS file")," to define specific\nownership rule."),"\n",o.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="md"><pre class="language-md"><code class="language-md"><span class="token title important"><span class="token punctuation">#</span> .gitlab/CODEOWNERS</span>\n\npackages/app-1 @user1 packages/app-2 @user2</code></pre></div>'}}),"\n",o.createElement(n.p,null,o.createElement(n.em,null,"With the example above, if user2 opens a merge request to change app-1, user1 will have to approve\nit.")),"\n",o.createElement(n.p,null,o.createElement(n.strong,null,"Git log may become unreadable"),":",o.createElement(n.br),"\n","If merge requests are merged ‚Äúas is‚Äù, with no squashing option (with 10-15 commits), the ",o.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">git log</code>'}}),"\nwill quickly become unreadable, and so unusable."),"\n",o.createElement(n.p,null,o.createElement(n.strong,null,"üí° Tip:")," You can use ",o.createElement(n.a,{href:"git-conventional-commits"},"conventional commit")," and put in parenthesis the\nname of the package. So if you want to retrieve one old commit, it becomes straightforward."),"\n",o.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token comment"># will list all feature added in package-B</span>\n<span class="token function">git</span> log <span class="token parameter variable">--all</span> <span class="token parameter variable">--grep</span><span class="token operator">=</span><span class="token string">"feat(package-B):"</span>\n\n<span class="token comment"># or:</span>\n<span class="token function">git</span> log <span class="token parameter variable">--all</span> path/to/package-b</code></pre></div>'}}),"\n",o.createElement(n.p,null,o.createElement(n.strong,null,"Git log may become unusable"),":",o.createElement(n.br),"\n","If you have a lot of commits/living branches/tags, it means you will have a lot of git objects\nstored. git will probably have trouble getting the history of a specific file."),"\n",o.createElement(n.p,null,o.createElement(n.strong,null,"Forget your long-lived branches"),":",o.createElement(n.br),"\n","If the main branch is the only source of truth, you can‚Äôt have a ",o.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">next</code>'}})," branch. If you want to have\nsome features only available for a specific environment, then I recommend you to use feature flags."),"\n",o.createElement(n.p,null,o.createElement(n.strong,null,"Repository may become oversized"),":",o.createElement(n.br),"\n","The ",o.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">.git</code>'}})," folder on your monorepo root might reach a few Gb."),"\n",o.createElement(n.p,null,o.createElement(n.strong,null,"üí° Tip:")," Here are 2 different options if you want to save some space"),"\n",o.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token comment"># truncate the history</span>\n<span class="token function">git</span> clone <span class="token parameter variable">--depth</span> <span class="token number">1</span> <span class="token operator">&lt;</span>repo-url<span class="token operator">></span>\n\n<span class="token comment"># 1. clone an empty repo with no history</span>\n<span class="token comment"># 2. pull the desired package</span>\n<span class="token function">git</span> clone <span class="token punctuation">\\</span>\n  <span class="token parameter variable">--depth</span> <span class="token number">1</span> <span class="token punctuation">\\</span>\n  --no-checkout <span class="token punctuation">\\</span>\n  <span class="token parameter variable">--filter</span><span class="token operator">=</span>blob:none <span class="token punctuation">\\</span>\n  <span class="token operator">&lt;</span>repo-url<span class="token operator">></span>\n<span class="token function">git</span> checkout main -- packages/package-a</code></pre></div>'}}),"\n",o.createElement(n.p,null,o.createElement(n.em,null,"Note: learn more about\n",o.createElement(n.a,{href:"https://docs.gitlab.com/ee/topics/git/partial_clone.html"},"partial cloning"),".")),"\n",o.createElement(n.h3,{id:"-continuous-integration-ci",style:{position:"relative"}},o.createElement(n.a,{href:"#-continuous-integration-ci","aria-label":" continuous integration ci permalink",className:"anchor before"},o.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"ü§ñ Continuous Integration (CI)"),"\n",o.createElement(n.p,null,o.createElement(n.strong,null,"When it‚Äôs broken, everybody is!"),o.createElement(n.br),"\n","If the ",o.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">main</code>'}})," branch is marked red by your continuous integration, everybody is impacted. You cannot\nput this problem under the carpet. It needs to be addressed directly."),"\n",o.createElement(n.p,null,o.createElement(n.strong,null,"The Continuous Integration dilemma"),":",o.createElement(n.br),"\n","If codebases are mutualized, you have more code. And more code means more work for continuous\nintegration (CI) for jobs like testing, linting, building‚Ä¶"),"\n",o.createElement(n.p,null,"When dealing with CI, time and reliability are the heart of the matter. On the one hand, you want it\nto be as fast as possible but, on the other hand, you want it to be reliable. I mean, when my CI\ngives me a green light, I‚Äôm more confident to merge my work."),"\n",o.createElement(n.p,null,"It can be tempting to reduce the number of packages analysed to gain some time. But, continuous\nintegration will lose interest because it will not be able to spot a ‚Äúcross-repository‚Äù regression."),"\n",o.createElement(n.p,null,"|                                     | Entire codebase | Selected package | Affected packages |\n| ----------------------------------- | --------------- | ---------------- | ----------------- |\n| Build/lint/test Speed               | üêå Slow         | üöÄ Fast          | üöó Medium         |\n| Spot cross-packages",o.createElement("br"),"regression? | ‚úÖ Yes          | ‚ùå No            | ‚úÖ Yes            |\n| Easy to set up?                     | üòÄ Yes          | üòÄ Yes           | üòü No             |"),"\n",o.createElement(n.p,null,"The 3rd option is, in my opinion, the most viable. But, you will have to do it manually. A 4th\noption could use filters. ‚Äúimportant‚Äù labelled packages use the 1st strategy and the rest use the\n2nd strategy."),"\n",o.createElement(n.p,null,o.createElement(n.strong,null,"üí° Tips:")),"\n",o.createElement(n.ul,null,"\n",o.createElement(n.li,null,"If your CI pipeline is good enough and you have parallel tasks, don‚Äôt forget to enable the\nfail-fast option."),"\n",o.createElement(n.li,null,"I recommend you to add a specific label to short-circuit the CI. Like if you change a typo in the\nREADME, you don‚Äôt need to run unnecessary commands. (i.e. If the pull request have a ‚ÄúNO_CI‚Äù\nlabel, the build will not be triggered)"),"\n"),"\n",o.createElement(n.h3,{id:"-teamwork-1",style:{position:"relative"}},o.createElement(n.a,{href:"#-teamwork-1","aria-label":" teamwork 1 permalink",className:"anchor before"},o.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"ü§ù Teamwork"),"\n",o.createElement(n.p,null,o.createElement(n.strong,null,"Hidden changes"),":",o.createElement(n.br),"\n","Some repos are sometimes more ‚Äúsensitive‚Äù than others. It‚Äôs easy to add a small piece of code with a\nbig impact. It can be problematic if it‚Äôs done by mistake."),"\n",o.createElement(n.p,null,o.createElement(n.strong,null,"Amount of code can be intimidating"),":",o.createElement(n.br),"\n","The first time I ‚Äúgit pulled‚Äù the source code of Gatsby.js, I pulled the full history of ~90\npackages. At first glance, I felt overwhelmed. Because it took me ages to clone the full repository\n(with all the history). And also, because the amount of code was massive!"),"\n",o.createElement(n.p,null,"If you work with 10% of a codebase, you probably don‚Äôt care about the 90% remaining."),"\n",o.createElement(n.h2,{id:"conclusion",style:{position:"relative"}},o.createElement(n.a,{href:"#conclusion","aria-label":"conclusion permalink",className:"anchor before"},o.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Conclusion"),"\n",o.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 53.37837837837838%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAADD0lEQVR42j2Sa0iTYRTHT04t0AxcSVRIpeiHbCqppIZmCi5Nmulr5H06d9McSqS5RLxMR2omiDoFb/M603ldLi0LyTK8hBQpQV7DC27lTOcFPfHO5fPl/Dnnd855nvMcGLpq4QMARuYAZgBgCgBn4FCfBAATEwALUjfYUgO6rlCdAcCYehg7BYcx0/8sAFwEZDBvz7BlFeOxVS3Lsc35AACbMTLBtKBHtsLvapoKfH6LTP5CAzsMygrRphfVY6GwdZPV+FDHcqsLsfhxM6aVVwhtmDcAWZ+uTwoaD5LyivEvVz6HnoOG+7EdipflUzgtGsXdwEqO/saAIWNMVNBxfoCK2vhqBR2kFzBHvPxrEnA1l7fT51gdBBjR7qrhtB2oUntxO6p1liAIylZMa6/q6TvcSR7ABaKcfVSQpYzeKyjCBdETXGVL+70tQy9vpVQvLxYLcCWpdLvdI+seYMbMiY2EDh9MfeOnimhwJRPVkY00zOz3R4Hct9Y90RIAzgLAccztp66zF/wxCenvI0s8nN3sHebjXnsiH/0wZeGm97lLNoDsfsul6AbJLK+p5ndUs4gsuMFsiV8Lk9ZpopprxhnFngBABQDKJjHgoslOlu5KwqVaVn2cmxNh+5OTX7onvVu1l55bIrTiuQEy2l3H0pUHiSMzuM7r1M1wK6ZNkX0tDAf8snE3Vs7R/yJgyGcm9vjij1fmqOZXvvUye2aFIvHi3ATgUjZ3u8+JnCFD5vL1Uef+i7ZJXGM1zWEGYayObOrpYmTi5P0SXA6tjdOvCOyweiO1mWW4KBSjil+v5LqGW2wk1c0v5mTiUkKFttEjLRDY1l5WH4LFzG/MAp7CIz+AnJXcJ9XvO6+WO/GghJNCC3LU79rpPPdw++HoBs4ov5vXGVDmTrK9RGHoWIKSM8KujaKft6ORjQ1QRlBIsfLRi7k27Fugex7iMTg8BnpL0bF6/8YEPUs15MvRsfr8IxYlEiPSarodgjVyG5bON5hhiISMgnBUGEiNg4OGpP7TbstVt1rf0flHJUYkS0L/AMcxeaeD2iigAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/afd85baf1de6c79686485253b9fb6373/cbe2e/relevant-monorepo.webp 148w,\n/static/afd85baf1de6c79686485253b9fb6373/3084c/relevant-monorepo.webp 295w,\n/static/afd85baf1de6c79686485253b9fb6373/5ca24/relevant-monorepo.webp 590w,\n/static/afd85baf1de6c79686485253b9fb6373/dad35/relevant-monorepo.webp 885w,\n/static/afd85baf1de6c79686485253b9fb6373/2baf0/relevant-monorepo.webp 1180w,\n/static/afd85baf1de6c79686485253b9fb6373/c8acf/relevant-monorepo.webp 1930w"\n              sizes="(max-width: 590px) 100vw, 590px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/afd85baf1de6c79686485253b9fb6373/12f09/relevant-monorepo.png 148w,\n/static/afd85baf1de6c79686485253b9fb6373/e4a3f/relevant-monorepo.png 295w,\n/static/afd85baf1de6c79686485253b9fb6373/fcda8/relevant-monorepo.png 590w,\n/static/afd85baf1de6c79686485253b9fb6373/efc66/relevant-monorepo.png 885w,\n/static/afd85baf1de6c79686485253b9fb6373/c83ae/relevant-monorepo.png 1180w,\n/static/afd85baf1de6c79686485253b9fb6373/093ec/relevant-monorepo.png 1930w"\n            sizes="(max-width: 590px) 100vw, 590px"\n            type="image/png"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/afd85baf1de6c79686485253b9fb6373/fcda8/relevant-monorepo.png"\n            alt="monorepo are become relevant when packages are connected and written in the same language"\n            title=""\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n    </span>'}}),"\n",o.createElement(n.p,null,"Overall, I think a monorepo can be a good thing."),"\n",o.createElement(n.p,null,"In our case, it makes our life easier. All our packages are a part of the same big application and\nare written in the same language. Because they‚Äôre a part of the same application, they ",o.createElement(n.em,null,"‚Äúcommunicate\nbetween each other‚Äù"),". Also, we‚Äôre a human-sized team working on it."))}var l=function(e){void 0===e&&(e={});const{wrapper:n}=Object.assign({},(0,a.ah)(),e.components);return n?o.createElement(n,e,o.createElement(s,e)):s(e)},r=t(4222),i=t(418),c=t(4529),p=t(7953),m=t(4849),d=t(5536),g=t(2404);function u(e){let{data:n,pageContext:t,children:a,location:s}=e;const l=n.post,{previous:u,next:h}=t;return o.createElement(r.Z,{location:s},o.createElement(d.Z,{title:l.frontmatter.title,description:l.frontmatter.description||l.excerpt,cover:l.frontmatter.cover&&l.frontmatter.cover.publicURL,imageShare:l.frontmatter.imageShare&&l.frontmatter.imageShare.publicURL,lang:l.frontmatter.language,translations:l.frontmatter.translations,path:l.frontmatter.slug,isBlogPost:!0}),o.createElement(c.Z,{heroImg:l.frontmatter.cover,title:l.frontmatter.title}),o.createElement(i.Z,null,o.createElement(p.Z,{post:l},a)),o.createElement(i.Z,{as:"aside"},o.createElement(g.Z,{slug:l.frontmatter.slug,title:l.frontmatter.title,redditPostId:l.frontmatter.redditPostId})),o.createElement(m.Z,{previous:u,next:h}))}function h(e){return o.createElement(u,e,o.createElement(l,e))}}}]);
//# sourceMappingURL=component---src-templates-blog-post-js-content-file-path-content-posts-2020-2020-12-11-monorepo-pros-and-cons-index-md-a95712b72f1d5aac6f50.js.map