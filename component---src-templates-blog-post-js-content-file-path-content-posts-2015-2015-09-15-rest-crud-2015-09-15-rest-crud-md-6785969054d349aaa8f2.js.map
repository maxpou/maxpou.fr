{"version":3,"file":"component---src-templates-blog-post-js-content-file-path-content-posts-2015-2015-09-15-rest-crud-2015-09-15-rest-crud-md-6785969054d349aaa8f2.js","mappings":"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","sources":["webpack://maxpou.fr/./content/posts/2015/2015-09-15-rest-crud/2015-09-15-rest-crud.md","webpack://maxpou.fr/./src/templates/blog-post.js"],"sourcesContent":["/*@jsxRuntime classic @jsx React.createElement @jsxFrag React.Fragment*/\nimport {useMDXComponents as _provideComponents} from \"@mdx-js/react\";\nimport React from \"react\";\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    h2: \"h2\",\n    a: \"a\",\n    span: \"span\",\n    p: \"p\",\n    ul: \"ul\",\n    li: \"li\",\n    strong: \"strong\",\n    em: \"em\",\n    blockquote: \"blockquote\",\n    br: \"br\"\n  }, _provideComponents(), props.components);\n  return React.createElement(React.Fragment, null, React.createElement(_components.h2, {\n    id: \"bref-rappel-des-méthodes-http\",\n    style: {\n      position: \"relative\"\n    }\n  }, React.createElement(_components.a, {\n    href: \"#bref-rappel-des-m%C3%A9thodes-http\",\n    \"aria-label\": \"bref rappel des méthodes http permalink\",\n    className: \"anchor before\"\n  }, React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<svg aria-hidden=\\\"true\\\" focusable=\\\"false\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg>\"\n    }\n  })), \"Bref rappel des méthodes HTTP\"), \"\\n\", React.createElement(_components.p, null, \"Pour rappel, voici les principaux verbes HTTP que nous utilisons pour des architectures REST :\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"GET : Accède à une ressource\"), \"\\n\", React.createElement(_components.li, null, \"HEAD : Accède aux métadonnées d’une ressource\"), \"\\n\", React.createElement(_components.li, null, \"POST : Ajoute une ressource\"), \"\\n\", React.createElement(_components.li, null, \"PUT : Met à jour une ressource \", React.createElement(_components.strong, null, \"complète\"), \" en la remplaçant par une nouvelle version (99% des\\ncas).\"), \"\\n\", React.createElement(_components.li, null, \"PATCH : Met à jour une partie d’une ressource en envoyant un différentiel (une sorte de ‘git\\ndiff’)\"), \"\\n\", React.createElement(_components.li, null, \"DELETE : Supprime une ressource\"), \"\\n\"), \"\\n\", React.createElement(_components.h2, {\n    id: \"méthodes-safes-sûres-et-idempotents-idempotentes\",\n    style: {\n      position: \"relative\"\n    }\n  }, React.createElement(_components.a, {\n    href: \"#m%C3%A9thodes-safes-s%C3%BBres-et-idempotents-idempotentes\",\n    \"aria-label\": \"méthodes safes sûres et idempotents idempotentes permalink\",\n    className: \"anchor before\"\n  }, React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<svg aria-hidden=\\\"true\\\" focusable=\\\"false\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg>\"\n    }\n  })), \"Méthodes safes (sûres) et idempotents (idempotentes)\"), \"\\n\", React.createElement(_components.p, null, \"La \", React.createElement(_components.a, {\n    href: \"http://tools.ietf.org/html/rfc7231#section-4.2\"\n  }, \"RFC7231\"), \" (remplaçante de la RFC2616) a ajouté\\ndeux notions aux méthodes HTTP :\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"Les méthodes dites \", React.createElement(_components.strong, null, \"safes\"), \" ne modifient pas les données sur le serveur. Peu importe le nombre de\\nfois qu’elles sont appelées.\"), \"\\n\", React.createElement(_components.li, null, \"Les méthodes \", React.createElement(_components.strong, null, \"idempotents\"), \" quant à elles \", React.createElement(_components.em, null, \"peuvent\"), \" modifier les données lors du premier appel.\\nLors des appels suivants, la réponse sera tout le temps identique. En cas de panne/problème\\nréseau, vous pourrez donc lancer la requête sans craintes puisque le comportement est le même que\\nvous exécutiez la requête une ou plusieurs fois.\"), \"\\n\"), \"\\n\", React.createElement(_components.p, null, \"Méthode | Safe | Idempotente GET | Oui | Oui HEAD | Oui | Oui POST | Non | Non PUT | Non | Oui PATCH\\n| Non | Non DELETE | Non | Oui\"), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.strong, null, \"Focus sur le DELETE :\"), \" On serait tenté de dire que DELETE n’est pas idempotent car on ne peut pas\\nsupprimer deux fois le même objet. Ceci étant, si l’on regarde la RFC, DELETE doit bien retourner un\\ncode 200 (Success) en cas de réussite et non pas un 204 (No Content). Si l’API n’a pas été bien\\nconçue et qu’elle renvoie un 404 (Not Found), alors le DELETE ne sera plus idempotent comme elle\\ndevrait l’être.\"), \"\\n\", React.createElement(_components.h2, {\n    id: \"cachabilité\",\n    style: {\n      position: \"relative\"\n    }\n  }, React.createElement(_components.a, {\n    href: \"#cachabilit%C3%A9\",\n    \"aria-label\": \"cachabilité permalink\",\n    className: \"anchor before\"\n  }, React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<svg aria-hidden=\\\"true\\\" focusable=\\\"false\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg>\"\n    }\n  })), \"Cachabilité\"), \"\\n\", React.createElement(_components.blockquote, null, \"\\n\", React.createElement(_components.p, null, \"“La requête la plus performante est celle que l’on a pas à faire !”\", React.createElement(_components.br), \"\\n\", \"— \", React.createElement(_components.strong, null, \"Un inconnu\")), \"\\n\"), \"\\n\", React.createElement(_components.p, null, \"La mise en cache est l’une des contraintes les plus importantes des architectures web. En effet,\\nelle permet de :\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"décharger votre serveur en lui évitant de refaire la même chose deux fois,\"), \"\\n\", React.createElement(_components.li, null, \"réduire le temps de traitement d’une requête,\"), \"\\n\", React.createElement(_components.li, null, \"…et donc de renvoyer plus rapidement l’information au client.\"), \"\\n\"), \"\\n\", React.createElement(_components.p, null, \"Les méthodes dites \", React.createElement(_components.strong, null, \"safes\"), \" sont donc à mettre en cache !\"), \"\\n\", React.createElement(_components.h2, {\n    id: \"bonnesmauvaises-pratiques\",\n    style: {\n      position: \"relative\"\n    }\n  }, React.createElement(_components.a, {\n    href: \"#bonnesmauvaises-pratiques\",\n    \"aria-label\": \"bonnesmauvaises pratiques permalink\",\n    className: \"anchor before\"\n  }, React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<svg aria-hidden=\\\"true\\\" focusable=\\\"false\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg>\"\n    }\n  })), \"Bonnes/mauvaises pratiques\"), \"\\n\", React.createElement(_components.p, null, \"Il y a malheureusement, trop d’API conçue comme ceci :\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"text\\\"><pre class=\\\"language-text\\\"><code class=\\\"language-text\\\">POST api.mon-application.org/utilisateurs/rechercher\\nPOST api.mon-application.org/utilisateurs/42/supprimer\\nPOST api.mon-application.org/utilisateurs/42/modifier\\nGET api.mon-application.org/utilisateurs/supprimer?id=42\\nGET api.mon-application.org/utilisateurs/42?action=supprimer\\nGET api.mon-application.org/utilisateurs/42?action=envoyerMailConfirmation\\n...</code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"Ce sont de mauvaises pratiques liées à une mauvaise compréhension des verbes HTTP. Quand il y a un\\nnom d’action CRUD dans l’URI c’est qu’il y a un problème. De plus, dans la partie précédente, je\\nparle de cachabilité. Si vous faites une recherche avec POST, le serveur n’utilisera pas le cache…\\nmais il le mettra peut-être à jour (pour d’éventuels GET à venir qui ne viendront jamais).\", React.createElement(_components.br), \"\\n\", \"Si vous utilisez un POST au lieu d’un PUT (ou autre méthode idempotent) et que par mégarde, vous\\nexécutez cet appel plusieurs fois, il peut y avoir des effets de bords non désirés.\"), \"\\n\", React.createElement(_components.h2, {\n    id: \"création-post-vs-put\",\n    style: {\n      position: \"relative\"\n    }\n  }, React.createElement(_components.a, {\n    href: \"#cr%C3%A9ation-post-vs-put\",\n    \"aria-label\": \"création post vs put permalink\",\n    className: \"anchor before\"\n  }, React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<svg aria-hidden=\\\"true\\\" focusable=\\\"false\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg>\"\n    }\n  })), \"Création POST vs. PUT\"), \"\\n\", React.createElement(_components.p, null, \"Lors d’une création de ressource, il y a deux cas de figure : le serveur a la main sur la génération\\nde l’id (ou du nom de la ressource) ou bien le cas contraire. Dans le premier cas, il faut\\nprivilégier le POST et dans l’autre le PUT. En d’autres termes, n’utilisez PUT pour la création\\nuniquement si c’est au client connait l’URI de la ressource à créer.\"), \"\\n\", React.createElement(_components.p, null, \"Exemple avec les ressources subordonnées.\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"js\\\"><pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token string-property property\\\">\\\"id\\\"</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"42\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n  <span class=\\\"token string-property property\\\">\\\"name\\\"</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"calzone\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n  <span class=\\\"token string-property property\\\">\\\"price\\\"</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"$12\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n  <span class=\\\"token string-property property\\\">\\\"ingredients\\\"</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token punctuation\\\">[</span>\\n    <span class=\\\"token punctuation\\\">{</span> <span class=\\\"token string-property property\\\">\\\"id\\\"</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"4\\\"</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string-property property\\\">\\\"name\\\"</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"tomato sauce\\\"</span> <span class=\\\"token punctuation\\\">}</span>\\n    <span class=\\\"token punctuation\\\">{</span> <span class=\\\"token string-property property\\\">\\\"id\\\"</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"8\\\"</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string-property property\\\">\\\"name\\\"</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"ham\\\"</span> <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span> <span class=\\\"token string-property property\\\">\\\"id\\\"</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"15\\\"</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string-property property\\\">\\\"name\\\"</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"egg\\\"</span> <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token punctuation\\\">{</span> <span class=\\\"token string-property property\\\">\\\"id\\\"</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"16\\\"</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string-property property\\\">\\\"name\\\"</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token string\\\">\\\"basil leaves\\\"</span> <span class=\\\"token punctuation\\\">}</span>\\n    <span class=\\\"token operator\\\">...</span>\\n  <span class=\\\"token punctuation\\\">]</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"Nous avons une ressource comme celle ci-dessus et que nous voulons ajouter un ingrédient. Il\\npourrait-être tentant de faire un PUT sur la ressource entière. Pourtant un ingrédient est… aussi\\nune ressource ! Il faudra donc faire :\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"text\\\"><pre class=\\\"language-text\\\"><code class=\\\"language-text\\\">PUT http://api.example.com/pizzas/calzone/ingredients/&lt;idIngredient></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"En effet, ici POST pas possible car un ingrédient peut se retrouver dans plusieurs pizzas. Dans le\\ncas contraire, un POST aurait été utilisé comme ceci :\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"text\\\"><pre class=\\\"language-text\\\"><code class=\\\"language-text\\\">POST http://api.example.com/pizzas/calzone/ingredients/</code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.h2, {\n    id: \"le-cas-des-modifications-partielles\",\n    style: {\n      position: \"relative\"\n    }\n  }, React.createElement(_components.a, {\n    href: \"#le-cas-des-modifications-partielles\",\n    \"aria-label\": \"le cas des modifications partielles permalink\",\n    className: \"anchor before\"\n  }, React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<svg aria-hidden=\\\"true\\\" focusable=\\\"false\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg>\"\n    }\n  })), \"Le cas des modifications partielles\"), \"\\n\", React.createElement(_components.p, null, \"Si on regarde le panel de méthodes HTTP, on voit qu’il y a deux méthodes pour modifier une ressource\\n: PUT et PATCH. Si vous vous souvenez bien GET requière une ressource entière et PATCH effectue un\\ndifférentiel (avec les anciennes données). Donc dans les deux cas vous êtes obligés de faire un GET\\navant.\"), \"\\n\", React.createElement(_components.p, null, \"Là, je vous vois venir :\"), \"\\n\", React.createElement(_components.blockquote, null, \"\\n\", React.createElement(_components.p, null, \"“On a qu’à faire un PUT partiel et puis c’est tout !”\"), \"\\n\"), \"\\n\", React.createElement(_components.p, null, \"Et bien non ! Comme le dit si bien le papa de REST, un PUT partiel n’est pas compatible avec une API\\nRESTful. Par extension, il en va de même pour le POST partiel.\"), \"\\n\", React.createElement(\"blockquote\", {\n    class: \"twitter-tweet\",\n    lang: \"fr\"\n  }, React.createElement(\"p\", {\n    lang: \"en\",\n    dir: \"ltr\"\n  }, React.createElement(\"a\", {\n    href: \"https://twitter.com/mnot\"\n  }, \"@mnot\"), \" Oy, yes, PATCH was something I created for the initial HTTP/1.1 proposal because partial PUT is never RESTful. ;-)\"), \"— Roy T. Fielding (@fielding) \", React.createElement(\"a\", {\n    href: \"https://twitter.com/fielding/status/275471320685367296\"\n  }, \"3 Décembre 2012\")), \"\\n\", React.createElement(\"script\", {\n    async: true,\n    src: \"//platform.twitter.com/widgets.js\",\n    charset: \"utf-8\"\n  }), \"\\n\", React.createElement(_components.p, null, \"Bref, c’est toujours le même problème qui revient : \", React.createElement(_components.strong, null, \"Théorie Vs. Pragmatisme\"), \" :\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"Soit vous collez à fond à la spec HTTP pour avoir une vrai API REST et utilisez PATCH ;\"), \"\\n\", React.createElement(_components.li, null, \"Soit vous oubliez avoir lu cet article et continuez d’utiliser un POST/PUT partiel. Mais votre API\\nne sera pas pleinement REST ;-)\"), \"\\n\"), \"\\n\", React.createElement(_components.h2, {\n    id: \"sortir-du-cadre-crud\",\n    style: {\n      position: \"relative\"\n    }\n  }, React.createElement(_components.a, {\n    href: \"#sortir-du-cadre-crud\",\n    \"aria-label\": \"sortir du cadre crud permalink\",\n    className: \"anchor before\"\n  }, React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<svg aria-hidden=\\\"true\\\" focusable=\\\"false\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg>\"\n    }\n  })), \"Sortir du cadre CRUD\"), \"\\n\", React.createElement(_components.p, null, \"Même si ce n’est pas l’objet de cet article, je vais tout de même en parler un peu, car\\ncontrairement à ce que certains pensent, il est possible de sortir du cadre CRUD avec une API REST.\\nVous devrez alors utiliser la méthode POST, et ainsi profiter du caractère unsafe/non-idempotent de\\ncette dernière. Utiliser POST vous protège d’effets de bord évoqués précédemment (ex : retirer deux\\nfois l’argent sur le compte d’un client, double envoi de mail, …).\"), \"\\n\", React.createElement(_components.p, null, \"Exemple : \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">POST api.mon-application.org/utilisateurs/42/envoyer-mail-confirmation</code>\"\n    }\n  })), \"\\n\", React.createElement(_components.p, null, \"N’oubliez pas que c’est un échange entre le client et le serveur. Par conséquent, il doit y avoir\\nune réponse. Réponse qui se matérialise dans le cas présent par des\\n\", React.createElement(_components.a, {\n    href: \"http://www.restapitutorial.com/httpstatuscodes.html\"\n  }, \"codes\"), \". Dans le cas présent, il faudra\\nrenvoyer un \", React.createElement(_components.em, null, \"204 No Content\"), \".\"), \"\\n\", React.createElement(_components.h2, {\n    id: \"sources\",\n    style: {\n      position: \"relative\"\n    }\n  }, React.createElement(_components.a, {\n    href: \"#sources\",\n    \"aria-label\": \"sources permalink\",\n    className: \"anchor before\"\n  }, React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<svg aria-hidden=\\\"true\\\" focusable=\\\"false\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg>\"\n    }\n  })), \"Sources\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"Si vous voulez en savoir plus sur l’utilisation de PATCH, je vous recommande cet article :\\n\", React.createElement(_components.a, {\n    href: \"https://williamdurand.fr/2014/02/14/please-do-not-patch-like-an-idiot/\"\n  }, \"blog de William DURAND - Please do not PATCH like an idiot\"), \"\\ndédié à ce sujet.\"), \"\\n\", React.createElement(_components.li, null, \"J’ai récement découvert cet ouvrage :\\n\", React.createElement(_components.a, {\n    href: \"http://shop.oreilly.com/product/0636920021575.do\"\n  }, \"REST API Design Rulebook (Mark Masse)\"), \". C’est\\nune véritable mine d’or. Si vous vous posez des questions du type : quel code HTTP retourner ?\\nQuelle forme d’URL est la plus judicieuse ? Ai-je le droit de faire xxx ? … ce livre est fait\\npour vous !\"), \"\\n\", React.createElement(_components.li, null, \"Enfin, le \", React.createElement(_components.a, {\n    href: \"http://restcookbook.com\"\n  }, \"restcookbook\"), \" et l’article de\\n\", React.createElement(_components.a, {\n    href: \"http://jasonsirota.com/rest-partial-updates-use-post-put-or-patch\"\n  }, \"Jason Sirota : REST Partial Updates: Use POST, PUT or PATCH?\"), \"\\nm’ont beaucoup aidé.\"), \"\\n\"));\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? React.createElement(MDXLayout, props, React.createElement(_createMdxContent, props)) : _createMdxContent(props);\n}\nexport default MDXContent;\n","import GATSBY_COMPILED_MDX from \"/home/runner/work/maxpou.fr/maxpou.fr/content/posts/2015/2015-09-15-rest-crud/2015-09-15-rest-crud.md\";\nimport React from 'react';\nimport {graphql} from 'gatsby';\nimport Layout from '../components/Layout';\nimport Wrapper from '../components/Wrapper';\nimport Hero from '../components/Hero';\nimport Article from '../components/Article';\nimport PrevNextPost from '../components/PrevNextPost';\nimport SEO from '../components/SEO';\nimport Webmentions from '../components/Webmentions';\nfunction BlogPostTemplate({data, pageContext, children, location}) {\n  const post = data.post;\n  const {previous, next} = pageContext;\n  return React.createElement(Layout, {\n    location: location\n  }, React.createElement(SEO, {\n    title: post.frontmatter.title,\n    description: post.frontmatter.description || post.excerpt,\n    cover: post.frontmatter.cover && post.frontmatter.cover.publicURL,\n    imageShare: post.frontmatter.imageShare && post.frontmatter.imageShare.publicURL,\n    lang: post.frontmatter.language,\n    translations: post.frontmatter.translations,\n    path: post.frontmatter.slug,\n    isBlogPost: true\n  }), React.createElement(Hero, {\n    heroImg: post.frontmatter.cover,\n    title: post.frontmatter.title\n  }), React.createElement(Wrapper, null, React.createElement(Article, {\n    post: post\n  }, children)), React.createElement(Wrapper, {\n    as: \"aside\"\n  }, React.createElement(Webmentions, {\n    slug: post.frontmatter.slug,\n    title: post.frontmatter.title,\n    redditPostId: post.frontmatter.redditPostId\n  })), React.createElement(PrevNextPost, {\n    previous: previous,\n    next: next\n  }));\n}\nBlogPostTemplate\nexport default function GatsbyMDXWrapper(props) {\n  return React.createElement(BlogPostTemplate, props, React.createElement(GATSBY_COMPILED_MDX, props));\n}\nexport const pageQuery = graphql`\n  query BlogPostBySlug($slug: String!) {\n    post: mdx(frontmatter: { slug: { eq: $slug } }) {\n      excerpt\n      frontmatter {\n        title\n        date\n        slug\n        language\n        tags\n        description\n        cover {\n          publicURL\n          childImageSharp {\n            gatsbyImageData\n          }\n        }\n        imageShare {\n          publicURL\n        }\n        translations {\n          language\n          link\n          hreflang\n        }\n        redditPostId\n      }\n    }\n  }\n`;\n"],"names":["_createMdxContent","props","_components","Object","assign","h2","a","span","p","ul","li","strong","em","blockquote","br","_provideComponents","components","React","id","style","position","href","className","dangerouslySetInnerHTML","__html","class","lang","dir","async","src","charset","wrapper","MDXLayout","BlogPostTemplate","_ref","data","pageContext","children","location","post","previous","next","Layout","SEO","title","frontmatter","description","excerpt","cover","publicURL","imageShare","language","translations","path","slug","isBlogPost","Hero","heroImg","Wrapper","Article","as","Webmentions","redditPostId","PrevNextPost","GatsbyMDXWrapper","GATSBY_COMPILED_MDX"],"sourceRoot":""}