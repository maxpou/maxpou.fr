<!DOCTYPE html><html lang="fr"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="theme-color" content="#222222"/><meta data-react-helmet="true" name="twitter:image" content="https://www.maxpou.fr/static/1171885bb2b718192a51704eb5605f07/header.png"/><meta data-react-helmet="true" name="twitter:description" content="Améliorer les performances de doctrine en utilisant son cache et en stockant les informations sur Redis"/><meta data-react-helmet="true" name="twitter:title" content="Utiliser Redis pour stocker le cache de Doctrine | Maxence Poutord"/><meta data-react-helmet="true" name="twitter:creator" content="_maxpou"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" property="og:image" content="https://www.maxpou.fr/static/1171885bb2b718192a51704eb5605f07/header.png"/><meta data-react-helmet="true" property="og:description" content="Améliorer les performances de doctrine en utilisant son cache et en stockant les informations sur Redis"/><meta data-react-helmet="true" property="og:title" content="Utiliser Redis pour stocker le cache de Doctrine | Maxence Poutord"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:url" content="https://www.maxpou.fr/cache-doctrine-avec-redis"/><meta data-react-helmet="true" name="description" content="Améliorer les performances de doctrine en utilisant son cache et en stockant les informations sur Redis"/><meta name="generator" content="Gatsby 4.15.1"/><style data-href="/styles.0109ae7f897db2fecdd6.css" data-identity="gatsby-global-css">code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#ccc;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:1.5;-o-tab-size:4;tab-size:4;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}pre[class*=language-]{margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}</style><link rel="preconnect" href="https://plausible.io"/><script async="" defer="" data-domain="maxpou.fr" src="https://plausible.io/js/plausible.js"></script><script>
          window.plausible = window.plausible || function() { (window.plausible.q = window.plausible.q || []).push(arguments) };
          
          </script><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><style data-styled="" data-styled-version="5.3.5">.bgPzvr{background-color:#1da1f2;border-color:#1da1f2;color:#fff;font-size:0.9rem;border-radius:3px;padding:10px 20px 10px 25px;font-weight:600;-webkit-transition:background 0s;transition:background 0s;}/*!sc*/
.bgPzvr:hover{background-color:#fff;color:#1da1f2;border:1px solid #1da1f2;}/*!sc*/
.bgPzvr > svg{-webkit-transform:translateX(-50%) translateY(15%);-ms-transform:translateX(-50%) translateY(15%);transform:translateX(-50%) translateY(15%);}/*!sc*/
data-styled.g3[id="FollowMe__TwitterButton-sc-1w7ya39-0"]{content:"bgPzvr,"}/*!sc*/
.jeCPUM{top:0;left:0;margin:0 auto;display:block;width:100%;z-index:1000;background-color:var(--color-primaryAlpha);font-weight:700;}/*!sc*/
@media (min-width:700px){.jeCPUM{position:fixed;}}/*!sc*/
data-styled.g11[id="Header__HeaderWrapper-sc-vo0lcj-0"]{content:"jeCPUM,"}/*!sc*/
.fsgzfy{font-weight:700;margin-left:auto;margin-right:auto;height:60px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;max-width:770px;z-index:1000;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;overflow-x:auto;overflow-y:hidden;white-space:nowrap;padding:0px 10px;}/*!sc*/
data-styled.g12[id="Header__HeaderNav-sc-vo0lcj-1"]{content:"fsgzfy,"}/*!sc*/
.isPqBs{display:none;-webkit-box-align:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}/*!sc*/
@media (min-width:700px){.isPqBs{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}/*!sc*/
data-styled.g13[id="Header__HeaderLinksContainer-sc-vo0lcj-2"]{content:"isPqBs,"}/*!sc*/
.iXZOvU{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:var(--color-white);border:0;margin:0;padding:8px 10px;min-width:42px;z-index:10;}/*!sc*/
.iXZOvU:hover{color:var(--color-secondary);}/*!sc*/
.Header__HeaderLink-sc-vo0lcj-3 + .Header__HeaderLink-sc-vo0lcj-3{margin-left:0.7rem;}/*!sc*/
data-styled.g14[id="Header__HeaderLink-sc-vo0lcj-3"]{content:"iXZOvU,"}/*!sc*/
.exWDul{position:absolute;left:-999px;width:1px;height:1px;top:auto;color:var(--color-white);background-color:var(--color-grey700);}/*!sc*/
.exWDul:focus{display:inline-block;height:auto;width:auto;position:static;padding:20px 10px;}/*!sc*/
data-styled.g16[id="Header__SkipMainContent-sc-vo0lcj-5"]{content:"exWDul,"}/*!sc*/
.jIRsWW{z-index:30;top:0px;position:relative;color:var(--color-white);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;background:transparent;border:none;cursor:pointer;padding:8px 12px;-webkit-tap-highlight-color:transparent;}/*!sc*/
@media (min-width:700px){.jIRsWW{display:none;}}/*!sc*/
data-styled.g18[id="Header__BurgerButton-sc-vo0lcj-7"]{content:"jIRsWW,"}/*!sc*/
.hedncu{width:24px;top:30px;height:2px;background:var(--color-white);position:absolute;left:0;background:var(--color-white);-webkit-transition:all 250ms cubic-bezier(0.86,0,0.07,1);transition:all 250ms cubic-bezier(0.86,0,0.07,1);}/*!sc*/
.hedncu::before{content:'';top:-8px;width:24px;height:2px;background:var(--color-white);position:absolute;left:0;-webkit-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0);-webkit-transition:all 250ms cubic-bezier(0.86,0,0.07,1);transition:all 250ms cubic-bezier(0.86,0,0.07,1);}/*!sc*/
.hedncu::after{top:8px;content:'';width:24px;height:2px;background:white;position:absolute;left:0;-webkit-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0);-webkit-transition:all 250ms cubic-bezier(0.86,0,0.07,1);transition:all 250ms cubic-bezier(0.86,0,0.07,1);}/*!sc*/
data-styled.g19[id="Header__BurgerContent-sc-vo0lcj-8"]{content:"hedncu,"}/*!sc*/
.IClsB{text-align:left;padding-top:30px;padding-bottom:50px;background-color:var(--color-primary);color:var(--color-white);padding-left:20px;padding-right:20px;margin:0 auto;}/*!sc*/
.IClsB nav{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:row wrap;-ms-flex-flow:row wrap;flex-flow:row wrap;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;max-width:900px;margin:0 auto;}/*!sc*/
.IClsB nav .footer-col{-webkit-flex:1 auto;-ms-flex:1 auto;flex:1 auto;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding-right:1em;}/*!sc*/
.IClsB a{color:var(--color-white);font-weight:bold;}/*!sc*/
.IClsB a:hover{color:var(--color-grey200);}/*!sc*/
.IClsB .footer-col > p{margin:0;}/*!sc*/
.IClsB .footer-title{font-size:0.83em;margin:0 0 1rem;}/*!sc*/
.IClsB .footer-item{color:var(--color-white);}/*!sc*/
.IClsB .footer-item a{padding:0.25rem 0;display:block;}/*!sc*/
.IClsB .footer-heart{color:var(--color-red);}/*!sc*/
.IClsB .footer-item-text{padding:0.1rem 0;color:var(--color-white);}/*!sc*/
.IClsB .footer-header{-webkit-order:1;-ms-flex-order:1;order:1;margin:0 0.25rem;margin-right:0.25rem;padding:0.25rem;}/*!sc*/
.IClsB .footer-column-items{grid-template-columns:1fr;display:grid;}/*!sc*/
@media (max-width:564px){.IClsB .footer-col:first-child{width:100%;padding-bottom:2em;}}/*!sc*/
data-styled.g20[id="Footer__FooterWrapper-sc-kfpsif-0"]{content:"IClsB,"}/*!sc*/
*{box-sizing:border-box;margin:0;padding:0;-webkit-transition:background 1s ease;transition:background 1s ease;}/*!sc*/
body{font-family:"Lato",sans-serif;color:var(--color-text);background-color:var(--color-siteBackground);}/*!sc*/
::-webkit-scrollbar{width:0.5rem;}/*!sc*/
::-webkit-scrollbar-thumb{background:linear-gradient(var(--color-lightYellow),var(--color-secondary));border-radius:8px;}/*!sc*/
::-webkit-scrollbar-thumb:hover{background:linear-gradient(var(--color-secondary),var(--color-lightYellow));}/*!sc*/
img{max-width:100%;height:auto;vertical-align:middle;border:0;}/*!sc*/
a{-webkit-text-decoration:none;text-decoration:none;color:var(--color-text);}/*!sc*/
hr{border:0;border-top:1px solid var(--color-grey100);margin:50px 0 5px 0;}/*!sc*/
ul,ol{padding-left:2em;margin:1em 0 0 0;}/*!sc*/
*::selection{background-color:var(--color-secondary);color:var(--color-grey500);}/*!sc*/
data-styled.g21[id="sc-global-bVqWEt1"]{content:"sc-global-bVqWEt1,"}/*!sc*/
.iceSQI{box-shadow:0 2px 0 0 var(--color-secondary);}/*!sc*/
.iceSQI:hover{-webkit-filter:brightness(150%);filter:brightness(150%);box-shadow:none;}/*!sc*/
data-styled.g22[id="Commons__Link-sc-kdd33n-0"]{content:"iceSQI,"}/*!sc*/
.KjhyT{line-height:1.6;margin:1em 0 0 0;}/*!sc*/
data-styled.g24[id="Commons__Text-sc-kdd33n-2"]{content:"KjhyT,"}/*!sc*/
.effLSn{display:inline-block;color:var(--color-textSecondary);margin:0 4px;}/*!sc*/
.effLSn::before{content:'•';}/*!sc*/
data-styled.g25[id="Commons__Bull-sc-kdd33n-3"]{content:"effLSn,"}/*!sc*/
.hnVdcO{text-transform:uppercase;color:var(--color-textSecondary);}/*!sc*/
data-styled.g26[id="Commons__ReadingTimeContainer-sc-kdd33n-4"]{content:"hnVdcO,"}/*!sc*/
.jzoYRY{margin:0 0;background-color:var(--color-siteBackground);}/*!sc*/
@media (min-width:700px){.jzoYRY{padding:60px 0;}}/*!sc*/
data-styled.g27[id="layout__SiteContent-sc-1qf3ysj-0"]{content:"jzoYRY,"}/*!sc*/
.euAWDn{position:relative;border-radius:5px;max-width:770px;word-wrap:break-word;background-color:var(--color-wrapperBackground);margin:0px auto 30px auto;top:30px;padding:50px;box-shadow:0 0 0 0,0 6px 12px var(--color-wrapperShadow);}/*!sc*/
@media (max-width:780px){.euAWDn{width:100%;border-radius:unset;padding:25px;}}/*!sc*/
data-styled.g28[id="Wrapper-sc-1x9iu7j-0"]{content:"euAWDn,"}/*!sc*/
.cogdlU{position:relative;display:grid;width:100%;height:400px;}/*!sc*/
data-styled.g29[id="Hero__HeroContainer-sc-1nqmuvx-0"]{content:"cogdlU,"}/*!sc*/
.bcvZVW{grid-area:1/1;position:relative;place-items:center;display:grid;}/*!sc*/
data-styled.g30[id="Hero__TitleContainer-sc-1nqmuvx-1"]{content:"bcvZVW,"}/*!sc*/
.hSgEAv{text-align:center;font-weight:700;font-size:3rem;margin:10px 50px;color:var(--color-white);text-shadow:1px 1px 4px rgba(34,34,34,0.85);}/*!sc*/
data-styled.g31[id="Hero__HeroTitle-sc-1nqmuvx-2"]{content:"hSgEAv,"}/*!sc*/
.lgreCa{display:inline;color:var(--color-textSecondary);}/*!sc*/
data-styled.g34[id="TagList__ListContainer-sc-1areet5-0"]{content:"lgreCa,"}/*!sc*/
.eLSfTq{text-transform:uppercase;color:var(--color-textSecondary);}/*!sc*/
.eLSfTq:not(:first-child){margin-left:0.3rem;}/*!sc*/
.eLSfTq:hover{border-bottom:1px dotted var(--color-textSecondary);}/*!sc*/
.eLSfTq:before{content:'#';}/*!sc*/
data-styled.g35[id="TagList__TagListItemLink-sc-1areet5-1"]{content:"eLSfTq,"}/*!sc*/
.HrjWe{text-transform:uppercase;color:var(--color-textSecondary);}/*!sc*/
.HrjWe:not(:first-child){margin-left:0.3rem;}/*!sc*/
.HrjWe:before{content:'#';}/*!sc*/
data-styled.g36[id="TagList__TagListItem-sc-1areet5-2"]{content:"HrjWe,"}/*!sc*/
.wtdNt .author-image{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;position:absolute;top:-40px;left:50%;margin-left:-40px;width:80px;height:80px;border-radius:100%;overflow:hidden;padding:6px;z-index:2;box-shadow:#ececec 0 0 0 1px;background-color:var(--color-wrapperBackground);}/*!sc*/
.wtdNt .author-image img{border-radius:100%;}/*!sc*/
.wtdNt .author-profile .author-image{position:relative;left:auto;top:auto;width:120px;height:120px;padding:3px;margin:-100px auto 0 auto;box-shadow:none;}/*!sc*/
.wtdNt .followMeWrapper{padding-top:10px;}/*!sc*/
data-styled.g49[id="Bio__BioWrapper-sc-1t07u8t-0"]{content:"wtdNt,"}/*!sc*/
.cTCqPc a{box-shadow:0 2px 0 0 var(--color-secondary);}/*!sc*/
.cTCqPc a:hover{-webkit-filter:brightness(150%);filter:brightness(150%);box-shadow:none;}/*!sc*/
data-styled.g50[id="Bio__BioText-sc-1t07u8t-1"]{content:"cTCqPc,"}/*!sc*/
.cuvoWa{color:var(--color-textSecondary);}/*!sc*/
data-styled.g54[id="Time__TimeContainer-sc-hoimeu-0"]{content:"cuvoWa,"}/*!sc*/
.hsulPN{margin-bottom:2rem;color:var(--color-textSecondary);font-size:0.9em;}/*!sc*/
data-styled.g55[id="ContentHeader__Header-sc-snwgmv-0"]{content:"hsulPN,"}/*!sc*/
.gA-DtgU{line-height:1.6;font-size:1.1em;}/*!sc*/
.gA-DtgU > h2{color:var(--color-h2);padding-top:3rem;margin-top:3rem;border-top:1px solid #ececec;}/*!sc*/
.gA-DtgU > h3{padding-top:3rem;}/*!sc*/
.gA-DtgU > p{margin:1em 0 0 0;}/*!sc*/
.gA-DtgU li{margin-bottom:16px;}/*!sc*/
.gA-DtgU li:last-of-type{margin-bottom:0px;}/*!sc*/
.gA-DtgU li ul{margin-top:5px;}/*!sc*/
.gA-DtgU li ul li{margin-bottom:8px;}/*!sc*/
.gA-DtgU a{fill:var(--color-text);position:relative !important;box-shadow:0 2px 0 0 var(--color-secondary);}/*!sc*/
.gA-DtgU a:hover{-webkit-filter:brightness(150%);filter:brightness(150%);box-shadow:none;}/*!sc*/
.gA-DtgU a.anchor,.gA-DtgU a.gatsby-resp-image-link{box-shadow:none;}/*!sc*/
.gA-DtgU h1 .anchor svg,.gA-DtgU h2 .anchor svg,.gA-DtgU h3 .anchor svg,.gA-DtgU h4 .anchor svg,.gA-DtgU h5 .anchor svg,.gA-DtgU h6 .anchor svg{visibility:hidden;margin-left:-16px;}/*!sc*/
.gA-DtgU h1:hover .anchor svg,.gA-DtgU h2:hover .anchor svg,.gA-DtgU h3:hover .anchor svg,.gA-DtgU h4:hover .anchor svg,.gA-DtgU h5:hover .anchor svg,.gA-DtgU h6:hover .anchor svg,.gA-DtgU h1 .anchor:focus svg,.gA-DtgU h2 .anchor:focus svg,.gA-DtgU h3 .anchor:focus svg,.gA-DtgU h4 .anchor:focus svg,.gA-DtgU h5 .anchor:focus svg,.gA-DtgU h6 .anchor:focus svg{visibility:visible;}/*!sc*/
.gA-DtgU > blockquote{box-sizing:border-box;background-color:var(--color-secondaryContentBackground);border-left:5px solid var(--color-secondary);margin:30px 0px;padding:5px 20px;border-radius:0 8px 8px 0;}/*!sc*/
.gA-DtgU > blockquote p{margin:0.8em 0;font-style:italic;}/*!sc*/
.gA-DtgU .gatsby-highlight{border-radius:5px;font-size:15px;line-height:1.7;border-radius:10px;overflow:auto;tab-size:1.5em;margin:1.5em -1.5em;}/*!sc*/
@media (max-width:500px){.gA-DtgU .gatsby-highlight{border-radius:0;margin-left:-25px;margin-right:-25px;}}/*!sc*/
.gA-DtgU .gatsby-highlight > pre{border:0;margin:0;padding:1;}/*!sc*/
.gA-DtgU .gatsby-highlight pre[class*='language-']{float:left;min-width:100%;}/*!sc*/
.gA-DtgU .gatsby-highlight-code-line{background-color:var(--color-darkBlue);display:block;margin-right:-1em;margin-left:-1em;padding-right:1em;padding-left:0.75em;border-left:0.25em solid var(--color-yellow);}/*!sc*/
.gA-DtgU h1 > code.language-text,.gA-DtgU h2 > code.language-text,.gA-DtgU h3 > code.language-text,.gA-DtgU h4 > code.language-text,.gA-DtgU h5 > code.language-text,.gA-DtgU h6 > code.language-text,.gA-DtgU a > code.language-text,.gA-DtgU p > code.language-text,.gA-DtgU li > code.language-text,.gA-DtgU em > code.language-text,.gA-DtgU strong > code.language-text{background:var(--color-beige);color:#222222cc;padding:0 3px;font-size:0.94em;border-radius:0.3rem;word-wrap:break-word;}/*!sc*/
.gA-DtgU code{word-wrap:break-word;}/*!sc*/
.gA-DtgU table{margin-top:1em;margin-bottom:1em;border-collapse:collapse;overflow:hidden;}/*!sc*/
.gA-DtgU table th,.gA-DtgU table td{padding:0.5em;background-color:var(--color-secondaryContentBackground);}/*!sc*/
.gA-DtgU table tr{border-bottom:2px solid var(--color-white);}/*!sc*/
.gA-DtgU table tbody tr:last-child{border-bottom:none;}/*!sc*/
data-styled.g56[id="Content__ContentBody-sc-1hjk74l-0"]{content:"gA-DtgU,"}/*!sc*/
.fGIgEb{padding:0 30px 30px;}/*!sc*/
@media only screen and (max-width:500px){.fGIgEb{padding:0;}}/*!sc*/
data-styled.g57[id="Article__ArticleWrapper-sc-15webty-0"]{content:"fGIgEb,"}/*!sc*/
.cKEhpo{position:relative;margin:6rem 0 0;padding:3rem 0 0;border-top:1px solid #ececec;}/*!sc*/
data-styled.g58[id="Article__ArticleFooter-sc-15webty-1"]{content:"cKEhpo,"}/*!sc*/
.jMTjIw{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;max-width:810px;margin:40px auto 0px;}/*!sc*/
data-styled.g59[id="PrevNextPost__PreviewContainer-sc-qi508c-0"]{content:"jMTjIw,"}/*!sc*/
.jnCTWq{height:100%;display:block;}/*!sc*/
data-styled.g60[id="PrevNextPost__PreviewLink-sc-qi508c-1"]{content:"jnCTWq,"}/*!sc*/
.edgGdi{cursor:pointer;-webkit-flex:1 1 300px;-ms-flex:1 1 300px;flex:1 1 300px;-webkit-align-self:stretch;-ms-flex-item-align:stretch;align-self:stretch;background-color:var(--color-secondaryContentBackground);box-shadow:0 0 0 0,0 6px 12px rgba(0,0,0,0.1);margin:20px 20px;border-radius:5px;}/*!sc*/
.edgGdi:hover{box-shadow:0 0 0 0,0 6px 12px var(--color-grey300);-webkit-transition:all 0.3s ease;transition:all 0.3s ease;-webkit-transform:translate3D(0,-1px,0);-ms-transform:translate3D(0,-1px,0);transform:translate3D(0,-1px,0);}/*!sc*/
data-styled.g61[id="PrevNextPost__Preview-sc-qi508c-2"]{content:"edgGdi,"}/*!sc*/
.nBLdZ > *{height:200px;border-radius:5px 5px 0 0;}/*!sc*/
data-styled.g62[id="PrevNextPost__PreviewCover-sc-qi508c-3"]{content:"nBLdZ,"}/*!sc*/
.tpbLn{padding:20px;height:calc(100% - 200px);-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:inherit;-webkit-flex-grow:inherit;-ms-flex-positive:inherit;flex-grow:inherit;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}/*!sc*/
.tpbLn header{padding:0 0 10px 0;}/*!sc*/
.tpbLn section{padding-bottom:10px;}/*!sc*/
.tpbLn footer{-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;font-size:0.8em;}/*!sc*/
data-styled.g63[id="PrevNextPost__PreviewContent-sc-qi508c-4"]{content:"tpbLn,"}/*!sc*/
.gpjYxj{display:inline;}/*!sc*/
data-styled.g66[id="Webmentions__MentionTitle-sc-1wsy4io-1"]{content:"gpjYxj,"}/*!sc*/
.bRXsXW{display:inline;color:#e0245e;padding-right:3px;}/*!sc*/
.bRXsXW > svg{-webkit-transform:translateX(-15%) translateY(25%);-ms-transform:translateX(-15%) translateY(25%);transform:translateX(-15%) translateY(25%);}/*!sc*/
data-styled.g67[id="Webmentions__LikeContainer-sc-1wsy4io-2"]{content:"bRXsXW,"}/*!sc*/
.emZaMy{display:inline;color:#17bf63;}/*!sc*/
.emZaMy > svg{-webkit-transform:translateX(0%) translateY(20%);-ms-transform:translateX(0%) translateY(20%);transform:translateX(0%) translateY(20%);}/*!sc*/
data-styled.g68[id="Webmentions__RetweetContainer-sc-1wsy4io-3"]{content:"emZaMy,"}/*!sc*/
</style><title data-react-helmet="true">Utiliser Redis pour stocker le cache de Doctrine | Maxence Poutord</title><link data-react-helmet="true" rel="preconnect" href="https://fonts.gstatic.com"/><link data-react-helmet="true" rel="preload" as="style" href="https://fonts.googleapis.com/css?family=Lato:400,700&amp;display=swap"/><link data-react-helmet="true" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700&amp;display=swap" media="print"/><link data-react-helmet="true" rel="canonical" href="https://www.maxpou.fr/cache-doctrine-avec-redis"/><link data-react-helmet="true" rel="webmention" href="https://webmention.io/www.maxpou.fr/webmention"/><link data-react-helmet="true" rel="pingback" href="https://webmention.io/www.maxpou.fr/xmlrpc"/><script data-react-helmet="true" type="application/ld+json">[{"@context":"http://schema.org","@type":"WebSite","url":"https://www.maxpou.fr/cache-doctrine-avec-redis","name":"Utiliser Redis pour stocker le cache de Doctrine | Maxence Poutord","alternateName":"Utiliser Redis pour stocker le cache de Doctrine | Maxence Poutord"},{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https://www.maxpou.fr/cache-doctrine-avec-redis","name":"Utiliser Redis pour stocker le cache de Doctrine | Maxence Poutord","image":"https://www.maxpou.fr/static/1171885bb2b718192a51704eb5605f07/header.png"}}]},{"@context":"http://schema.org","@type":"BlogPosting","url":"https://www.maxpou.fr/cache-doctrine-avec-redis","name":"Utiliser Redis pour stocker le cache de Doctrine | Maxence Poutord","alternateName":"Utiliser Redis pour stocker le cache de Doctrine | Maxence Poutord","headline":"Utiliser Redis pour stocker le cache de Doctrine | Maxence Poutord","image":{"@type":"ImageObject","url":"https://www.maxpou.fr/static/1171885bb2b718192a51704eb5605f07/header.png"},"description":"Améliorer les performances de doctrine en utilisant son cache et en stockant les informations sur Redis","author":{"@type":"Person"},"publisher":{"@type":"Organization"},"mainEntityOfPage":{"@type":"WebSite","@id":"https://www.maxpou.fr/cache-doctrine-avec-redis"}}]</script><link rel="icon" href="/favicon-32x32.png?v=9760e642bf7a05b3ba35950d80435566" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=9760e642bf7a05b3ba35950d80435566"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=9760e642bf7a05b3ba35950d80435566"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=9760e642bf7a05b3ba35950d80435566"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=9760e642bf7a05b3ba35950d80435566"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=9760e642bf7a05b3ba35950d80435566"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=9760e642bf7a05b3ba35950d80435566"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=9760e642bf7a05b3ba35950d80435566"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=9760e642bf7a05b3ba35950d80435566"/><link rel="sitemap" type="application/xml" href="/sitemap/sitemap-index.xml"/><link rel="alternate" type="application/rss+xml" title="Maxence Poutord • Maxpou Blog (EN)" href="/rss-en.xml"/><link rel="alternate" type="application/rss+xml" title="Maxence Poutord • Maxpou Blog (FR)" href="/rss-fr.xml"/><link rel="alternate" type="application/rss+xml" title="Maxence Poutord • Maxpou Blog" href="/rss.xml"/><style>html { 
--color-grey100: undefined;
--color-grey200: undefined;
--color-grey300: undefined;
--color-grey400: undefined;
--color-grey500: undefined;
--color-grey600: undefined;
--color-grey700: undefined;
--color-grey800: undefined;
--color-grey900: undefined;
--color-white: undefined;
--color-yellow: undefined;
--color-lightYellow: undefined;
--color-blueGreyed: undefined;
--color-darkBlue: undefined;
--color-beige: undefined;
--color-red: undefined;
--color-text: #3E4047;
--color-textSecondary: #546c77;
--color-siteBackground: #f4f8fb;
--color-wrapperBackground: #ffffff;
--color-secondaryContentBackground: #f7f7f7;
--color-wrapperShadow: #0000001a;
--color-primary: #3E4047;
--color-primaryAlpha: rgba(32, 35, 42, 0.85);
--color-secondary: #ffdc4e;
--color-h2: #3E4047; }</style></head><body><script>!function(){const e=window.matchMedia("(prefers-color-scheme: dark)").matches,r=localStorage.getItem("color-mode");let t="light";t="string"==typeof r?r:e?"dark":"light";let a=document.documentElement;a.style.setProperty("--initial-color-mode",t),Object.entries({grey100:"#ECECED",grey200:"#CFCFD1",grey300:"#B2B3B5",grey400:"#78797E",grey500:"#3E4047",grey600:"#383A40",grey700:"#25262B",grey800:"#1C1D20",grey900:"#131315",white:"#ffffff",yellow:"#ffdc4e",lightYellow:"#f9e892",blueGreyed:"#546c77",darkBlue:"#022a4b",beige:"#fff9d9",red:"#ff0000",text:{light:"#3E4047",dark:"#ECECED"},textSecondary:{light:"#546c77",dark:"#c6d8e0"},siteBackground:{light:"#f4f8fb",dark:"#3E4047"},wrapperBackground:{light:"#ffffff",dark:"#3E4047"},secondaryContentBackground:{light:"#f7f7f7",dark:"#3a3a3a"},wrapperShadow:{light:"#0000001a",dark:"#00000000"},primary:{light:"#3E4047",dark:"#3E4047"},primaryAlpha:{light:"rgba(32, 35, 42, 0.85)",dark:"rgba(32, 35, 42, 0.85)"},secondary:{light:"#ffdc4e",dark:"#ffdc4e"},h2:{light:"#3E4047",dark:"#ffdc4e"}}).forEach(([e,r])=>{const f="--color-"+e;"object"==typeof r?a.style.setProperty(f,r[t]):a.style.setProperty(f,r)})}();</script><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><header class="Header__HeaderWrapper-sc-vo0lcj-0 jeCPUM"><nav class="Header__HeaderNav-sc-vo0lcj-1 fsgzfy"><a href="#main-content" class="Header__SkipMainContent-sc-vo0lcj-5 exWDul">Skip to main content</a><div class="Header__HeaderLinksContainer-sc-vo0lcj-2 isPqBs"><a aria-label="View home page" class="Header__HeaderLink-sc-vo0lcj-3 iXZOvU" href="/">maxpou.fr</a></div><div class="Header__HeaderLinksContainer-sc-vo0lcj-2 isPqBs"><a aria-label="View Blog page" class="Header__HeaderLink-sc-vo0lcj-3 iXZOvU" href="/">Blog</a><a aria-label="View Speaking page" class="Header__HeaderLink-sc-vo0lcj-3 iXZOvU" href="/speaking">Speaking</a><a aria-label="View About page" class="Header__HeaderLink-sc-vo0lcj-3 iXZOvU" href="/about">About</a></div><button aria-label="open menu" class="Header__BurgerButton-sc-vo0lcj-7 jIRsWW"><div class="Header__BurgerContent-sc-vo0lcj-8 hedncu"></div></button></nav></header><div class="layout__SiteContent-sc-1qf3ysj-0 jzoYRY"><div style="display:grid" class="Hero__HeroContainer-sc-1nqmuvx-0 cogdlU"><div data-gatsby-image-wrapper="" style="grid-area:1/1" class="gatsby-image-wrapper gatsby-image-wrapper-constrained"><div style="max-width:1155px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg height=&#x27;510.99999999999994&#x27; width=&#x27;1155&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#e8e8e8;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/webp" data-srcset="/static/1171885bb2b718192a51704eb5605f07/06358/header.webp 289w,/static/1171885bb2b718192a51704eb5605f07/42601/header.webp 578w,/static/1171885bb2b718192a51704eb5605f07/0fd8b/header.webp 1155w" sizes="(min-width: 1155px) 1155px, 100vw"/><img data-gatsby-image-ssr="" layout="fullWidth" placeholder="blurred" formats="auto,webp,avif" data-main-image="" style="opacity:0" sizes="(min-width: 1155px) 1155px, 100vw" decoding="async" loading="lazy" data-src="/static/1171885bb2b718192a51704eb5605f07/5addc/header.png" data-srcset="/static/1171885bb2b718192a51704eb5605f07/128ca/header.png 289w,/static/1171885bb2b718192a51704eb5605f07/517eb/header.png 578w,/static/1171885bb2b718192a51704eb5605f07/5addc/header.png 1155w" alt=""/></picture><noscript><picture><source type="image/webp" srcSet="/static/1171885bb2b718192a51704eb5605f07/06358/header.webp 289w,/static/1171885bb2b718192a51704eb5605f07/42601/header.webp 578w,/static/1171885bb2b718192a51704eb5605f07/0fd8b/header.webp 1155w" sizes="(min-width: 1155px) 1155px, 100vw"/><img data-gatsby-image-ssr="" layout="fullWidth" placeholder="blurred" formats="auto,webp,avif" data-main-image="" style="opacity:0" sizes="(min-width: 1155px) 1155px, 100vw" decoding="async" loading="lazy" src="/static/1171885bb2b718192a51704eb5605f07/5addc/header.png" srcSet="/static/1171885bb2b718192a51704eb5605f07/128ca/header.png 289w,/static/1171885bb2b718192a51704eb5605f07/517eb/header.png 578w,/static/1171885bb2b718192a51704eb5605f07/5addc/header.png 1155w" alt=""/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div><div class="Hero__TitleContainer-sc-1nqmuvx-1 bcvZVW"><div><h1 class="Hero__HeroTitle-sc-1nqmuvx-2 hSgEAv">Utiliser Redis pour stocker le cache de Doctrine</h1></div></div></div><main role="main" id="main-content" class="Wrapper-sc-1x9iu7j-0 euAWDn"><article class="Article__ArticleWrapper-sc-15webty-0 fGIgEb"><section><header class="ContentHeader__Header-sc-snwgmv-0 hsulPN"><time class="Time__TimeContainer-sc-hoimeu-0 cuvoWa">8 March 2016</time><span class="Commons__Bull-sc-kdd33n-3 effLSn"></span><div class="TagList__ListContainer-sc-1areet5-0 lgreCa"><a class="TagList__TagListItemLink-sc-1areet5-1 eLSfTq" href="/tags/Symfony2">Symfony2</a>, <a class="TagList__TagListItemLink-sc-1areet5-1 eLSfTq" href="/tags/Doctrine">Doctrine</a>, <a class="TagList__TagListItemLink-sc-1areet5-1 eLSfTq" href="/tags/Redis">Redis</a></div></header><div class="Content__ContentBody-sc-1hjk74l-0 gA-DtgU"><blockquote><p>La meilleur requête est celle que l’on a pas à faire — <strong>un inconnu</strong></p></blockquote><p>Dans mon actuelle mission, nous développons une application sous Symfony2 avec Doctrine comme ORM.
Voici grossièrement à quoi ressemble l’architecture globale :</p><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:590px">
      <span class="gatsby-resp-image-background-image" style="padding-bottom:58.78378378378378%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABcSAAAXEgFnn9JSAAADQklEQVQoz22Te0yTZxTGn+/joiu21AtIumiwOjWajniZK2vVRasoMi1KMMwYL7VYYRPdijBaK7NKS8vFShVCAYtag0ai1GRKSw3VQIyCLejiZZhtBFwzM2GyLPtDd5bvY/7HSU7yPnmT3znPe94DW1snnkdGQUTgoqFXx5g6lCAaRVQ0I4mdHLMAwAwA8QAmsYiSApgLYDImCsdl757BVyNaItrK6UtPD8HasxpV97/g7/vftOJEqSVVq9V5PpWnGgGw4lhJNPMBmAmBB9236Fr3YyKioZZH1uTSe8um1fbnJDpCWxIsHZtnEl2PWa/+zJgqV1KKbGlkm6R4qjxBjaJNtUy7/yYbDAbZ5uZmcOnxeIASS/W7g0VGamysHwj+cWZBadcKiTOUNft0WD3LHtya3EdK0VeFe03p6Wn0bYH+tXmdNwMA49Y+QGdXAIFAgH8uqVQ63vGb34flp6rsCrf7Qgqnrw4dRuXDDXCE1Djx4yJcG7Bg+FXkQ8ORppN3up9kvfWTIPejOhkRMb6O9lS/37+KOyclJY1bpn/HcOjAPhQeKeH11eECpuphOuMIqZng3RKWq05Ecb8ZivoGTcbc+9u/wZ5Y01Rbtnd3S0vLXz6f721+fv5iAIlisVgMU9MVjPzzjm875wXg6t/NVPSm8cBw2PYeOOVlceFPY9WV+T+s3QXNlGPTrZnXd7pcrp+9Xu9LjUYznwOKRCIRHFdubHwxFMkgopWoANxP9sPeu463XDu6HLW39Wg41zRv55fGBtmSz3XFcruw4OPzMkCEkxaz1FXv4mAQCATjlvUX2inw6FduypHmsGFhWc9Kydm+bH4o5lub5vxJuvi0TMX3CoWSlqasGNEuPJ3Bd32ZUFZxHI2NTbw7oVA4PpTD5krK05eQ5+L5X7pfu5O/uyObdiaUzX+bcwO7ZhB1spqvc4pUKhXl6fIGKUyCHRvyeEhZuZltbW1lnU4nampqYLVagWeP+zJt5dasurp6FVcg+LcN5T1rUN2zGe+3w3mqTmk8aqxv87bpFapPEgAkxAkFMRN+7K7bPuRqNTAYjvK6c8wOx9P1ON6ehqhYZrowXjATQBy3If9nIhvFctDoiYD/AcTibdGJcK+lAAAAAElFTkSuQmCC&#x27;);background-size:cover;display:block"></span>
  <picture>
          <source srcSet="/static/0340deb42b7103aa574a14527451c2ab/cbe2e/architecture.webp 148w,/static/0340deb42b7103aa574a14527451c2ab/3084c/architecture.webp 295w,/static/0340deb42b7103aa574a14527451c2ab/5ca24/architecture.webp 590w,/static/0340deb42b7103aa574a14527451c2ab/487e2/architecture.webp 625w" sizes="(max-width: 590px) 100vw, 590px" type="image/webp"/>
          <source srcSet="/static/0340deb42b7103aa574a14527451c2ab/12f09/architecture.png 148w,/static/0340deb42b7103aa574a14527451c2ab/e4a3f/architecture.png 295w,/static/0340deb42b7103aa574a14527451c2ab/fcda8/architecture.png 590w,/static/0340deb42b7103aa574a14527451c2ab/80d71/architecture.png 625w" sizes="(max-width: 590px) 100vw, 590px" type="image/png"/>
          <img class="gatsby-resp-image-image" src="/static/0340deb42b7103aa574a14527451c2ab/fcda8/architecture.png" alt="architecture globale" title="architecture globale" loading="lazy" decoding="async" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0"/>
        </picture>
    </span></p><p>Comme vous le voyez, l’application est dédoublée sur deux serveurs distincts qui ont interdiction de
se parler, en dehors de la base de données. Nous avons été confrontés à des problématiques de
performances qui nous a contraint d’utiliser le <strong>cache de Doctrine</strong>.</p><p>Il faut savoir qu’il y a
<a href="http://doctrine-orm.readthedocs.org/en/latest/reference/caching.html">3 types de cache pour Doctrine</a>
:</p><ul><li>Query Cache : transformation DQL -&gt; SQL;</li><li>Result Cache : résultat de la requête;</li><li>Metadata Cache : annotation des entities.</li></ul><p>Si on regarde
<a href="http://doctrine-orm.readthedocs.org/en/latest/reference/caching.html#cache-drivers">la liste des drivers</a>,
on s’aperçoit qu’il n’est pas évident de mutualiser du cache entre plusieurs serveur (qui ne peuvent
pas communiquer directement ensemble).</p><p>C’est là que Redis arrive ♥</p><p>En quelques mots, Redis (pour <em>REmote DIctionary Server</em>) est un SGBD <strong>clé-valeur</strong> qui s’inscrit
dans la mouvance NoSQL. En plus d’être simple d’utilisation, sa performance qui ferait pâlir Usain
Bolt. Cela est principalement dû au fait que tout est persisté dans le cache du serveur. Si vous
doutez encore de cette dernière phrase, sachez que
<a href="http://highscalability.com/blog/2012/4/2/youporn-targeting-200-million-views-a-day-and-beyond.html">YouPorn</a>,
<a href="http://nickcraver.com/blog/2016/02/17/stack-overflow-the-architecture-2016-edition/">Stack Overflow</a>,
<a href="https://github.com/blog/530-how-we-made-github-fast">Github</a>… l’utilisent ;-)</p><p>Voici un exemple de fonctionnement :</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token operator">&gt;</span> SET name <span class="token string">&quot;maxence&quot;</span>
OK
<span class="token operator">&gt;</span> GET name
<span class="token string">&quot;maxence&quot;</span>
<span class="token operator">&gt;</span> KEYS *
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;name&quot;</span>
<span class="token comment"># Assigner un TTL sur une variable</span>
<span class="token operator">&gt;</span> SETEX mission <span class="token number">10</span> <span class="token string">&quot;votre mission si vous l&#x27;acceptez... ce message s&#x27;autodétruira dans 10s&quot;</span>
OK
<span class="token comment"># 10&#x27; après, le couple clef/valeur a disparu</span>
<span class="token operator">&gt;</span> GET mission
<span class="token punctuation">(</span>nil<span class="token punctuation">)</span></code></pre></div><h2 id="installation" style="position:relative"><a href="#installation" aria-label="installation permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installation</h2><p>L’installation de Redis est plutôt simple et se fait en quelques lignes de commande :</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token comment"># download</span>
<span class="token function">wget</span> http://download.redis.io/redis-stable.tar.gz
<span class="token function">tar</span> xvzf redis-stable.tar.gz
<span class="token builtin class-name">cd</span> redis-stable
<span class="token function">make</span>
<span class="token comment"># install</span>
<span class="token function">sudo</span> <span class="token function">make</span> <span class="token function">install</span>
<span class="token comment"># start</span>
redis-server</code></pre></div><p>Il va ensuite falloir installer les bundles qui vont bien :</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">composer</span> require snc/redis-bundle <span class="token number">2</span>.x-dev
<span class="token function">composer</span> require predis/predis ^1.0</code></pre></div><p>Et on modifie le app/AppKernel.php:</p><div class="gatsby-highlight" data-language="php"><pre class="language-php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">registerBundles</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$bundles</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
        <span class="token comment">// ...</span>
        <span class="token keyword">new</span> <span class="token class-name class-name-fully-qualified">Snc<span class="token punctuation">\</span>RedisBundle<span class="token punctuation">\</span>SncRedisBundle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//...</span>
<span class="token punctuation">}</span></span></code></pre></div><p>Dans le config.yml :</p><div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">imports</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token punctuation">{</span> <span class="token key atrule">resource</span><span class="token punctuation">:</span> redis.yml <span class="token punctuation">}</span>

<span class="token comment"># Doctrine Configuration</span>
<span class="token key atrule">doctrine</span><span class="token punctuation">:</span>
  <span class="token key atrule">dbal</span><span class="token punctuation">:</span>
    <span class="token comment">#...</span>
  <span class="token key atrule">orm</span><span class="token punctuation">:</span>
    <span class="token key atrule">auto_generate_proxy_classes</span><span class="token punctuation">:</span> <span class="token string">&#x27;%kernel.debug%&#x27;</span>
    <span class="token key atrule">naming_strategy</span><span class="token punctuation">:</span> doctrine.orm.naming_strategy.underscore
    <span class="token comment"># IMPORTANT!</span>
    <span class="token key atrule">auto_mapping</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">metadata_cache_driver</span><span class="token punctuation">:</span> redis
    <span class="token key atrule">query_cache_driver</span><span class="token punctuation">:</span> redis

<span class="token comment"># redis.yml</span>
<span class="token key atrule">snc_redis</span><span class="token punctuation">:</span>
  <span class="token key atrule">clients</span><span class="token punctuation">:</span>
    <span class="token key atrule">default</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> predis
      <span class="token key atrule">alias</span><span class="token punctuation">:</span> default
      <span class="token key atrule">dsn</span><span class="token punctuation">:</span> redis<span class="token punctuation">:</span>//1.2.3.4
    <span class="token key atrule">doctrine</span><span class="token punctuation">:</span>
      <span class="token key atrule">type</span><span class="token punctuation">:</span> predis
      <span class="token key atrule">alias</span><span class="token punctuation">:</span> doctrine
      <span class="token key atrule">dsn</span><span class="token punctuation">:</span> redis<span class="token punctuation">:</span>//1.2.3.4
  <span class="token key atrule">doctrine</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata_cache</span><span class="token punctuation">:</span>
      <span class="token key atrule">client</span><span class="token punctuation">:</span> doctrine
      <span class="token key atrule">entity_manager</span><span class="token punctuation">:</span> default
      <span class="token key atrule">document_manager</span><span class="token punctuation">:</span> default
    <span class="token key atrule">result_cache</span><span class="token punctuation">:</span>
      <span class="token key atrule">client</span><span class="token punctuation">:</span> doctrine
      <span class="token key atrule">entity_manager</span><span class="token punctuation">:</span> default
    <span class="token key atrule">query_cache</span><span class="token punctuation">:</span>
      <span class="token key atrule">client</span><span class="token punctuation">:</span> doctrine
      <span class="token key atrule">entity_manager</span><span class="token punctuation">:</span> default</code></pre></div><p>Et voilà pour l’installation.<br/>
<!-- -->A ce stade, seuls les caches de metadata et de query sont opérationnels. Pour la mise en cache du
résultat, il faudra le faire <strong>manuellement sur chaque requête</strong>.</p><h2 id="mettre-en-cache-le-résultat" style="position:relative"><a href="#mettre-en-cache-le-r%C3%A9sultat" aria-label="mettre en cache le résultat permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Mettre en cache le résultat</h2><p>Terminé les requêtes <em>inlines</em> dans les controllers ! Vous allez désormais devoir utiliser le</p><abbr title="Doctrine Query Language">DQL</abbr> ou le QueryBuilder.<div class="gatsby-highlight" data-language="php"><pre class="language-php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">findBeers</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$query</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">getEntityManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token operator">-&gt;</span><span class="token function">createQuery</span><span class="token punctuation">(</span>
            <span class="token string single-quoted-string">&#x27;select beers from MaxpouBeerBundle:Beers b&#x27;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">;</span>

    <span class="token variable">$query</span><span class="token operator">-&gt;</span><span class="token function">useResultCache</span><span class="token punctuation">(</span><span class="token constant boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$query</span><span class="token operator">-&gt;</span><span class="token function">setResultCacheLifetime</span><span class="token punctuation">(</span><span class="token number">3600</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//3600sec = 1 hour</span>

    <span class="token keyword">return</span> <span class="token variable">$query</span><span class="token operator">-&gt;</span><span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></span></code></pre></div><p>Maintenant, si l’on recharge la page, cette requête ne se fera plus via MySQL mais bien via Redis.
On peut vérifier tout cela en allant sur Redis et en rentrant la commande suivante : <code class="language-text">KEYS *</code>. Voici
ce que l’on va avoir :</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token operator">&gt;</span> KEYS *
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;[Maxpou<span class="token entity" title="\\">\\</span>BeerBundle<span class="token entity" title="\\">\\</span>Entity<span class="token entity" title="\\">\\</span>Beer<span class="token variable">$CLASSMETADATA</span>][1]&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;[809cd863587594a754a7ffda5c2c06ee4640ebe3][1]&quot;</span></code></pre></div><p>La première ligne va contenir les métadonnées de la classe Beer. La seconde, contiendra la requête
<strong>et</strong> son résultat. Si vous voulez avoir une clé un peu plus digeste, vous pouvez utiliser cette
méthode <code class="language-text">$query-&gt;setResultCacheId(&#x27;my_wonderful_key&#x27;);</code> ou même faire <strong>1 pierre 3 coups</strong> :
<code class="language-text">$query-&gt;useResultCache(true, 3600, &#x27;my_wonderful_key&#x27;);</code>.</p><p>Voici ce que nous aurons : (je n’ai pas réussi à supprimer le <code class="language-text">[1]</code>)</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token operator">&gt;</span> KEYS *
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;[Maxpou<span class="token entity" title="\\">\\</span>BeerBundle<span class="token entity" title="\\">\\</span>Entity<span class="token entity" title="\\">\\</span>Beer<span class="token variable">$CLASSMETADATA</span>][1]&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;[my_wonderful_key][1]&quot;</span></code></pre></div><p>Pour nettoyer le cache, voici quelques commandes :</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token comment"># Nettoyer cache des queries</span>
php app/console doctrine:cache:clear-query
<span class="token comment"># Nettoyer cache des metadatas</span>
php app/console doctrine:cache:clear-metadata
<span class="token comment"># Nettoyer cache des résultats</span>
php app/console doctrine:cache:clear-result
<span class="token comment"># Vider la base redis</span>
php app/console redis:flushdb</code></pre></div><h2 id="invalider-le-cache-des-requêtes" style="position:relative"><a href="#invalider-le-cache-des-requ%C3%AAtes" aria-label="invalider le cache des requêtes permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Invalider le cache des requêtes</h2><p>C’est bien de mettre en place un système de cache, mais vous n’allez pas demander à vos utilisateurs
de lancer la commande après chaque opération. Il va donc falloir utiliser les événements de
Doctrine, et plus particulièrement
l’<a href="http://doctrine-orm.readthedocs.org/projects/doctrine-orm/en/latest/reference/events.html#entity-listeners">entity listeners</a>
Si vous faites des tests, pensez à commenter le cache des métadonnées ;-)</p><p>Définissez le service :</p><div class="gatsby-highlight" data-language="php"><pre class="language-php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">Maxpou<span class="token punctuation">\</span>BeerBundle<span class="token punctuation">\</span>Service</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Doctrine<span class="token punctuation">\</span>ORM<span class="token punctuation">\</span>Event<span class="token punctuation">\</span>LifecycleEventArgs</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Maxpou<span class="token punctuation">\</span>BeerBundle<span class="token punctuation">\</span>Entity<span class="token punctuation">\</span>Beer</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">BeerListener</span>
<span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token variable">$cacheDriver</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__construct</span><span class="token punctuation">(</span><span class="token variable">$cacheDriver</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">cacheDriver</span> <span class="token operator">=</span> <span class="token variable">$cacheDriver</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">postPersist</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Beer</span> <span class="token variable">$beer</span><span class="token punctuation">,</span> <span class="token class-name type-declaration">LifecycleEventArgs</span> <span class="token variable">$args</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">cacheDriver</span><span class="token operator">-&gt;</span><span class="token function">expire</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#x27;[beers_all][1]&#x27;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">postUpdate</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Beer</span> <span class="token variable">$beer</span><span class="token punctuation">,</span> <span class="token class-name type-declaration">LifecycleEventArgs</span> <span class="token variable">$args</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">cacheDriver</span><span class="token operator">-&gt;</span><span class="token function">expire</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#x27;[beers_all][1]&#x27;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">postRemove</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Beer</span> <span class="token variable">$beer</span><span class="token punctuation">,</span> <span class="token class-name type-declaration">LifecycleEventArgs</span> <span class="token variable">$args</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">cacheDriver</span><span class="token operator">-&gt;</span><span class="token function">expire</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#x27;[beers_all][1]&#x27;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></code></pre></div><p>Ici, <code class="language-text">beer_all</code> est le nom de l’id assigné au cache.</p><p>Le service.yml :</p><div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">beer_listener</span><span class="token punctuation">:</span>
  <span class="token key atrule">class</span><span class="token punctuation">:</span> Maxpou\BeerBundle\Service\BeerListener
  <span class="token key atrule">arguments</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token string">&#x27;@snc_redis.doctrine&#x27;</span>
  <span class="token key atrule">tags</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token punctuation">{</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> doctrine.orm.entity_listener <span class="token punctuation">}</span></code></pre></div><p>Et enfin l’annotation sur l’entity :</p><div class="gatsby-highlight" data-language="php"><pre class="language-php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token comment">/**
 * Beer
 *
 * @ORM\Table(name=&quot;beers&quot;)
 * @ORM\Entity(repositoryClass=&quot;Maxpou\BeerBundle\Repository\BeerRepository&quot;)
 * @ORM\EntityListeners({&quot;Maxpou\BeerBundle\Service\BeerListener&quot;})
 */</span>
<span class="token keyword">class</span> <span class="token class-name-definition class-name">Beer</span> <span class="token keyword">implements</span> <span class="token class-name">BeerInterface</span>
<span class="token punctuation">{</span>
<span class="token comment">//...</span></span></code></pre></div><p>Les plus pointilleux d’entre vous auront remarqués que je redéfini le TTL de ma clef au lieu de la
supprimer. En effet, si je supprime ma clef, la nouvelle clef créée sera <code class="language-text">[beers_all][2]</code>. Et le
compteur augmentera ainsi de suite…<br/>
<!-- -->Avec cette technique <s>de fainéant</s>, on garde la main sur le nom de la clef qui sera toujours
<code class="language-text">[beers_all][1]</code>.</p><h2 id="pour-aller-plus-loin" style="position:relative"><a href="#pour-aller-plus-loin" aria-label="pour aller plus loin permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Pour aller plus loin</h2><ul><li>Tutoriel/Sandbox Redis : <a href="http://try.redis.io">http://try.redis.io</a></li><li><a href="http://doctrine-orm.readthedocs.org/projects/doctrine-orm/en/latest/reference/second-level-cache.html">2e niveau de cache de Doctrine (encore à l’état expérimental)</a></li></ul><h2 id="tips" style="position:relative"><a href="#tips" aria-label="tips permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Tips</h2><p>Utiliser les pipes unix avec le redis-cli : <code class="language-text">echo &quot;KEYS *&quot; | ./path/to/redis-cli | grep beer</code><br/>
<!-- -->Vérifier le <abbr title="Time To Live">TTL</abbr> d’une clef: <code class="language-text">TTL [beer-id-42][1]</code></p></div></section><footer class="Article__ArticleFooter-sc-15webty-1 cKEhpo"><div class="Bio__BioWrapper-sc-1t07u8t-0 wtdNt"><figure class="author-image"><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained"><div style="max-width:460px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg height=&#x27;460&#x27; width=&#x27;460&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#080808;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/webp" data-srcset="/static/9760e642bf7a05b3ba35950d80435566/f8466/avatar.webp 115w,/static/9760e642bf7a05b3ba35950d80435566/84992/avatar.webp 230w,/static/9760e642bf7a05b3ba35950d80435566/b5c5b/avatar.webp 460w" sizes="(min-width: 460px) 460px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 460px) 460px, 100vw" decoding="async" loading="lazy" data-src="/static/9760e642bf7a05b3ba35950d80435566/37851/avatar.jpg" data-srcset="/static/9760e642bf7a05b3ba35950d80435566/5b1fa/avatar.jpg 115w,/static/9760e642bf7a05b3ba35950d80435566/f0f53/avatar.jpg 230w,/static/9760e642bf7a05b3ba35950d80435566/37851/avatar.jpg 460w" alt="Maxence Poutord"/></picture><noscript><picture><source type="image/webp" srcSet="/static/9760e642bf7a05b3ba35950d80435566/f8466/avatar.webp 115w,/static/9760e642bf7a05b3ba35950d80435566/84992/avatar.webp 230w,/static/9760e642bf7a05b3ba35950d80435566/b5c5b/avatar.webp 460w" sizes="(min-width: 460px) 460px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 460px) 460px, 100vw" decoding="async" loading="lazy" src="/static/9760e642bf7a05b3ba35950d80435566/37851/avatar.jpg" srcSet="/static/9760e642bf7a05b3ba35950d80435566/5b1fa/avatar.jpg 115w,/static/9760e642bf7a05b3ba35950d80435566/f0f53/avatar.jpg 230w,/static/9760e642bf7a05b3ba35950d80435566/37851/avatar.jpg 460w" alt="Maxence Poutord"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div></figure><section><h2>About the author</h2><p class="Commons__Text-sc-kdd33n-2 Bio__BioText-sc-1t07u8t-1 KjhyT cTCqPc">
  Hey, I'm Maxence Poutord, a software engineer specialized in web technologies. 
  In my day-to-day job, I'm working as a senior front-end engineer at Orderfox.
  When I'm not working, you can find me travelling the world or cooking.
  </p><div class="followMeWrapper"><a rel="noopener" target="_blank" href="https://twitter.com/intent/follow?screen_name=_maxpou" class="FollowMe__TwitterButton-sc-1w7ya39-0 bgPzvr"><svg aria-label="Twitter" viewBox="0 0 24 24" width="1em" height="1em"><path fill="currentColor" d="M23.954 4.569a10 10 0 0 1-2.825.775 4.958 4.958 0 0 0 2.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 0 0-8.384 4.482C7.691 8.094 4.066 6.13 1.64 3.161a4.822 4.822 0 0 0-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 0 1-2.228-.616v.061a4.923 4.923 0 0 0 3.946 4.827 4.996 4.996 0 0 1-2.212.085 4.937 4.937 0 0 0 4.604 3.417 9.868 9.868 0 0 1-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 0 0 7.557 2.209c9.054 0 13.999-7.496 13.999-13.986 0-.209 0-.42-.015-.63a9.936 9.936 0 0 0 2.46-2.548l-.047-.02z"></path></svg>Follow @<!-- -->_maxpou</a></div></section></div></footer></article></main><aside class="Wrapper-sc-1x9iu7j-0 euAWDn"><div><h2 class="Webmentions__MentionTitle-sc-1wsy4io-1 gpjYxj">Webmentions</h2><span class="Commons__Bull-sc-kdd33n-3 effLSn"></span><div class="Webmentions__LikeContainer-sc-1wsy4io-2 bRXsXW">0<!-- --> <svg aria-label="Like" viewBox="0 0 48 48" height="24px" width="24px" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M23.99291,15.87187l1.0159-0.8889c1.3968-1.2275,3.118-1.8341,4.8535-1.8341 c2.0316,0,4.0351,0.8324,5.4883,2.4549c2.5961,2.9347,2.4127,7.3508-0.3386,10.0597l-9.8284,8.7357 c-0.6794,0.6026-1.7019,0.6026-2.3814,0l-9.8143-8.7357c-2.7512-2.6948-2.9346-7.125-0.3386-10.0597 c1.4532-1.6225,3.4567-2.4549,5.4884-2.4549c1.7213,0,3.4567,0.6066,4.8535,1.8341L23.99291,15.87187"></path></svg></div><div class="Webmentions__RetweetContainer-sc-1wsy4io-3 emZaMy">0<!-- --> <svg aria-label="Retweet" height="24px" viewBox="0 -91 512 512" width="24px" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="m512 250.644531-79.796875 79.671875-80.363281-80.03125 28.210937-28.328125 31.871094 31.738281v-193.613281c.035156-5.277343-1.996094-10.246093-5.71875-13.992187-3.757813-3.785156-8.777344-5.867188-14.128906-5.867188h-215.230469l-40.144531-39.980468h255.375c16.082031 0 31.171875 6.277343 42.492187 17.667968 11.265625 11.34375 17.417969 26.382813 17.332032 42.363282v193.882812l31.851562-31.804688zm-184.039062 39.449219h-208.035157c-5.355469 0-10.371093-2.082031-14.128906-5.863281-3.722656-3.746094-5.753906-8.71875-5.71875-13.996094v-193.613281l31.871094 31.738281 28.210937-28.328125-80.363281-80.03125-79.796875 79.675781 28.25 28.289063 31.851562-31.800782v193.878907c-.085937 15.980469 6.066407 31.023437 17.332032 42.363281 11.320312 11.390625 26.410156 17.667969 42.492187 17.667969h255.375l-40.144531-39.980469zm0 0"></path></svg></div><p class="Commons__Text-sc-kdd33n-2 KjhyT"><a href="https://twitter.com/search?q=https://www.maxpou.fr/cache-doctrine-avec-redis&amp;src=typed_query&amp;f=top" class="Commons__Link-sc-kdd33n-0 iceSQI">You can like or tweet about this post</a> <!-- -->and it will show up here!</p></div></aside><aside class="PrevNextPost__PreviewContainer-sc-qi508c-0 jMTjIw"><article class="PrevNextPost__Preview-sc-qi508c-2 edgGdi"><a aria-label="View What&#x27;s happens when you `git commit` article" class="PrevNextPost__PreviewLink-sc-qi508c-1 jnCTWq" href="/git-under-the-hood"><div class="PrevNextPost__PreviewCover-sc-qi508c-3 nBLdZ"><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained"><div style="max-width:640px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg height=&#x27;399.74440894568687&#x27; width=&#x27;640&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#082848;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/webp" data-srcset="/static/ca587ae5a4fe01cfbb8004bcf9929aca/f6a86/cover.webp 157w,/static/ca587ae5a4fe01cfbb8004bcf9929aca/9c435/cover.webp 313w,/static/ca587ae5a4fe01cfbb8004bcf9929aca/1b615/cover.webp 626w" sizes="(min-width: 626px) 626px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 626px) 626px, 100vw" decoding="async" loading="lazy" data-src="/static/ca587ae5a4fe01cfbb8004bcf9929aca/cb1c0/cover.jpg" data-srcset="/static/ca587ae5a4fe01cfbb8004bcf9929aca/deec6/cover.jpg 157w,/static/ca587ae5a4fe01cfbb8004bcf9929aca/011bc/cover.jpg 313w,/static/ca587ae5a4fe01cfbb8004bcf9929aca/cb1c0/cover.jpg 626w" alt="View What&#x27;s happens when you `git commit` article"/></picture><noscript><picture><source type="image/webp" srcSet="/static/ca587ae5a4fe01cfbb8004bcf9929aca/f6a86/cover.webp 157w,/static/ca587ae5a4fe01cfbb8004bcf9929aca/9c435/cover.webp 313w,/static/ca587ae5a4fe01cfbb8004bcf9929aca/1b615/cover.webp 626w" sizes="(min-width: 626px) 626px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 626px) 626px, 100vw" decoding="async" loading="lazy" src="/static/ca587ae5a4fe01cfbb8004bcf9929aca/cb1c0/cover.jpg" srcSet="/static/ca587ae5a4fe01cfbb8004bcf9929aca/deec6/cover.jpg 157w,/static/ca587ae5a4fe01cfbb8004bcf9929aca/011bc/cover.jpg 313w,/static/ca587ae5a4fe01cfbb8004bcf9929aca/cb1c0/cover.jpg 626w" alt="View What&#x27;s happens when you `git commit` article"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div></div><div class="PrevNextPost__PreviewContent-sc-qi508c-4 tpbLn"><header><h2>What&#x27;s happens when you `git commit`</h2></header><section><p>Nowadays, most of our projects use Git as a version control system. It means most of our projects
have a  .git  folder. But, have you ever…</p></section><footer><span class="Commons__ReadingTimeContainer-sc-kdd33n-4 hnVdcO">3<!-- --> min read</span><span class="Commons__Bull-sc-kdd33n-3 effLSn"></span><div class="TagList__ListContainer-sc-1areet5-0 lgreCa"><span to="/tags/Git" class="TagList__TagListItem-sc-1areet5-2 HrjWe">Git</span></div></footer></div></a></article><article class="PrevNextPost__Preview-sc-qi508c-2 edgGdi"><a aria-label="View Git: Cheat Sheet (advanced) article" class="PrevNextPost__PreviewLink-sc-qi508c-1 jnCTWq" href="/git-cheat-sheet"><div class="PrevNextPost__PreviewCover-sc-qi508c-3 nBLdZ"><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained"><div style="max-width:640px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg height=&#x27;270&#x27; width=&#x27;640&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#d8e8f8;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/webp" data-srcset="/static/20c5da898a702c5828fba56bf688f49f/c5556/git-toolbox.webp 160w,/static/20c5da898a702c5828fba56bf688f49f/06b74/git-toolbox.webp 320w,/static/20c5da898a702c5828fba56bf688f49f/e076d/git-toolbox.webp 640w" sizes="(min-width: 640px) 640px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 640px) 640px, 100vw" decoding="async" loading="lazy" data-src="/static/20c5da898a702c5828fba56bf688f49f/f60b4/git-toolbox.png" data-srcset="/static/20c5da898a702c5828fba56bf688f49f/c325e/git-toolbox.png 160w,/static/20c5da898a702c5828fba56bf688f49f/3b9da/git-toolbox.png 320w,/static/20c5da898a702c5828fba56bf688f49f/f60b4/git-toolbox.png 640w" alt="View Git: Cheat Sheet (advanced) article"/></picture><noscript><picture><source type="image/webp" srcSet="/static/20c5da898a702c5828fba56bf688f49f/c5556/git-toolbox.webp 160w,/static/20c5da898a702c5828fba56bf688f49f/06b74/git-toolbox.webp 320w,/static/20c5da898a702c5828fba56bf688f49f/e076d/git-toolbox.webp 640w" sizes="(min-width: 640px) 640px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 640px) 640px, 100vw" decoding="async" loading="lazy" src="/static/20c5da898a702c5828fba56bf688f49f/f60b4/git-toolbox.png" srcSet="/static/20c5da898a702c5828fba56bf688f49f/c325e/git-toolbox.png 160w,/static/20c5da898a702c5828fba56bf688f49f/3b9da/git-toolbox.png 320w,/static/20c5da898a702c5828fba56bf688f49f/f60b4/git-toolbox.png 640w" alt="View Git: Cheat Sheet (advanced) article"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div></div><div class="PrevNextPost__PreviewContent-sc-qi508c-4 tpbLn"><header><h2>Git: Cheat Sheet (advanced)</h2></header><section><p>If you find git confusing, I created this little cheat sheet! Please, note that I voluntarily
skipped the basic commands like  git commit…</p></section><footer><span class="Commons__ReadingTimeContainer-sc-kdd33n-4 hnVdcO">1<!-- --> min read</span><span class="Commons__Bull-sc-kdd33n-3 effLSn"></span><div class="TagList__ListContainer-sc-1areet5-0 lgreCa"><span to="/tags/Git" class="TagList__TagListItem-sc-1areet5-2 HrjWe">Git</span></div></footer></div></a></article></aside></div><footer class="Footer__FooterWrapper-sc-kfpsif-0 IClsB"><nav><div class="footer-col"><h3 class="footer-title">Maxence Poutord<!-- --> © <!-- -->2022</h3><p class="footer-item-text">Built with<!-- --> <a class="footer-link" href="https://www.gatsbyjs.org">Gatsby</a>.</p><p class="footer-item-text">Theme using<!-- --> <a class="footer-link" href="https://github.com/maxpou/gatsby-starter-morning-dew">gatsby-starter-morning-dew</a>.</p><p class="footer-item-text">Hosted with<!-- --> <span class="footer-heart" role="img" aria-label="Love">❤</span> <!-- -->by<!-- --> <a class="footer-link" href="https://github.com/maxpou/maxpou.fr">GitHub</a>.</p></div><div class="footer-col"><h3 class="footer-title">Explore</h3><div class="footer-column-items"><span class="footer-item"><a class="footer-link" href="/">Blog</a></span><span class="footer-item"><a class="footer-link" href="/speaking">Speaking</a></span><span class="footer-item"><a class="footer-link" href="/portfolio">Portfolio</a></span><span class="footer-item"><a class="footer-link" href="/uses">Uses</a></span><span class="footer-item"><a class="footer-link" href="/about">About</a></span><span class="footer-item"><a class="footer-link" href="/cv">Resume</a></span></div></div><div class="footer-col"><h3 class="footer-title">Follow me</h3><div class="footer-column-items"><span class="footer-item"><a class="footer-link" href="https://github.com/maxpou" rel="me">GitHub</a></span><span class="footer-item"><a class="footer-link" href="https://twitter.com/_maxpou" rel="me">Twitter</a></span><span class="footer-item"><a class="footer-link" href="https://www.linkedin.com/in/maxpou/">LinkedIn</a></span><span class="footer-item"><a class="footer-link" href="https://nomadlist.com/@maxpou">Nomad List</a></span><span class="footer-item"><a class="footer-link" href="https://dev.to/maxpou">Dev.to</a></span><span class="footer-item"><a class="footer-link" href="/rss">RSS</a></span></div></div></nav></footer></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/cache-doctrine-avec-redis";window.___webpackCompilationHash="ddd024293aabfbf03544";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-a6e37c1192ee4e864b34.js"],"app":["/app-f95b96ca3ada46e05d2e.js"],"component---src-pages-404-js":["/component---src-pages-404-js-797e797048f6564fd07b.js"],"component---src-pages-cv-js":["/component---src-pages-cv-js-5196e8c1fcf9ffbd2e2a.js"],"component---src-templates-blog-list-template-js":["/component---src-templates-blog-list-template-js-24c60b80cd852e02ec20.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-fb84cb11dadd0779784d.js"],"component---src-templates-page-js":["/component---src-templates-page-js-4c6c38be8b6acd59166d.js"],"component---src-templates-tags-js":["/component---src-templates-tags-js-54a5752c9ff3c33074c3.js"]};/*]]>*/</script><script src="/polyfill-a6e37c1192ee4e864b34.js" nomodule=""></script><script src="/app-f95b96ca3ada46e05d2e.js" async=""></script><script src="/framework-2a4ed03366915a8542fa.js" async=""></script><script src="/webpack-runtime-e33784050c25d8f006d8.js" async=""></script></body></html>